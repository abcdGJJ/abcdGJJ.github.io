<!-- build time:Sat Nov 03 2018 22:05:58 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html class="theme-next pisces use-motion" lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=1.0.2" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/favicon.png?v=1.0.2"><link rel="icon" type="image/png" sizes="32x32" href="/favicon32x32.png?v=1.0.2"><link rel="icon" type="image/png" sizes="16x16" href="/favicon16x16.png?v=1.0.2"><link rel="mask-icon" href="/favicon.svg?v=1.0.2" color="#222"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Pisces",version:"1.0.2",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!1,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="本文翻译自30-seconds-of-code，可以理解为高阶函数片段。原作者说是30s内就可以理解，而我每一个都看了几分钟。Adapterary创建一个最多接受n个参数的函数，多余的参数将被忽略。使用Array.prototype.slice(0,n)和扩展运算符（...），调用提供的函数发fn，并且最多有n个参数。1234const ary = (fn, n) =&amp;gt; (...args)"><meta name="keywords" content="JavaScript"><meta property="og:type" content="article"><meta property="og:title" content="30s内即可理解的JavaScript片段"><meta property="og:url" content="https://gaojiajun.cn/2018/10/30-seconds-of-code/index.html"><meta property="og:site_name" content="高嘉君的个人博客"><meta property="og:description" content="本文翻译自30-seconds-of-code，可以理解为高阶函数片段。原作者说是30s内就可以理解，而我每一个都看了几分钟。Adapterary创建一个最多接受n个参数的函数，多余的参数将被忽略。使用Array.prototype.slice(0,n)和扩展运算符（...），调用提供的函数发fn，并且最多有n个参数。1234const ary = (fn, n) =&amp;gt; (...args)"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2018-10-24T09:39:11.641Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="30s内即可理解的JavaScript片段"><meta name="twitter:description" content="本文翻译自30-seconds-of-code，可以理解为高阶函数片段。原作者说是30s内就可以理解，而我每一个都看了几分钟。Adapterary创建一个最多接受n个参数的函数，多余的参数将被忽略。使用Array.prototype.slice(0,n)和扩展运算符（...），调用提供的函数发fn，并且最多有n个参数。1234const ary = (fn, n) =&amp;gt; (...args)"><link rel="canonical" href="https://gaojiajun.cn/2018/10/30-seconds-of-code/"><script type="text/javascript" id="page.configurations">CONFIG.page={sidebar:""}</script><title>30s内即可理解的JavaScript片段 | 高嘉君的个人博客</title><script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?fe9b7ee0648033db8df76416c2f766f8";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style type="text/css">.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">高嘉君的个人博客</span> <span class="logo-line-after"><i></i></span></a></div></div><div class="site-nav-toggle"><button aria-label="切换导航栏"><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://gaojiajun.cn/2018/10/30-seconds-of-code/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="abcdGJJ"><meta itemprop="description" content="这里是高嘉君的个人博客"><meta itemprop="image" content="/images/avatar.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="高嘉君的个人博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">30s内即可理解的JavaScript片段</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-10-04 14:16:48" itemprop="dateCreated datePublished" datetime="2018-10-04T14:16:48+08:00">2018-10-04</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2018-10-24 17:39:11" itemprop="dateModified" datetime="2018-10-24T17:39:11+08:00">2018-10-24</time> </span><span id="/2018/10/30-seconds-of-code/" class="leancloud_visitors" data-flag-title="30s内即可理解的JavaScript片段"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span class="leancloud-visitors-count"></span></span><div class="post-symbolscount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">本文字数：</span> <span title="本文字数">16k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span title="阅读时长">14 分钟</span></div></div></header><div class="post-body" itemprop="articleBody"><p>本文翻译自<a href="//github.com/30-seconds/30-seconds-of-code#table-of-contents">30-seconds-of-code</a>，可以理解为高阶函数片段。原作者说是30s内就可以理解，而我每一个都看了几分钟。</p><h1 id="Adapter"><a href="#Adapter" class="headerlink" title="Adapter"></a>Adapter</h1><h2 id="ary"><a href="#ary" class="headerlink" title="ary"></a>ary</h2><p>创建一个最多接受<code>n</code>个参数的函数，多余的参数将被忽略。</p><p>使用<code>Array.prototype.slice(0,n)</code>和扩展运算符（<code>...</code>），调用提供的函数发fn，并且最多有n个参数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ary = <span class="function">(<span class="params">fn, n</span>) =&gt;</span> (...args) =&gt; fn(...args.slice(<span class="number">0</span>, n));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> firstTwoMax = ary(<span class="built_in">Math</span>.max, <span class="number">2</span>);</span><br><span class="line">[[<span class="number">2</span>, <span class="number">6</span>, <span class="string">'a'</span>], [<span class="number">8</span>, <span class="number">4</span>, <span class="number">6</span>], [<span class="number">10</span>]].map(<span class="function"><span class="params">x</span> =&gt;</span> firstTwoMax(...x)); <span class="comment">// [6, 8, 10]</span></span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="call"><a href="#call" class="headerlink" title="call"></a>call</h2><p>接受一个键值和一组参数，在给定上下文时调用它们。主要用于组合。</p><p>使用闭包在调用的时候存储键值和参数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> call = <span class="function">(<span class="params">key, ...args</span>) =&gt;</span> context =&gt; context[key](...args);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="built_in">Promise</span>.resolve([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">  .then(call(<span class="string">'map'</span>, x =&gt; <span class="number">2</span> * x))</span><br><span class="line">  .then(<span class="built_in">console</span>.log); <span class="comment">//[ 2, 4, 6 ] 能想到这么写的绝对是个人才</span></span><br><span class="line"><span class="keyword">const</span> map = call.bind(<span class="literal">null</span>, <span class="string">'map'</span>); <span class="comment">// bind不会立即执行，call、apply才会</span></span><br><span class="line"><span class="built_in">Promise</span>.resolve([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">  .then(map(<span class="function"><span class="params">x</span> =&gt;</span> <span class="number">2</span> * x))</span><br><span class="line">  .then(<span class="built_in">console</span>.log); <span class="comment">//[ 2, 4, 6 ]</span></span><br></pre></td></tr></table></figure><h2 id="collectInto"><a href="#collectInto" class="headerlink" title="collectInto"></a>collectInto</h2><p>将接受数组的函数变为接受变量的函数。</p><p>给定一个函数，返回一个闭包，该闭包将所有输入收集到一个接受数组的函数中。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> collectInto = <span class="function"><span class="params">fn</span> =&gt;</span> (...args) =&gt; fn(args);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> Pall = collectInto(<span class="built_in">Promise</span>.all.bind(<span class="built_in">Promise</span>));</span><br><span class="line"><span class="keyword">let</span> p1 = <span class="built_in">Promise</span>.resolve(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">let</span> p2 = <span class="built_in">Promise</span>.resolve(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">let</span> p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> setTimeout(resolve, <span class="number">2000</span>, <span class="number">3</span>)); <span class="comment">// 这么写很精髓</span></span><br><span class="line">Pall(p1, p2, p3).then(<span class="built_in">console</span>.log); <span class="comment">// [1, 2, 3] (after about 2 seconds)</span></span><br></pre></td></tr></table></figure><h2 id="flip"><a href="#flip" class="headerlink" title="flip"></a>flip</h2><p>flip将函数作为参数，然后把闭包里的第一个参数作为最后一个参数。</p><p>返回一个可以接受变量输入的闭包，并展开剩余参数，之后将其变为第一个参数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> flip = <span class="function"><span class="params">fn</span> =&gt;</span> (first, ...rest) =&gt; fn(...rest, first);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">let</span> a = &#123; <span class="attr">name</span>: <span class="string">'John Smith'</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> b = &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> mergeFrom = flip(<span class="built_in">Object</span>.assign);</span><br><span class="line"><span class="keyword">let</span> mergePerson = mergeFrom.bind(<span class="literal">null</span>, a);</span><br><span class="line">mergePerson(b); <span class="comment">// == b</span></span><br><span class="line">b = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.assign(b, a); <span class="comment">// == b</span></span><br></pre></td></tr></table></figure><h2 id="over"><a href="#over" class="headerlink" title="over"></a>over</h2><p>创建一个函数，调用参数中所有的函数并返回结果。</p><p>使用<code>Array.prototype.map()</code>和<code>Function.prototype.apply()</code>将每个函数应用于给定的参数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> over = <span class="function">(<span class="params">...fns</span>) =&gt;</span> (...args) =&gt; fns.map(<span class="function"><span class="params">fn</span> =&gt;</span> fn.apply(<span class="literal">null</span>, args));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> minMax = over(<span class="built_in">Math</span>.min, <span class="built_in">Math</span>.max);</span><br><span class="line">minMax(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>); <span class="comment">// [1,5]</span></span><br></pre></td></tr></table></figure><h2 id="overArgs"><a href="#overArgs" class="headerlink" title="overArgs"></a>overArgs</h2><p>创建一个函数，调用参数中的函数并将闭包中的参数按提供的函数转换。</p><p>使用<code>Array.prototype.map()</code>与扩展运算符(<code>...</code>)将转换后的参数传递给<code>fn</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> overArgs = <span class="function">(<span class="params">fn, transforms</span>) =&gt;</span> (...args) =&gt; fn(...args.map(<span class="function">(<span class="params">val, i</span>) =&gt;</span> transforms[i](val)));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> square = <span class="function"><span class="params">n</span> =&gt;</span> n * n;</span><br><span class="line"><span class="keyword">const</span> double = <span class="function"><span class="params">n</span> =&gt;</span> n * <span class="number">2</span>;</span><br><span class="line"><span class="keyword">const</span> fn = overArgs(<span class="function">(<span class="params">x, y</span>) =&gt;</span> [x, y], [square, double]);</span><br><span class="line">fn(<span class="number">9</span>, <span class="number">3</span>); <span class="comment">// [81, 6]</span></span><br></pre></td></tr></table></figure><h2 id="pipeAsyncFunctions"><a href="#pipeAsyncFunctions" class="headerlink" title="pipeAsyncFunctions"></a>pipeAsyncFunctions</h2><p>这个函数实在是太复杂了，稍后再译。</p><p>Performs left-to-right function composition for asynchronous functions.</p><p>Use <code>Array.prototype.reduce()</code> with the spread operator (<code>...</code>) to perform left-to-right function composition using <code>Promise.then()</code>. The functions can return a combination of: simple values, <code>Promise</code>‘s, or they can be defined as <code>async</code> ones returning through <code>await</code>. All functions must be unary.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pipeAsyncFunctions = <span class="function">(<span class="params">...fns</span>) =&gt;</span> arg =&gt; fns.reduce(<span class="function">(<span class="params">p, f</span>) =&gt;</span> p.then(f), <span class="built_in">Promise</span>.resolve(arg));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> sum = pipeAsyncFunctions(</span><br><span class="line">  x =&gt; x + <span class="number">1</span>,</span><br><span class="line">  x =&gt; <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> resolve(x + <span class="number">2</span>), <span class="number">1000</span>)),</span><br><span class="line">  x =&gt; x + <span class="number">3</span>,</span><br><span class="line">  <span class="keyword">async</span> x =&gt; (<span class="keyword">await</span> x) + <span class="number">4</span></span><br><span class="line">);</span><br><span class="line">(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">await</span> sum(<span class="number">5</span>)); <span class="comment">// 15 (after one second)</span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><h2 id="pipeFunctions"><a href="#pipeFunctions" class="headerlink" title="pipeFunctions"></a>pipeFunctions</h2><p>按照从左到右的函数顺序执行。</p><p>借助<code>Array.prototype.reduce()</code>与扩展运算符(<code>...</code>)实现从左到右的函数合成。第一个(最左边的)函数可以接受一个或多个参数，其他的函数必须是一个参数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pipeFunctions = <span class="function">(<span class="params">...fns</span>) =&gt;</span> fns.reduce(<span class="function">(<span class="params">f, g</span>) =&gt;</span> (...args) =&gt; g(f(...args)));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> add5 = <span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> multiply = <span class="function">(<span class="params">x, y</span>) =&gt;</span> x * y;</span><br><span class="line"><span class="keyword">const</span> multiplyAndAdd5 = pipeFunctions(multiply, add5);</span><br><span class="line">multiplyAndAdd5(<span class="number">5</span>, <span class="number">2</span>); <span class="comment">// 15</span></span><br></pre></td></tr></table></figure><h2 id="promisify"><a href="#promisify" class="headerlink" title="promisify"></a>promisify</h2><p>转换异步函数并返回promise。</p><p>返回一个调用原始函数后的返回promise的函数。使用<code>...rest</code>运算符传递所有参数。</p><p>在Node 8+，你可以使用<code>util.promify</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promisify = <span class="function"><span class="params">func</span> =&gt;</span> (...args) =&gt;</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span></span><br><span class="line">    func(...args, (err, result) =&gt; (err ? reject(err) : resolve(result)))</span><br><span class="line">  );</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> delay = promisify(<span class="function">(<span class="params">d, cb</span>) =&gt;</span> setTimeout(cb, d));</span><br><span class="line">delay(<span class="number">2000</span>).then(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'Hi!'</span>)); <span class="comment">// // Promise resolves after 2s</span></span><br></pre></td></tr></table></figure><h2 id="rearg"><a href="#rearg" class="headerlink" title="rearg"></a>rearg</h2><p>创建一个调用所提供函数的函数，其参数按照指定的索引排列。</p><p>使用<code>Array.prototype.map( )</code>基于<code>indexes</code>对参数重新排序，并结合扩展运算符(…)将转换后的参数传递给<code>fn</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rearg = <span class="function">(<span class="params">fn, indexes</span>) =&gt;</span> (...args) =&gt; fn(...indexes.map(<span class="function"><span class="params">i</span> =&gt;</span> args[i]));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">var</span> rearged = rearg(</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> [a, b, c];</span><br><span class="line">  &#125;,</span><br><span class="line">  [<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>]</span><br><span class="line">);</span><br><span class="line">rearged(<span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'a'</span>); <span class="comment">// ['a', 'b', 'c']</span></span><br></pre></td></tr></table></figure><h2 id="spreadOver"><a href="#spreadOver" class="headerlink" title="spreadOver"></a>spreadOver</h2><p>接受一个函数并返回一个闭包，该闭包接受一组参数并映射到函数的变量。</p><p>使用闭包和扩展运算符(<code>...</code>)将数组映射为函数的变量。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> spreadOver = <span class="function"><span class="params">fn</span> =&gt;</span> argsArr =&gt; fn(...argsArr);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> arrayMax = spreadOver(<span class="built_in">Math</span>.max);</span><br><span class="line">arrayMax([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><h2 id="unary"><a href="#unary" class="headerlink" title="unary"></a>unary</h2><p>创建一个只接受一个参数的函数，忽略任何其他参数。</p><p>调用提供的函数<code>fn</code>，只传入一个参数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> unary = <span class="function"><span class="params">fn</span> =&gt;</span> val =&gt; fn(val);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">[<span class="string">'6'</span>, <span class="string">'8'</span>, <span class="string">'10'</span>].map(unary(<span class="built_in">parseInt</span>)); <span class="comment">// [6, 8, 10]</span></span><br></pre></td></tr></table></figure><h1 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h1><h2 id="all"><a href="#all" class="headerlink" title="all"></a>all</h2><p>如果数组中的所有元素执行给定的函数都返回<code>true</code>，则返回<code>true</code>，否则返回<code>false</code>。</p><p>使用<code>Array.prototype.very()</code>遍历数组中的所有元素是否执行<code>fn</code>返回<code>true</code>。如果省略第二个参数<code>fn</code>，将使用<code>Boolean</code>函数作为默认值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> all = <span class="function">(<span class="params">arr, fn = <span class="built_in">Boolean</span></span>) =&gt;</span> arr.every(fn);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">all([<span class="number">4</span>, <span class="number">2</span>, <span class="number">3</span>], x =&gt; x &gt; <span class="number">1</span>); <span class="comment">// true</span></span><br><span class="line">all([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="allEqual"><a href="#allEqual" class="headerlink" title="allEqual"></a>allEqual</h2><p>检查数组中的所有元素是否相等。</p><p>使用<code>Array.prototype.very()</code>检查数组中的所有元素是否与第一个元素相同。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> allEqual = <span class="function"><span class="params">arr</span> =&gt;</span> arr.every(<span class="function"><span class="params">val</span> =&gt;</span> val === arr[<span class="number">0</span>]);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">allEqual([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]); <span class="comment">// false</span></span><br><span class="line">allEqual([<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>]); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="any"><a href="#any" class="headerlink" title="any"></a>any</h2><p>如果数组中至少有一个元素执行给定的函数都返回<code>true</code>，则返回<code>true</code>，否则返回<code>false</code>。</p><p>使用<code>Array.prototype.some()</code>遍历集合中是否有元素调用<code>fn</code>返回<code>true</code>。省略第二个参数<code>fn</code>，将使用<code>Boolean</code>函数作为默认值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> any = <span class="function">(<span class="params">arr, fn = <span class="built_in">Boolean</span></span>) =&gt;</span> arr.some(fn);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">any([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>], x =&gt; x &gt;= <span class="number">2</span>); <span class="comment">// true</span></span><br><span class="line">any([<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>]); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="arrayToCSV"><a href="#arrayToCSV" class="headerlink" title="arrayToCSV"></a>arrayToCSV</h2><p>将二维数组转换为逗号分隔值(CSV)字符串。</p><p>使用<code>Array.prototype.map()</code>和<code>Array.prototype.join(delimiter)</code>将单个一维数组(行)组合成字符串。使用<code>Array.prototype.join(&quot;\n&quot;)</code>将所有行组合成一个CSV字符串，用换行符分隔每行。省略第二个参数<code>delimiter</code>，将使用<code>,</code>作为默认分隔符。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arrayToCSV = <span class="function">(<span class="params">arr, delimiter = <span class="string">','</span></span>) =&gt;</span></span><br><span class="line">  arr.map(<span class="function"><span class="params">v</span> =&gt;</span> v.map(<span class="function"><span class="params">x</span> =&gt;</span> <span class="string">`"<span class="subst">$&#123;x&#125;</span>"`</span>).join(delimiter)).join(<span class="string">'\n'</span>);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">arrayToCSV([[<span class="string">'a'</span>, <span class="string">'b'</span>], [<span class="string">'c'</span>, <span class="string">'d'</span>]]); <span class="comment">// '"a","b"\n"c","d"'</span></span><br><span class="line">arrayToCSV([[<span class="string">'a'</span>, <span class="string">'b'</span>], [<span class="string">'c'</span>, <span class="string">'d'</span>]], <span class="string">';'</span>); <span class="comment">// '"a";"b"\n"c";"d"'</span></span><br></pre></td></tr></table></figure><h2 id="bifurcate"><a href="#bifurcate" class="headerlink" title="bifurcate"></a>bifurcate</h2><p>将值分成两组。如果<code>filter</code>函数中的元素是真的，则数组中的相应元素属于第一组；否则，它属于第二组。</p><p>使用<code>Array.prototype.reduce()</code>和<code>Array.prototype.push()</code>根据<code>filter</code>函数将元素添加到组中。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bifurcate = <span class="function">(<span class="params">arr, filter</span>) =&gt;</span></span><br><span class="line">  arr.reduce(<span class="function">(<span class="params">acc, val, i</span>) =&gt;</span> (acc[filter[i] ? <span class="number">0</span> : <span class="number">1</span>].push(val), acc), [[], []]); <span class="comment">// js括号语法，返回后面的值，写法很6啊</span></span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">bifurcate([<span class="string">'beep'</span>, <span class="string">'boop'</span>, <span class="string">'foo'</span>, <span class="string">'bar'</span>], [<span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">true</span>]); <span class="comment">// [ ['beep', 'boop', 'bar'], ['foo'] ]</span></span><br></pre></td></tr></table></figure><h2 id="bifurcateBy"><a href="#bifurcateBy" class="headerlink" title="bifurcateBy"></a>bifurcateBy</h2><p>根据给定的函数将值分成两组，该函数可以指定输入数组中的元素属于哪个组。如果函数返回真，则集合元素属于第一组；否则，它属于第二组。</p><p>每个元素调用<code>fn</code>得到返回值，使用<code>Array.prototype.reduce()</code>和<code>Array.prototype.push()</code>将元素添加到组中。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bifurcateBy = <span class="function">(<span class="params">arr, fn</span>) =&gt;</span></span><br><span class="line">  arr.reduce(<span class="function">(<span class="params">acc, val, i</span>) =&gt;</span> (acc[fn(val, i) ? <span class="number">0</span> : <span class="number">1</span>].push(val), acc), [[], []]);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">bifurcateBy([<span class="string">'beep'</span>, <span class="string">'boop'</span>, <span class="string">'foo'</span>, <span class="string">'bar'</span>], x =&gt; x[<span class="number">0</span>] === <span class="string">'b'</span>); <span class="comment">// [ ['beep', 'boop', 'bar'], ['foo'] ]</span></span><br></pre></td></tr></table></figure><h2 id="chunk"><a href="#chunk" class="headerlink" title="chunk"></a>chunk</h2><p>将数组分成指定长度的多维数组。</p><p>使用<code>Array.from()</code>创建一个新的数组，该数组的长度等于要生成的块的长度。使用<code>Array.prototype.slice()</code>将新数组的元素映射到一个长度为给定长度的块。如果原数组不能被平均分割，则最后一块将包含剩余的元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> chunk = <span class="function">(<span class="params">arr, size</span>) =&gt;</span></span><br><span class="line">  <span class="built_in">Array</span>.from(&#123; <span class="attr">length</span>: <span class="built_in">Math</span>.ceil(arr.length / size) &#125;, (v, i) =&gt;</span><br><span class="line">    arr.slice(i * size, i * size + size)</span><br><span class="line">  );</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">chunk([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], <span class="number">2</span>); <span class="comment">// [[1,2],[3,4],[5]]</span></span><br></pre></td></tr></table></figure><h2 id="compact"><a href="#compact" class="headerlink" title="compact"></a>compact</h2><p>从数组中删除无效值。</p><p>使用<code>Array.prototype.filter()</code>过滤掉无效值(<code>false</code>, <code>null</code>, <code>0</code>, <code>&quot;&quot;</code>, <code>undefined</code>, <code>NaN</code>)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> compact = <span class="function"><span class="params">arr</span> =&gt;</span> arr.filter(<span class="built_in">Boolean</span>);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">compact([<span class="number">0</span>, <span class="number">1</span>, <span class="literal">false</span>, <span class="number">2</span>, <span class="string">''</span>, <span class="number">3</span>, <span class="string">'a'</span>, <span class="string">'e'</span> * <span class="number">23</span>, <span class="literal">NaN</span>, <span class="string">'s'</span>, <span class="number">34</span>]); <span class="comment">// [ 1, 2, 3, 'a', 's', 34 ]</span></span><br></pre></td></tr></table></figure><h2 id="countBy"><a href="#countBy" class="headerlink" title="countBy"></a>countBy</h2><p>根据给定函数对数组中的元素进行分组，并返回每个组中元素总数。</p><p>使用<code>Array.prototype.map()</code>返回数组元素调用函数或属性后的值。使用<code>Array.prototype.reduce()</code>创建一个对象，其中键是根据前面的值生成的。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> countBy = <span class="function">(<span class="params">arr, fn</span>) =&gt;</span></span><br><span class="line">  arr.map(<span class="keyword">typeof</span> fn === <span class="string">'function'</span> ? fn : <span class="function"><span class="params">val</span> =&gt;</span> val[fn]).reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> &#123;</span><br><span class="line">    acc[val] = (acc[val] || <span class="number">0</span>) + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> acc;</span><br><span class="line">  &#125;, &#123;&#125;);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">countBy([<span class="number">6.1</span>, <span class="number">4.2</span>, <span class="number">6.3</span>], <span class="built_in">Math</span>.floor); <span class="comment">// &#123;4: 1, 6: 2&#125;</span></span><br><span class="line">countBy([<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>], <span class="string">'length'</span>); <span class="comment">// &#123;3: 2, 5: 1&#125;</span></span><br></pre></td></tr></table></figure><h2 id="countOccurrences"><a href="#countOccurrences" class="headerlink" title="countOccurrences"></a>countOccurrences</h2><p>计算数组中某个值的出现次数。</p><p>使用<code>Array.prototype.reduce()</code>，每当遇到数组中的特定值时，递增计数器。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> countOccurrences = <span class="function">(<span class="params">arr, val</span>) =&gt;</span> arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> (v === val ? a + <span class="number">1</span> : a), <span class="number">0</span>);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">countOccurrences([<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">1</span>); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><h2 id="deepFlatten"><a href="#deepFlatten" class="headerlink" title="deepFlatten"></a>deepFlatten</h2><p>将数组展平。</p><p>借助递归。使用<code>Array.prototype.concat</code>结合空数组(<code>[]</code>)和扩展运算符(<code>...</code>)来展平数组。递归展平作用于数组的每个元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> deepFlatten = <span class="function"><span class="params">arr</span> =&gt;</span> [].concat(...arr.map(<span class="function"><span class="params">v</span> =&gt;</span> (<span class="built_in">Array</span>.isArray(v) ? deepFlatten(v) : v)));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">deepFlatten([<span class="number">1</span>, [<span class="number">2</span>], [[<span class="number">3</span>], <span class="number">4</span>], <span class="number">5</span>]); <span class="comment">// [1,2,3,4,5]</span></span><br></pre></td></tr></table></figure><h2 id="difference"><a href="#difference" class="headerlink" title="difference"></a>difference</h2><p>返回两个数组之间的差异。</p><p>从<code>b</code>创建一个<code>Set</code>，然后在<code>a</code>上使用<code>Array.prototype.filter()</code>来只保留<code>b</code>中不包含的值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> difference = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>(b);</span><br><span class="line">  <span class="keyword">return</span> a.filter(<span class="function"><span class="params">x</span> =&gt;</span> !s.has(x));</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">difference([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>]); <span class="comment">// [3]</span></span><br></pre></td></tr></table></figure><h2 id="differenceBy"><a href="#differenceBy" class="headerlink" title="differenceBy"></a>differenceBy</h2><p>将给定的函数应用于两个数组的每个数组元素后，返回两个数组之间的差异。</p><p>通过对<code>b</code>中的每个元素调用<code>fn</code>来创建一个<code>Set</code>，然后将<code>Array.protototype.filter()</code>和<code>a</code>中元素调用<code>fn</code>的结果结合使用，只保留先前创建的集合中不包含的值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> differenceBy = <span class="function">(<span class="params">a, b, fn</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>(b.map(fn));</span><br><span class="line">  <span class="keyword">return</span> a.filter(<span class="function"><span class="params">x</span> =&gt;</span> !s.has(fn(x)));</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">differenceBy([<span class="number">2.1</span>, <span class="number">1.2</span>], [<span class="number">2.3</span>, <span class="number">3.4</span>], <span class="built_in">Math</span>.floor); <span class="comment">// [1.2]</span></span><br><span class="line">differenceBy([&#123; <span class="attr">x</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">1</span> &#125;], [&#123; <span class="attr">x</span>: <span class="number">1</span> &#125;], v =&gt; v.x); <span class="comment">// [ &#123; x: 2 &#125; ]</span></span><br></pre></td></tr></table></figure><h2 id="differenceWith"><a href="#differenceWith" class="headerlink" title="differenceWith"></a>differenceWith</h2><p>过滤掉数组中比较函数不返回<code>true</code>的所有值。</p><p>使用<code>Array.prototype.filter()</code>和<code>Array.prototype.findindex()</code>查找适当的值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> differenceWith = <span class="function">(<span class="params">arr, val, comp</span>) =&gt;</span> arr.filter(<span class="function"><span class="params">a</span> =&gt;</span> val.findIndex(<span class="function"><span class="params">b</span> =&gt;</span> comp(a, b)) === <span class="number">-1</span>);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">differenceWith([<span class="number">1</span>, <span class="number">1.2</span>, <span class="number">1.5</span>, <span class="number">3</span>, <span class="number">0</span>], [<span class="number">1.9</span>, <span class="number">3</span>, <span class="number">0</span>], (a, b) =&gt; <span class="built_in">Math</span>.round(a) === <span class="built_in">Math</span>.round(b)); <span class="comment">// [1, 1.2]</span></span><br></pre></td></tr></table></figure><h2 id="drop"><a href="#drop" class="headerlink" title="drop"></a>drop</h2><p>返回一个从左边移除n个元素后的新数组。</p><p>使用<code>Array.prototype.slice()</code>从左侧移除指定数量的元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> drop = <span class="function">(<span class="params">arr, n = <span class="number">1</span></span>) =&gt;</span> arr.slice(n);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">drop([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// [2,3]</span></span><br><span class="line">drop([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">2</span>); <span class="comment">// [3]</span></span><br><span class="line">drop([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">42</span>); <span class="comment">// []</span></span><br></pre></td></tr></table></figure><h2 id="dropRight"><a href="#dropRight" class="headerlink" title="dropRight"></a>dropRight</h2><p>返回一个从右边移除n个元素后的新数组。</p><p>使用<code>Array.prototype.slice()</code>从右侧移除指定数量的元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> drop = <span class="function">(<span class="params">arr, n = <span class="number">1</span></span>) =&gt;</span> arr.slice(<span class="number">0</span>, -n);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">dropRight([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// [1,2]</span></span><br><span class="line">dropRight([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">2</span>); <span class="comment">// [1]</span></span><br><span class="line">dropRight([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">42</span>); <span class="comment">// []</span></span><br></pre></td></tr></table></figure><h2 id="dropRightWhile"><a href="#dropRightWhile" class="headerlink" title="dropRightWhile"></a>dropRightWhile</h2><p>从数组末尾移除元素，直到传递的函数返回true。返回数组中的剩余元素。</p><p>使用<code>Array.protototype.slice()</code>循环数组，直到函数返回值为<code>true</code>。返回剩余元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dropRightWhile = <span class="function">(<span class="params">arr, func</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">while</span> (arr.length &gt; <span class="number">0</span> &amp;&amp; !func(arr[arr.length - <span class="number">1</span>])) arr = arr.slice(<span class="number">0</span>, <span class="number">-1</span>);</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">dropRightWhile([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], n =&gt; n &lt; <span class="number">3</span>); <span class="comment">// [1, 2]</span></span><br></pre></td></tr></table></figure><h2 id="dropWhile"><a href="#dropWhile" class="headerlink" title="dropWhile"></a>dropWhile</h2><p>从数组开头移除元素，直到传递的函数返回true。返回数组中的剩余元素。</p><p>循环数组，使用<code>Array.prototype.slice()</code>删除数组的第一个元素，直到函数返回值为<code>true</code>。返回剩余元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dropWhile = <span class="function">(<span class="params">arr, func</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">while</span> (arr.length &gt; <span class="number">0</span> &amp;&amp; !func(arr[<span class="number">0</span>])) arr = arr.slice(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">dropWhile([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], n =&gt; n &gt;= <span class="number">3</span>); <span class="comment">// [3,4]</span></span><br></pre></td></tr></table></figure><h2 id="everyNth"><a href="#everyNth" class="headerlink" title="everyNth"></a>everyNth</h2><p>返回数组中顺序为nth倍数的元素。</p><p>使用<code>Array.prototype.filter()</code>创建一个新数组，该数组包含给定数组中顺序为nth倍数的元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> everyNth = <span class="function">(<span class="params">arr, nth</span>) =&gt;</span> arr.filter(<span class="function">(<span class="params">e, i</span>) =&gt;</span> i % nth === nth - <span class="number">1</span>);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">everyNth([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], <span class="number">2</span>); <span class="comment">// [ 2, 4, 6 ]</span></span><br></pre></td></tr></table></figure><h2 id="filterNonUnique"><a href="#filterNonUnique" class="headerlink" title="filterNonUnique"></a>filterNonUnique</h2><p>过滤掉数组中的非唯一值。</p><p>使用<code>Array.prototype.filter()</code>创建包含唯一值的数组。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> filterNonUnique = <span class="function"><span class="params">arr</span> =&gt;</span> arr.filter(<span class="function"><span class="params">i</span> =&gt;</span> arr.indexOf(i) === arr.lastIndexOf(i));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">filterNonUnique([<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>]); <span class="comment">// [1, 3, 5]</span></span><br></pre></td></tr></table></figure><h2 id="filterNonUniqueBy"><a href="#filterNonUniqueBy" class="headerlink" title="filterNonUniqueBy"></a>filterNonUniqueBy</h2><p>基于提供的比较器函数过滤掉数组中的非唯一值。</p><p>基于比较器函数<code>fn</code>，对只包含唯一值的数组使用<code>Array.prototype.filter()</code>和<code>Array. prototype.every()</code>。比较器函数接受四个参数：两个被比较元素的值及其索引。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> filterNonUniqueBy = <span class="function">(<span class="params">arr, fn</span>) =&gt;</span></span><br><span class="line">  arr.filter(<span class="function">(<span class="params">v, i</span>) =&gt;</span> arr.every(<span class="function">(<span class="params">x, j</span>) =&gt;</span> (i === j) === fn(v, x, i, j)));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">filterNonUniqueBy(</span><br><span class="line">  [</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">0</span>, <span class="attr">value</span>: <span class="string">'a'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">value</span>: <span class="string">'b'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">value</span>: <span class="string">'c'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">value</span>: <span class="string">'d'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">0</span>, <span class="attr">value</span>: <span class="string">'e'</span> &#125;</span><br><span class="line">  ],</span><br><span class="line">  (a, b) =&gt; a.id == b.id</span><br><span class="line">); <span class="comment">// [ &#123; id: 2, value: 'c' &#125; ]</span></span><br></pre></td></tr></table></figure><h2 id="findLast"><a href="#findLast" class="headerlink" title="findLast"></a>findLast</h2><p>返回调用所给函数返回真值的最后一个元素。</p><p>使用<code>Array.prototype.filter()</code>过滤<code>fn</code>返回假值的元素，使用<code>Array.prototype.pop()</code>获取最后一个元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> findLast = <span class="function">(<span class="params">arr, fn</span>) =&gt;</span> arr.filter(fn).pop();</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">findLast([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], n =&gt; n % <span class="number">2</span> === <span class="number">1</span>); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><h2 id="findLastIndex"><a href="#findLastIndex" class="headerlink" title="findLastIndex"></a>findLastIndex</h2><p>返回调用所给函数返回真值的最后一个元素的索引。</p><p>使用<code>Array.prototype.map()</code>将每个元素与其索引和值映射到一个数组。使用<code>Array.prototype.filter()</code>过滤<code>fn</code>返回假值的元素，使用<code>Array.prototype.pop()</code>获取最后一个元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> findLastIndex = <span class="function">(<span class="params">arr, fn</span>) =&gt;</span></span><br><span class="line">  arr</span><br><span class="line">    .map(<span class="function">(<span class="params">val, i</span>) =&gt;</span> [i, val])</span><br><span class="line">    .filter(<span class="function">(<span class="params">[i, val]</span>) =&gt;</span> fn(val, i, arr))</span><br><span class="line">    .pop()[<span class="number">0</span>];</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">findLastIndex([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], n =&gt; n % <span class="number">2</span> === <span class="number">1</span>); <span class="comment">// 2 (index of the value 3)</span></span><br></pre></td></tr></table></figure><h2 id="flatten"><a href="#flatten" class="headerlink" title="flatten"></a>flatten</h2><p>将数组展平到指定的深度。</p><p>使用递归，对于每一深度级别，深度递减1。使用<code>Array.prototype.reduce()</code>和<code>Array.prototype.concat()</code>合并元素或数组。一般情况下，如果深度等于1则停止递归。省略第二个参数，<code>depth</code>仅展平到深度1 (单个展平)。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 理解起来有点困难</span></span><br><span class="line"><span class="keyword">const</span> flatten = <span class="function">(<span class="params">arr, depth = <span class="number">1</span></span>) =&gt;</span></span><br><span class="line">  arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> a.concat(depth &gt; <span class="number">1</span> &amp;&amp; <span class="built_in">Array</span>.isArray(v) ? flatten(v, depth - <span class="number">1</span>) : v), []);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">flatten([<span class="number">1</span>, [<span class="number">2</span>], <span class="number">3</span>, <span class="number">4</span>]); <span class="comment">// [1, 2, 3, 4]</span></span><br><span class="line">flatten([<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>, [<span class="number">4</span>, <span class="number">5</span>], <span class="number">6</span>], <span class="number">7</span>], <span class="number">8</span>], <span class="number">2</span>); <span class="comment">// [1, 2, 3, [4, 5], 6, 7, 8]</span></span><br></pre></td></tr></table></figure><h2 id="forEachRight"><a href="#forEachRight" class="headerlink" title="forEachRight"></a>forEachRight</h2><p>从数组的最后一个元素开始，为每个数组元素执行给定的函数。</p><p>使用<code>Array.protototype.slice(0)</code>克隆给定的数组，使用<code>Array.protototype.reverse()</code>反转数组，使用<code>Array.protototype.foreach()</code>循环反向数组。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> forEachRight = <span class="function">(<span class="params">arr, callback</span>) =&gt;</span></span><br><span class="line">  arr</span><br><span class="line">    .slice(<span class="number">0</span>)</span><br><span class="line">    .reverse()</span><br><span class="line">    .forEach(callback);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">forEachRight([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], val =&gt; <span class="built_in">console</span>.log(val)); <span class="comment">// '4', '3', '2', '1'</span></span><br></pre></td></tr></table></figure><h2 id="groupBy"><a href="#groupBy" class="headerlink" title="groupBy"></a>groupBy</h2><p>根据给定函数对数组元素进行分组。</p><p>使用<code>Array.prototype.map()</code>对数组元素调用到函数或属性。使用<code>Array.protototype .reduce()</code>创建一个对象，其中的键是根据前面结果生成的。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> groupBy = <span class="function">(<span class="params">arr, fn</span>) =&gt;</span></span><br><span class="line">  arr.map(<span class="keyword">typeof</span> fn === <span class="string">'function'</span> ? fn : <span class="function"><span class="params">val</span> =&gt;</span> val[fn]).reduce(<span class="function">(<span class="params">acc, val, i</span>) =&gt;</span> &#123;</span><br><span class="line">    acc[val] = (acc[val] || []).concat(arr[i]);</span><br><span class="line">    <span class="keyword">return</span> acc;</span><br><span class="line">  &#125;, &#123;&#125;);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">groupBy([<span class="number">6.1</span>, <span class="number">4.2</span>, <span class="number">6.3</span>], <span class="built_in">Math</span>.floor); <span class="comment">// &#123;4: [4.2], 6: [6.1, 6.3]&#125;</span></span><br><span class="line">groupBy([<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>], <span class="string">'length'</span>); <span class="comment">// &#123;3: ['one', 'two'], 5: ['three']&#125;</span></span><br></pre></td></tr></table></figure><h2 id="head"><a href="#head" class="headerlink" title="head"></a>head</h2><p>返回数组的第一个元素。</p><p>使用<code>arr[0]</code>返回数组的第一个元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> head = <span class="function"><span class="params">arr</span> =&gt;</span> arr[<span class="number">0</span>];</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">head([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><h2 id="indexOfAll"><a href="#indexOfAll" class="headerlink" title="indexOfAll"></a>indexOfAll</h2><p>返回数组中<code>val</code>出现的所有索引。如果<code>val</code>从未出现，返回<code>[]</code>。</p><p>使用<code>Array.prototype.reduce()</code>循环元素并存储匹配元素的索引。返回索引数组。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> indexOfAll = <span class="function">(<span class="params">arr, val</span>) =&gt;</span> arr.reduce(<span class="function">(<span class="params">acc, el, i</span>) =&gt;</span> (el === val ? [...acc, i] : acc), []);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">indexOfAll([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">1</span>); <span class="comment">// [0,3]</span></span><br><span class="line">indexOfAll([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>); <span class="comment">// []</span></span><br></pre></td></tr></table></figure><h2 id="initial"><a href="#initial" class="headerlink" title="initial"></a>initial</h2><p>返回数组除了最后一个以外的所有元素。</p><p>使用<code>arr.slice(0, -1)</code>来返回除最后一个元素以外的所有元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initial = <span class="function"><span class="params">arr</span> =&gt;</span> arr.slice(<span class="number">0</span>, <span class="number">-1</span>);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">initial([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// [1,2]</span></span><br></pre></td></tr></table></figure><h2 id="initialize2DArray"><a href="#initialize2DArray" class="headerlink" title="initialize2DArray"></a>initialize2DArray</h2><p>生成指定行列和值的二维数组。</p><p>使用<code>Array.prototype.map()</code>生成h行长度为w并填入值的数组。如果没有给定值，则默认为<code>null</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initialize2DArray = <span class="function">(<span class="params">w, h, val = <span class="literal">null</span></span>) =&gt;</span></span><br><span class="line">  <span class="built_in">Array</span>.from(&#123; <span class="attr">length</span>: h &#125;).map(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">Array</span>.from(&#123; <span class="attr">length</span>: w &#125;).fill(val));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">initialize2DArray(<span class="number">2</span>, <span class="number">2</span>, <span class="number">0</span>); <span class="comment">// [[0,0], [0,0]]</span></span><br></pre></td></tr></table></figure><h2 id="initializeArrayWithRange"><a href="#initializeArrayWithRange" class="headerlink" title="initializeArrayWithRange"></a>initializeArrayWithRange</h2><p>初始化一个数组，该数组包含指定范围内的数字，并且按照指定步长递增。</p><p>使用<code>Array.from()</code>创建所需长度的数组(结束-开始+1)/步长，并在给定范围内用所需值填充数组。可以省略开始值默认是0。也可以省略步长来使用默认值1。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initializeArrayWithRange = <span class="function">(<span class="params">end, start = <span class="number">0</span>, step = <span class="number">1</span></span>) =&gt;</span></span><br><span class="line">  <span class="built_in">Array</span>.from(&#123; <span class="attr">length</span>: <span class="built_in">Math</span>.ceil(<span class="function">(<span class="params">end - start + <span class="number">1</span></span>) / <span class="params">step</span>) &#125;, (<span class="params">v, i</span>) =&gt;</span> i * step + start);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">initializeArrayWithRange(<span class="number">5</span>); <span class="comment">// [0,1,2,3,4,5]</span></span><br><span class="line">initializeArrayWithRange(<span class="number">7</span>, <span class="number">3</span>); <span class="comment">// [3,4,5,6,7]</span></span><br><span class="line">initializeArrayWithRange(<span class="number">9</span>, <span class="number">0</span>, <span class="number">2</span>); <span class="comment">// [0,2,4,6,8]</span></span><br></pre></td></tr></table></figure><h2 id="initializeArrayWithRangeRight"><a href="#initializeArrayWithRangeRight" class="headerlink" title="initializeArrayWithRangeRight"></a>initializeArrayWithRangeRight</h2><p>初始化一个数组，该数组包含指定范围内的数字（反向），并且按照指定步长递减。</p><p>使用<code>Array.from(Math.ceil((end+1-start)/step))</code>创建所需长度的数组(长度等于(结束-开始)/步长或(结束+1-开始)/步长 (包含结束))，并在给定范围内用所需值填充数组。可以省略开始值默认是0。也可以省略步长来使用默认值1。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initializeArrayWithRangeRight = <span class="function">(<span class="params">end, start = <span class="number">0</span>, step = <span class="number">1</span></span>) =&gt;</span></span><br><span class="line">  <span class="built_in">Array</span>.from(&#123; <span class="attr">length</span>: <span class="built_in">Math</span>.ceil((end + <span class="number">1</span> - start) / step) &#125;).map(</span><br><span class="line">    (v, i, arr) =&gt; (arr.length - i - <span class="number">1</span>) * step + start</span><br><span class="line">  );</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">initializeArrayWithRangeRight(<span class="number">5</span>); <span class="comment">// [5,4,3,2,1,0]</span></span><br><span class="line">initializeArrayWithRangeRight(<span class="number">7</span>, <span class="number">3</span>); <span class="comment">// [7,6,5,4,3]</span></span><br><span class="line">initializeArrayWithRangeRight(<span class="number">9</span>, <span class="number">0</span>, <span class="number">2</span>); <span class="comment">// [8,6,4,2,0]</span></span><br></pre></td></tr></table></figure><h2 id="initializeArrayWithValues"><a href="#initializeArrayWithValues" class="headerlink" title="initializeArrayWithValues"></a>initializeArrayWithValues</h2><p>用指定的值初始化并填充数组。</p><p>使用<code>Array(n)</code>创建所需长度的数组，用<code>fill(v)</code>根据所需值填充数组(v)。你可以省略<code>val</code>来使用默认值0。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initializeArrayWithValues = <span class="function">(<span class="params">n, val = <span class="number">0</span></span>) =&gt;</span> <span class="built_in">Array</span>(n).fill(val);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">initializeArrayWithValues(<span class="number">5</span>, <span class="number">2</span>); <span class="comment">// [2, 2, 2, 2, 2]</span></span><br></pre></td></tr></table></figure><h2 id="initializeNDArray"><a href="#initializeNDArray" class="headerlink" title="initializeNDArray"></a>initializeNDArray</h2><p>创建具有给定值的n维数组。</p><p>使用递归。用<code>Array.prototype.map()</code>生成行数组，其中每一行都是使用<code>initializendaray</code>初始化的新数组。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initializeNDArray = <span class="function">(<span class="params">val, ...args</span>) =&gt;</span></span><br><span class="line">  args.length === <span class="number">0</span></span><br><span class="line">    ? val</span><br><span class="line">    : <span class="built_in">Array</span>.from(&#123; <span class="attr">length</span>: args[<span class="number">0</span>] &#125;).map(<span class="function"><span class="params">()</span> =&gt;</span> initializeNDArray(val, ...args.slice(<span class="number">1</span>)));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">initializeNDArray(<span class="number">1</span>, <span class="number">3</span>); <span class="comment">// [1,1,1]</span></span><br><span class="line">initializeNDArray(<span class="number">5</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>); <span class="comment">// [[[5,5],[5,5]],[[5,5],[5,5]]]</span></span><br></pre></td></tr></table></figure><h2 id="intersection"><a href="#intersection" class="headerlink" title="intersection"></a>intersection</h2><p>返回两个数组中都存在的元素数组。</p><p>从<code>b</code>创建一个集合，然后在<code>a</code>上使用<code>Array.prototype.filter()</code>来只保留<code>b</code>中包含的值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> intersection = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>(b);</span><br><span class="line">  <span class="keyword">return</span> a.filter(<span class="function"><span class="params">x</span> =&gt;</span> s.has(x));</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">intersection([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>]); <span class="comment">// [2, 3]</span></span><br></pre></td></tr></table></figure><h2 id="intersectionBy"><a href="#intersectionBy" class="headerlink" title="intersectionBy"></a>intersectionBy</h2><p>将给定的函数应用于两个数组中的每个数组元素后，返回两个数组中都存在的元素列表。</p><p><code>b</code>中的所有元素执行<code>fn</code>后创建一个集合，然后在<code>a</code>上使用<code>Array.prototype.filter()</code>来保留将执行<code>fn</code>后结果在b中的元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> intersectionBy = <span class="function">(<span class="params">a, b, fn</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>(b.map(fn));</span><br><span class="line">  <span class="keyword">return</span> a.filter(<span class="function"><span class="params">x</span> =&gt;</span> s.has(fn(x)));</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">intersectionBy([<span class="number">2.1</span>, <span class="number">1.2</span>], [<span class="number">2.3</span>, <span class="number">3.4</span>], <span class="built_in">Math</span>.floor); <span class="comment">// [2.1]</span></span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-tags"><a href="/tags/JavaScript/" rel="tag"># JavaScript</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2018/09/front-end-performance-checklist/" rel="next" title="前端性能优化检查清单"><i class="fa fa-chevron-left"></i> 前端性能优化检查清单</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"></div></div></footer></div></article></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="abcdGJJ"><p class="site-author-name" itemprop="name">abcdGJJ</p><p class="site-description motion-element" itemprop="description">这里是高嘉君的个人博客</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">64</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">3</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">52</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="//pengtikui.cn" title="PP_K’s Blog" target="_blank">PP_K’s Blog</a></li><li class="links-of-blogroll-item"><a href="//hufangyun.com" title="胡方运的博客" target="_blank">胡方运的博客</a></li><li class="links-of-blogroll-item"><a href="//youthliuxi.cn" title="刘熹的博客" target="_blank">刘熹的博客</a></li><li class="links-of-blogroll-item"><a href="//lolcode.cn" title="万事静心" target="_blank">万事静心</a></li><li class="links-of-blogroll-item"><a href="//yixin.hufangyun.com" title="雁南之北" target="_blank">雁南之北</a></li><li class="links-of-blogroll-item"><a href="//vincentli.cn" title="vi my.cnf" target="_blank">vi my.cnf</a></li><li class="links-of-blogroll-item"><a href="//youthol.top" title="绿岛之美" target="_blank">绿岛之美</a></li><li class="links-of-blogroll-item"><a href="//mahui.youthliuxi.cn" title="小马姑娘" target="_blank">小马姑娘</a></li><li class="links-of-blogroll-item"><a href="//www.unique-liu.com" title="技术源码分享" target="_blank">技术源码分享</a></li><li class="links-of-blogroll-item"><a href="//blog.summerpro.cn" title="summerpro" target="_blank">summerpro</a></li><li class="links-of-blogroll-item"><a href="//www.dligo.cc" title="帝果" target="_blank">帝果</a></li><li class="links-of-blogroll-item"><a href="//blog.hs5233.com" title="猎豹园地" target="_blank">猎豹园地</a></li><li class="links-of-blogroll-item"><a href="//blog.hizmz.com" title="助梦者的博客" target="_blank">助梦者的博客</a></li><li class="links-of-blogroll-item"><a href="//www.fmwhahaha.com" title="FMW哈哈哈" target="_blank">FMW哈哈哈</a></li><li class="links-of-blogroll-item"><a href="//passer-by.com" title="路人甲" target="_blank">路人甲</a></li></ul></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Adapter"><span class="nav-number">1.</span> <span class="nav-text">Adapter</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ary"><span class="nav-number">1.1.</span> <span class="nav-text">ary</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#call"><span class="nav-number">1.2.</span> <span class="nav-text">call</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#collectInto"><span class="nav-number">1.3.</span> <span class="nav-text">collectInto</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#flip"><span class="nav-number">1.4.</span> <span class="nav-text">flip</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#over"><span class="nav-number">1.5.</span> <span class="nav-text">over</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#overArgs"><span class="nav-number">1.6.</span> <span class="nav-text">overArgs</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pipeAsyncFunctions"><span class="nav-number">1.7.</span> <span class="nav-text">pipeAsyncFunctions</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pipeFunctions"><span class="nav-number">1.8.</span> <span class="nav-text">pipeFunctions</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#promisify"><span class="nav-number">1.9.</span> <span class="nav-text">promisify</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#rearg"><span class="nav-number">1.10.</span> <span class="nav-text">rearg</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#spreadOver"><span class="nav-number">1.11.</span> <span class="nav-text">spreadOver</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#unary"><span class="nav-number">1.12.</span> <span class="nav-text">unary</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Array"><span class="nav-number">2.</span> <span class="nav-text">Array</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#all"><span class="nav-number">2.1.</span> <span class="nav-text">all</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#allEqual"><span class="nav-number">2.2.</span> <span class="nav-text">allEqual</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#any"><span class="nav-number">2.3.</span> <span class="nav-text">any</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#arrayToCSV"><span class="nav-number">2.4.</span> <span class="nav-text">arrayToCSV</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#bifurcate"><span class="nav-number">2.5.</span> <span class="nav-text">bifurcate</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#bifurcateBy"><span class="nav-number">2.6.</span> <span class="nav-text">bifurcateBy</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chunk"><span class="nav-number">2.7.</span> <span class="nav-text">chunk</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#compact"><span class="nav-number">2.8.</span> <span class="nav-text">compact</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#countBy"><span class="nav-number">2.9.</span> <span class="nav-text">countBy</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#countOccurrences"><span class="nav-number">2.10.</span> <span class="nav-text">countOccurrences</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#deepFlatten"><span class="nav-number">2.11.</span> <span class="nav-text">deepFlatten</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#difference"><span class="nav-number">2.12.</span> <span class="nav-text">difference</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#differenceBy"><span class="nav-number">2.13.</span> <span class="nav-text">differenceBy</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#differenceWith"><span class="nav-number">2.14.</span> <span class="nav-text">differenceWith</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#drop"><span class="nav-number">2.15.</span> <span class="nav-text">drop</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dropRight"><span class="nav-number">2.16.</span> <span class="nav-text">dropRight</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dropRightWhile"><span class="nav-number">2.17.</span> <span class="nav-text">dropRightWhile</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dropWhile"><span class="nav-number">2.18.</span> <span class="nav-text">dropWhile</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#everyNth"><span class="nav-number">2.19.</span> <span class="nav-text">everyNth</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#filterNonUnique"><span class="nav-number">2.20.</span> <span class="nav-text">filterNonUnique</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#filterNonUniqueBy"><span class="nav-number">2.21.</span> <span class="nav-text">filterNonUniqueBy</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#findLast"><span class="nav-number">2.22.</span> <span class="nav-text">findLast</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#findLastIndex"><span class="nav-number">2.23.</span> <span class="nav-text">findLastIndex</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#flatten"><span class="nav-number">2.24.</span> <span class="nav-text">flatten</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#forEachRight"><span class="nav-number">2.25.</span> <span class="nav-text">forEachRight</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#groupBy"><span class="nav-number">2.26.</span> <span class="nav-text">groupBy</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#head"><span class="nav-number">2.27.</span> <span class="nav-text">head</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#indexOfAll"><span class="nav-number">2.28.</span> <span class="nav-text">indexOfAll</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#initial"><span class="nav-number">2.29.</span> <span class="nav-text">initial</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#initialize2DArray"><span class="nav-number">2.30.</span> <span class="nav-text">initialize2DArray</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#initializeArrayWithRange"><span class="nav-number">2.31.</span> <span class="nav-text">initializeArrayWithRange</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#initializeArrayWithRangeRight"><span class="nav-number">2.32.</span> <span class="nav-text">initializeArrayWithRangeRight</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#initializeArrayWithValues"><span class="nav-number">2.33.</span> <span class="nav-text">initializeArrayWithValues</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#initializeNDArray"><span class="nav-number">2.34.</span> <span class="nav-text">initializeNDArray</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#intersection"><span class="nav-number">2.35.</span> <span class="nav-text">intersection</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#intersectionBy"><span class="nav-number">2.36.</span> <span class="nav-text">intersectionBy</span></a></li></ol></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2018</span> <span class="with-love" id="animate"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">abcdGJJ</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-area-chart"></i> </span><span class="post-meta-item-text">站点总字数：</span> <span title="站点总字数">109k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span class="post-meta-item-text">站点阅读时长 &asymp;</span> <span title="站点阅读时长">1:40</span></div><div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io" rel="external nofollow noopener noreferrer">Hexo</a> 强力驱动<span class="post-meta-divider">|</span><a href="//www.miitbeian.gov.cn" target="_blank">鲁ICP备15017412号-1</a></div><span class="post-meta-divider">|</span><div class="theme-info">主题 – <a class="theme-link" target="_blank" href="https://theme-next.org" rel="external nofollow noopener noreferrer">NexT.Pisces</a></div><div class="upyunLogo">cdn提供商：<a href="//www.upyun.com/" target="_blank">又拍云</a> <img src="/images/upyunLogo.png" alt="又拍云logo" width="100" style="display:inline-block;vertical-align:middle"></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/js/src/utils.js?v=1.0.2"></script><script type="text/javascript" src="/js/src/motion.js?v=1.0.2"></script><script type="text/javascript" src="/js/src/affix.js?v=1.0.2"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=1.0.2"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=1.0.2"></script><script type="text/javascript" src="/js/src/post-details.js?v=1.0.2"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=1.0.2"></script><script>function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url }) })
        .done(function ({ results }) {
          if (results.length > 0) {
            var counter = results[0];
            
              var $element = $(document.getElementById(url));
              $element.find('.leancloud-visitors-count').text(counter.time + 1);
            
            Counter('put', `/classes/Counter/${counter.objectId}`, JSON.stringify({ time: { "__op":"Increment", "amount":1 } }))
            
            .fail(function ({ responseJSON }) {
                console.log('Failed to save Visitor num, with error message: ' + responseJSON.error);
            })
          } else {
            
              var $element = $(document.getElementById(url));
              $element.find('.leancloud-visitors-count').text('Counter not initialized! See more at console err msg.');
              console.error('ATTENTION! LeanCloud counter has security bug, see here how to solve it: https://github.com/theme-next/hexo-leancloud-counter-security. \n But you also can use LeanCloud without security, by set \'security\' option to \'false\'.');
            
          }
        })
      .fail(function ({ responseJSON }) {
        console.log('LeanCloud Counter Error:' + responseJSON.code + " " + responseJSON.error);
      });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + "2bbhORHl0lFj56CjcjlM9RkS-gzGzoHsz")
        .done(function ({ api_server }) {
          var Counter = function (method, url, data) {
            return $.ajax({
              method: method,
              url: `https://${api_server}/1.1${url}`,
              headers: {
                'X-LC-Id': "2bbhORHl0lFj56CjcjlM9RkS-gzGzoHsz",
                'X-LC-Key': "KHwlv9OpkyfWVdg95gdNHDnv",
                'Content-Type': 'application/json',
              },
              data: data,
            });
          };
          
          addCount(Counter);
          
        })
    });</script></body></html><!-- rebuild by neat -->