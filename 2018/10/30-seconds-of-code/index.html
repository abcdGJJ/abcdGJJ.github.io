<!-- build time:Sat Apr 11 2020 15:36:26 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html class="theme-next pisces use-motion" lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=1.0.2" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/favicon.png?v=1.0.2"><link rel="icon" type="image/png" sizes="32x32" href="/favicon32x32.png?v=1.0.2"><link rel="icon" type="image/png" sizes="16x16" href="/favicon16x16.png?v=1.0.2"><link rel="mask-icon" href="/favicon.svg?v=1.0.2" color="#222"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Pisces",version:"1.0.2",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!1,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="本文翻译自30-seconds-of-code，可以理解为高阶函数片段。原作者说是30s内就可以理解，而我每一个都看了几分钟。Adapterary创建一个最多接受n个参数的函数，多余的参数将被忽略。使用Array.prototype.slice(0,n)和扩展运算符（...），调用提供的函数发fn，并且最多有n个参数。1234const ary = (fn, n) =&amp;gt; (...args)"><meta name="keywords" content="JavaScript"><meta property="og:type" content="article"><meta property="og:title" content="30s内即可理解的JavaScript片段"><meta property="og:url" content="https://gaojiajun.cn/2018/10/30-seconds-of-code/index.html"><meta property="og:site_name" content="高嘉君的个人博客"><meta property="og:description" content="本文翻译自30-seconds-of-code，可以理解为高阶函数片段。原作者说是30s内就可以理解，而我每一个都看了几分钟。Adapterary创建一个最多接受n个参数的函数，多余的参数将被忽略。使用Array.prototype.slice(0,n)和扩展运算符（...），调用提供的函数发fn，并且最多有n个参数。1234const ary = (fn, n) =&amp;gt; (...args)"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2019-05-30T08:32:17.628Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="30s内即可理解的JavaScript片段"><meta name="twitter:description" content="本文翻译自30-seconds-of-code，可以理解为高阶函数片段。原作者说是30s内就可以理解，而我每一个都看了几分钟。Adapterary创建一个最多接受n个参数的函数，多余的参数将被忽略。使用Array.prototype.slice(0,n)和扩展运算符（...），调用提供的函数发fn，并且最多有n个参数。1234const ary = (fn, n) =&amp;gt; (...args)"><link rel="canonical" href="https://gaojiajun.cn/2018/10/30-seconds-of-code/"><script type="text/javascript" id="page.configurations">CONFIG.page={sidebar:""}</script><title>30s内即可理解的JavaScript片段 | 高嘉君的个人博客</title><script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?fe9b7ee0648033db8df76416c2f766f8";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style type="text/css">.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">高嘉君的个人博客</span> <span class="logo-line-after"><i></i></span></a></div></div><div class="site-nav-toggle"><button aria-label="切换导航栏"><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://gaojiajun.cn/2018/10/30-seconds-of-code/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="abcdGJJ"><meta itemprop="description" content="这里是高嘉君的个人博客"><meta itemprop="image" content="/images/avatar.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="高嘉君的个人博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">30s内即可理解的JavaScript片段</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-10-04 14:16:48" itemprop="dateCreated datePublished" datetime="2018-10-04T14:16:48+08:00">2018-10-04</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2019-05-30 16:32:17" itemprop="dateModified" datetime="2019-05-30T16:32:17+08:00">2019-05-30</time> </span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/2018/10/30-seconds-of-code/#comments" itemprop="discussionUrl"><span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/10/30-seconds-of-code/" itemprop="commentCount"></span> </a></span><span id="/2018/10/30-seconds-of-code/" class="leancloud_visitors" data-flag-title="30s内即可理解的JavaScript片段"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span class="leancloud-visitors-count"></span></span><div class="post-symbolscount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">本文字数：</span> <span title="本文字数">79k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span title="阅读时长">1:12</span></div></div></header><div class="post-body" itemprop="articleBody"><p>本文翻译自<a href="//github.com/30-seconds/30-seconds-of-code#table-of-contents">30-seconds-of-code</a>，可以理解为高阶函数片段。原作者说是30s内就可以理解，而我每一个都看了几分钟。</p><h1 id="Adapter"><a href="#Adapter" class="headerlink" title="Adapter"></a>Adapter</h1><h2 id="ary"><a href="#ary" class="headerlink" title="ary"></a>ary</h2><p>创建一个最多接受<code>n</code>个参数的函数，多余的参数将被忽略。</p><p>使用<code>Array.prototype.slice(0,n)</code>和扩展运算符（<code>...</code>），调用提供的函数发fn，并且最多有n个参数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ary = <span class="function">(<span class="params">fn, n</span>) =&gt;</span> (...args) =&gt; fn(...args.slice(<span class="number">0</span>, n));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> firstTwoMax = ary(<span class="built_in">Math</span>.max, <span class="number">2</span>);</span><br><span class="line">[[<span class="number">2</span>, <span class="number">6</span>, <span class="string">'a'</span>], [<span class="number">8</span>, <span class="number">4</span>, <span class="number">6</span>], [<span class="number">10</span>]].map(<span class="function"><span class="params">x</span> =&gt;</span> firstTwoMax(...x)); <span class="comment">// [6, 8, 10]</span></span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="call"><a href="#call" class="headerlink" title="call"></a>call</h2><p>接受一个键值和一组参数，在给定上下文时调用它们。主要用于组合。</p><p>使用闭包在调用的时候存储键值和参数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> call = <span class="function">(<span class="params">key, ...args</span>) =&gt;</span> context =&gt; context[key](...args);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="built_in">Promise</span>.resolve([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">  .then(call(<span class="string">'map'</span>, x =&gt; <span class="number">2</span> * x))</span><br><span class="line">  .then(<span class="built_in">console</span>.log); <span class="comment">//[ 2, 4, 6 ] 能想到这么写的绝对是个人才</span></span><br><span class="line"><span class="keyword">const</span> map = call.bind(<span class="literal">null</span>, <span class="string">'map'</span>); <span class="comment">// bind不会立即执行，call、apply才会</span></span><br><span class="line"><span class="built_in">Promise</span>.resolve([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">  .then(map(<span class="function"><span class="params">x</span> =&gt;</span> <span class="number">2</span> * x))</span><br><span class="line">  .then(<span class="built_in">console</span>.log); <span class="comment">//[ 2, 4, 6 ]</span></span><br></pre></td></tr></table></figure><h2 id="collectInto"><a href="#collectInto" class="headerlink" title="collectInto"></a>collectInto</h2><p>将接受数组的函数变为接受变量的函数。</p><p>给定一个函数，返回一个闭包，该闭包将所有输入收集到一个接受数组的函数中。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> collectInto = <span class="function"><span class="params">fn</span> =&gt;</span> (...args) =&gt; fn(args);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> Pall = collectInto(<span class="built_in">Promise</span>.all.bind(<span class="built_in">Promise</span>));</span><br><span class="line"><span class="keyword">let</span> p1 = <span class="built_in">Promise</span>.resolve(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">let</span> p2 = <span class="built_in">Promise</span>.resolve(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">let</span> p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> setTimeout(resolve, <span class="number">2000</span>, <span class="number">3</span>)); <span class="comment">// 这么写很精髓</span></span><br><span class="line">Pall(p1, p2, p3).then(<span class="built_in">console</span>.log); <span class="comment">// [1, 2, 3] (after about 2 seconds)</span></span><br></pre></td></tr></table></figure><h2 id="flip"><a href="#flip" class="headerlink" title="flip"></a>flip</h2><p>flip将函数作为参数，然后把闭包里的第一个参数作为最后一个参数。</p><p>返回一个可以接受变量输入的闭包，并展开剩余参数，之后将其变为第一个参数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> flip = <span class="function"><span class="params">fn</span> =&gt;</span> (first, ...rest) =&gt; fn(...rest, first);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">let</span> a = &#123; <span class="attr">name</span>: <span class="string">'John Smith'</span> &#125;;</span><br><span class="line"><span class="keyword">let</span> b = &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> mergeFrom = flip(<span class="built_in">Object</span>.assign);</span><br><span class="line"><span class="keyword">let</span> mergePerson = mergeFrom.bind(<span class="literal">null</span>, a);</span><br><span class="line">mergePerson(b); <span class="comment">// == b</span></span><br><span class="line">b = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.assign(b, a); <span class="comment">// == b</span></span><br></pre></td></tr></table></figure><h2 id="over"><a href="#over" class="headerlink" title="over"></a>over</h2><p>创建一个函数，调用参数中所有的函数并返回结果。</p><p>使用<code>Array.prototype.map()</code>和<code>Function.prototype.apply()</code>将每个函数应用于给定的参数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> over = <span class="function">(<span class="params">...fns</span>) =&gt;</span> (...args) =&gt; fns.map(<span class="function"><span class="params">fn</span> =&gt;</span> fn.apply(<span class="literal">null</span>, args));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> minMax = over(<span class="built_in">Math</span>.min, <span class="built_in">Math</span>.max);</span><br><span class="line">minMax(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>); <span class="comment">// [1,5]</span></span><br></pre></td></tr></table></figure><h2 id="overArgs"><a href="#overArgs" class="headerlink" title="overArgs"></a>overArgs</h2><p>创建一个函数，调用参数中的函数并将闭包中的参数按提供的函数转换。</p><p>使用<code>Array.prototype.map()</code>与扩展运算符(<code>...</code>)将转换后的参数传递给<code>fn</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> overArgs = <span class="function">(<span class="params">fn, transforms</span>) =&gt;</span> (...args) =&gt; fn(...args.map(<span class="function">(<span class="params">val, i</span>) =&gt;</span> transforms[i](val)));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> square = <span class="function"><span class="params">n</span> =&gt;</span> n * n;</span><br><span class="line"><span class="keyword">const</span> double = <span class="function"><span class="params">n</span> =&gt;</span> n * <span class="number">2</span>;</span><br><span class="line"><span class="keyword">const</span> fn = overArgs(<span class="function">(<span class="params">x, y</span>) =&gt;</span> [x, y], [square, double]);</span><br><span class="line">fn(<span class="number">9</span>, <span class="number">3</span>); <span class="comment">// [81, 6]</span></span><br></pre></td></tr></table></figure><h2 id="pipeAsyncFunctions"><a href="#pipeAsyncFunctions" class="headerlink" title="pipeAsyncFunctions"></a>pipeAsyncFunctions</h2><p>这个函数实在是太复杂了，稍后再译。</p><p>Performs left-to-right function composition for asynchronous functions.</p><p>Use <code>Array.prototype.reduce()</code> with the spread operator (<code>...</code>) to perform left-to-right function composition using <code>Promise.then()</code>. The functions can return a combination of: simple values, <code>Promise</code>‘s, or they can be defined as <code>async</code> ones returning through <code>await</code>. All functions must be unary.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pipeAsyncFunctions = <span class="function">(<span class="params">...fns</span>) =&gt;</span> arg =&gt; fns.reduce(<span class="function">(<span class="params">p, f</span>) =&gt;</span> p.then(f), <span class="built_in">Promise</span>.resolve(arg));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> sum = pipeAsyncFunctions(</span><br><span class="line">  x =&gt; x + <span class="number">1</span>,</span><br><span class="line">  x =&gt; <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> resolve(x + <span class="number">2</span>), <span class="number">1000</span>)),</span><br><span class="line">  x =&gt; x + <span class="number">3</span>,</span><br><span class="line">  <span class="keyword">async</span> x =&gt; (<span class="keyword">await</span> x) + <span class="number">4</span></span><br><span class="line">);</span><br><span class="line">(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">await</span> sum(<span class="number">5</span>)); <span class="comment">// 15 (after one second)</span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><h2 id="pipeFunctions"><a href="#pipeFunctions" class="headerlink" title="pipeFunctions"></a>pipeFunctions</h2><p>按照从左到右的函数顺序执行。</p><p>借助<code>Array.prototype.reduce()</code>与扩展运算符(<code>...</code>)实现从左到右的函数合成。第一个(最左边的)函数可以接受一个或多个参数，其他的函数必须是一个参数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pipeFunctions = <span class="function">(<span class="params">...fns</span>) =&gt;</span> fns.reduce(<span class="function">(<span class="params">f, g</span>) =&gt;</span> (...args) =&gt; g(f(...args)));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> add5 = <span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> multiply = <span class="function">(<span class="params">x, y</span>) =&gt;</span> x * y;</span><br><span class="line"><span class="keyword">const</span> multiplyAndAdd5 = pipeFunctions(multiply, add5);</span><br><span class="line">multiplyAndAdd5(<span class="number">5</span>, <span class="number">2</span>); <span class="comment">// 15</span></span><br></pre></td></tr></table></figure><h2 id="promisify"><a href="#promisify" class="headerlink" title="promisify"></a>promisify</h2><p>转换异步函数并返回promise。</p><p>返回一个调用原始函数后的返回promise的函数。使用<code>...rest</code>运算符传递所有参数。</p><p>在Node 8+，你可以使用<code>util.promify</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promisify = <span class="function"><span class="params">func</span> =&gt;</span> (...args) =&gt;</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span></span><br><span class="line">    func(...args, (err, result) =&gt; (err ? reject(err) : resolve(result)))</span><br><span class="line">  );</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> delay = promisify(<span class="function">(<span class="params">d, cb</span>) =&gt;</span> setTimeout(cb, d));</span><br><span class="line">delay(<span class="number">2000</span>).then(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'Hi!'</span>)); <span class="comment">// // Promise resolves after 2s</span></span><br></pre></td></tr></table></figure><h2 id="rearg"><a href="#rearg" class="headerlink" title="rearg"></a>rearg</h2><p>创建一个调用所提供函数的函数，其参数按照指定的索引排列。</p><p>使用<code>Array.prototype.map( )</code>基于<code>indexes</code>对参数重新排序，并结合扩展运算符(…)将转换后的参数传递给<code>fn</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rearg = <span class="function">(<span class="params">fn, indexes</span>) =&gt;</span> (...args) =&gt; fn(...indexes.map(<span class="function"><span class="params">i</span> =&gt;</span> args[i]));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">var</span> rearged = rearg(</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> [a, b, c];</span><br><span class="line">  &#125;,</span><br><span class="line">  [<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>]</span><br><span class="line">);</span><br><span class="line">rearged(<span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'a'</span>); <span class="comment">// ['a', 'b', 'c']</span></span><br></pre></td></tr></table></figure><h2 id="spreadOver"><a href="#spreadOver" class="headerlink" title="spreadOver"></a>spreadOver</h2><p>接受一个函数并返回一个闭包，该闭包接受一组参数并映射到函数的变量。</p><p>使用闭包和扩展运算符(<code>...</code>)将数组映射为函数的变量。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> spreadOver = <span class="function"><span class="params">fn</span> =&gt;</span> argsArr =&gt; fn(...argsArr);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> arrayMax = spreadOver(<span class="built_in">Math</span>.max);</span><br><span class="line">arrayMax([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><h2 id="unary"><a href="#unary" class="headerlink" title="unary"></a>unary</h2><p>创建一个只接受一个参数的函数，忽略任何其他参数。</p><p>调用提供的函数<code>fn</code>，只传入一个参数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> unary = <span class="function"><span class="params">fn</span> =&gt;</span> val =&gt; fn(val);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">[<span class="string">'6'</span>, <span class="string">'8'</span>, <span class="string">'10'</span>].map(unary(<span class="built_in">parseInt</span>)); <span class="comment">// [6, 8, 10]</span></span><br></pre></td></tr></table></figure><h1 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h1><h2 id="all"><a href="#all" class="headerlink" title="all"></a>all</h2><p>如果数组中的所有元素执行给定的函数都返回<code>true</code>，则返回<code>true</code>，否则返回<code>false</code>。</p><p>使用<code>Array.prototype.very()</code>遍历数组中的所有元素是否执行<code>fn</code>返回<code>true</code>。如果省略第二个参数<code>fn</code>，将使用<code>Boolean</code>函数作为默认值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> all = <span class="function">(<span class="params">arr, fn = <span class="built_in">Boolean</span></span>) =&gt;</span> arr.every(fn);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">all([<span class="number">4</span>, <span class="number">2</span>, <span class="number">3</span>], x =&gt; x &gt; <span class="number">1</span>); <span class="comment">// true</span></span><br><span class="line">all([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="allEqual"><a href="#allEqual" class="headerlink" title="allEqual"></a>allEqual</h2><p>检查数组中的所有元素是否相等。</p><p>使用<code>Array.prototype.very()</code>检查数组中的所有元素是否与第一个元素相同。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> allEqual = <span class="function"><span class="params">arr</span> =&gt;</span> arr.every(<span class="function"><span class="params">val</span> =&gt;</span> val === arr[<span class="number">0</span>]);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">allEqual([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]); <span class="comment">// false</span></span><br><span class="line">allEqual([<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>]); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="any"><a href="#any" class="headerlink" title="any"></a>any</h2><p>如果数组中至少有一个元素执行给定的函数都返回<code>true</code>，则返回<code>true</code>，否则返回<code>false</code>。</p><p>使用<code>Array.prototype.some()</code>遍历集合中是否有元素调用<code>fn</code>返回<code>true</code>。省略第二个参数<code>fn</code>，将使用<code>Boolean</code>函数作为默认值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> any = <span class="function">(<span class="params">arr, fn = <span class="built_in">Boolean</span></span>) =&gt;</span> arr.some(fn);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">any([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>], x =&gt; x &gt;= <span class="number">2</span>); <span class="comment">// true</span></span><br><span class="line">any([<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>]); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="arrayToCSV"><a href="#arrayToCSV" class="headerlink" title="arrayToCSV"></a>arrayToCSV</h2><p>将二维数组转换为逗号分隔值(CSV)字符串。</p><p>使用<code>Array.prototype.map()</code>和<code>Array.prototype.join(delimiter)</code>将单个一维数组(行)组合成字符串。使用<code>Array.prototype.join(&quot;\n&quot;)</code>将所有行组合成一个CSV字符串，用换行符分隔每行。省略第二个参数<code>delimiter</code>，将使用<code>,</code>作为默认分隔符。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arrayToCSV = <span class="function">(<span class="params">arr, delimiter = <span class="string">','</span></span>) =&gt;</span></span><br><span class="line">  arr.map(<span class="function"><span class="params">v</span> =&gt;</span> v.map(<span class="function"><span class="params">x</span> =&gt;</span> <span class="string">`"<span class="subst">$&#123;x&#125;</span>"`</span>).join(delimiter)).join(<span class="string">'\n'</span>);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">arrayToCSV([[<span class="string">'a'</span>, <span class="string">'b'</span>], [<span class="string">'c'</span>, <span class="string">'d'</span>]]); <span class="comment">// '"a","b"\n"c","d"'</span></span><br><span class="line">arrayToCSV([[<span class="string">'a'</span>, <span class="string">'b'</span>], [<span class="string">'c'</span>, <span class="string">'d'</span>]], <span class="string">';'</span>); <span class="comment">// '"a";"b"\n"c";"d"'</span></span><br></pre></td></tr></table></figure><h2 id="bifurcate"><a href="#bifurcate" class="headerlink" title="bifurcate"></a>bifurcate</h2><p>将值分成两组。如果<code>filter</code>函数中的元素是真的，则数组中的相应元素属于第一组；否则，它属于第二组。</p><p>使用<code>Array.prototype.reduce()</code>和<code>Array.prototype.push()</code>根据<code>filter</code>函数将元素添加到组中。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bifurcate = <span class="function">(<span class="params">arr, filter</span>) =&gt;</span></span><br><span class="line">  arr.reduce(<span class="function">(<span class="params">acc, val, i</span>) =&gt;</span> (acc[filter[i] ? <span class="number">0</span> : <span class="number">1</span>].push(val), acc), [[], []]); <span class="comment">// js括号语法，返回后面的值，写法很6啊</span></span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">bifurcate([<span class="string">'beep'</span>, <span class="string">'boop'</span>, <span class="string">'foo'</span>, <span class="string">'bar'</span>], [<span class="literal">true</span>, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">true</span>]); <span class="comment">// [ ['beep', 'boop', 'bar'], ['foo'] ]</span></span><br></pre></td></tr></table></figure><h2 id="bifurcateBy"><a href="#bifurcateBy" class="headerlink" title="bifurcateBy"></a>bifurcateBy</h2><p>根据给定的函数将值分成两组，该函数可以指定输入数组中的元素属于哪个组。如果函数返回真，则集合元素属于第一组；否则，它属于第二组。</p><p>每个元素调用<code>fn</code>得到返回值，使用<code>Array.prototype.reduce()</code>和<code>Array.prototype.push()</code>将元素添加到组中。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bifurcateBy = <span class="function">(<span class="params">arr, fn</span>) =&gt;</span></span><br><span class="line">  arr.reduce(<span class="function">(<span class="params">acc, val, i</span>) =&gt;</span> (acc[fn(val, i) ? <span class="number">0</span> : <span class="number">1</span>].push(val), acc), [[], []]);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">bifurcateBy([<span class="string">'beep'</span>, <span class="string">'boop'</span>, <span class="string">'foo'</span>, <span class="string">'bar'</span>], x =&gt; x[<span class="number">0</span>] === <span class="string">'b'</span>); <span class="comment">// [ ['beep', 'boop', 'bar'], ['foo'] ]</span></span><br></pre></td></tr></table></figure><h2 id="chunk"><a href="#chunk" class="headerlink" title="chunk"></a>chunk</h2><p>将数组分成指定长度的多维数组。</p><p>使用<code>Array.from()</code>创建一个新的数组，该数组的长度等于要生成的块的长度。使用<code>Array.prototype.slice()</code>将新数组的元素映射到一个长度为给定长度的块。如果原数组不能被平均分割，则最后一块将包含剩余的元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> chunk = <span class="function">(<span class="params">arr, size</span>) =&gt;</span></span><br><span class="line">  <span class="built_in">Array</span>.from(&#123; <span class="attr">length</span>: <span class="built_in">Math</span>.ceil(arr.length / size) &#125;, (v, i) =&gt;</span><br><span class="line">    arr.slice(i * size, i * size + size)</span><br><span class="line">  );</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">chunk([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], <span class="number">2</span>); <span class="comment">// [[1,2],[3,4],[5]]</span></span><br></pre></td></tr></table></figure><h2 id="compact"><a href="#compact" class="headerlink" title="compact"></a>compact</h2><p>从数组中删除无效值。</p><p>使用<code>Array.prototype.filter()</code>过滤掉无效值(<code>false</code>, <code>null</code>, <code>0</code>, <code>&quot;&quot;</code>, <code>undefined</code>, <code>NaN</code>)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> compact = <span class="function"><span class="params">arr</span> =&gt;</span> arr.filter(<span class="built_in">Boolean</span>);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">compact([<span class="number">0</span>, <span class="number">1</span>, <span class="literal">false</span>, <span class="number">2</span>, <span class="string">''</span>, <span class="number">3</span>, <span class="string">'a'</span>, <span class="string">'e'</span> * <span class="number">23</span>, <span class="literal">NaN</span>, <span class="string">'s'</span>, <span class="number">34</span>]); <span class="comment">// [ 1, 2, 3, 'a', 's', 34 ]</span></span><br></pre></td></tr></table></figure><h2 id="countBy"><a href="#countBy" class="headerlink" title="countBy"></a>countBy</h2><p>根据给定函数对数组中的元素进行分组，并返回每个组中元素总数。</p><p>使用<code>Array.prototype.map()</code>返回数组元素调用函数或属性后的值。使用<code>Array.prototype.reduce()</code>创建一个对象，其中键是根据前面的值生成的。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> countBy = <span class="function">(<span class="params">arr, fn</span>) =&gt;</span></span><br><span class="line">  arr.map(<span class="keyword">typeof</span> fn === <span class="string">'function'</span> ? fn : <span class="function"><span class="params">val</span> =&gt;</span> val[fn]).reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> &#123;</span><br><span class="line">    acc[val] = (acc[val] || <span class="number">0</span>) + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> acc;</span><br><span class="line">  &#125;, &#123;&#125;);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">countBy([<span class="number">6.1</span>, <span class="number">4.2</span>, <span class="number">6.3</span>], <span class="built_in">Math</span>.floor); <span class="comment">// &#123;4: 1, 6: 2&#125;</span></span><br><span class="line">countBy([<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>], <span class="string">'length'</span>); <span class="comment">// &#123;3: 2, 5: 1&#125;</span></span><br></pre></td></tr></table></figure><h2 id="countOccurrences"><a href="#countOccurrences" class="headerlink" title="countOccurrences"></a>countOccurrences</h2><p>计算数组中某个值的出现次数。</p><p>使用<code>Array.prototype.reduce()</code>，每当遇到数组中的特定值时，递增计数器。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> countOccurrences = <span class="function">(<span class="params">arr, val</span>) =&gt;</span> arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> (v === val ? a + <span class="number">1</span> : a), <span class="number">0</span>);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">countOccurrences([<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">1</span>); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><h2 id="deepFlatten"><a href="#deepFlatten" class="headerlink" title="deepFlatten"></a>deepFlatten</h2><p>将数组展平。</p><p>借助递归。使用<code>Array.prototype.concat</code>结合空数组(<code>[]</code>)和扩展运算符(<code>...</code>)来展平数组。递归展平作用于数组的每个元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> deepFlatten = <span class="function"><span class="params">arr</span> =&gt;</span> [].concat(...arr.map(<span class="function"><span class="params">v</span> =&gt;</span> (<span class="built_in">Array</span>.isArray(v) ? deepFlatten(v) : v)));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">deepFlatten([<span class="number">1</span>, [<span class="number">2</span>], [[<span class="number">3</span>], <span class="number">4</span>], <span class="number">5</span>]); <span class="comment">// [1,2,3,4,5]</span></span><br></pre></td></tr></table></figure><h2 id="difference"><a href="#difference" class="headerlink" title="difference"></a>difference</h2><p>返回两个数组之间的差异。</p><p>从<code>b</code>创建一个<code>Set</code>，然后在<code>a</code>上使用<code>Array.prototype.filter()</code>来只保留<code>b</code>中不包含的值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> difference = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>(b);</span><br><span class="line">  <span class="keyword">return</span> a.filter(<span class="function"><span class="params">x</span> =&gt;</span> !s.has(x));</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">difference([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>]); <span class="comment">// [3]</span></span><br></pre></td></tr></table></figure><h2 id="differenceBy"><a href="#differenceBy" class="headerlink" title="differenceBy"></a>differenceBy</h2><p>将给定的函数应用于两个数组的每个数组元素后，返回两个数组之间的差异。</p><p>通过对<code>b</code>中的每个元素调用<code>fn</code>来创建一个<code>Set</code>，然后将<code>Array.protototype.filter()</code>和<code>a</code>中元素调用<code>fn</code>的结果结合使用，只保留先前创建的集合中不包含的值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> differenceBy = <span class="function">(<span class="params">a, b, fn</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>(b.map(fn));</span><br><span class="line">  <span class="keyword">return</span> a.filter(<span class="function"><span class="params">x</span> =&gt;</span> !s.has(fn(x)));</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">differenceBy([<span class="number">2.1</span>, <span class="number">1.2</span>], [<span class="number">2.3</span>, <span class="number">3.4</span>], <span class="built_in">Math</span>.floor); <span class="comment">// [1.2]</span></span><br><span class="line">differenceBy([&#123; <span class="attr">x</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">1</span> &#125;], [&#123; <span class="attr">x</span>: <span class="number">1</span> &#125;], v =&gt; v.x); <span class="comment">// [ &#123; x: 2 &#125; ]</span></span><br></pre></td></tr></table></figure><h2 id="differenceWith"><a href="#differenceWith" class="headerlink" title="differenceWith"></a>differenceWith</h2><p>过滤掉数组中比较函数不返回<code>true</code>的所有值。</p><p>使用<code>Array.prototype.filter()</code>和<code>Array.prototype.findindex()</code>查找适当的值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> differenceWith = <span class="function">(<span class="params">arr, val, comp</span>) =&gt;</span> arr.filter(<span class="function"><span class="params">a</span> =&gt;</span> val.findIndex(<span class="function"><span class="params">b</span> =&gt;</span> comp(a, b)) === <span class="number">-1</span>);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">differenceWith([<span class="number">1</span>, <span class="number">1.2</span>, <span class="number">1.5</span>, <span class="number">3</span>, <span class="number">0</span>], [<span class="number">1.9</span>, <span class="number">3</span>, <span class="number">0</span>], (a, b) =&gt; <span class="built_in">Math</span>.round(a) === <span class="built_in">Math</span>.round(b)); <span class="comment">// [1, 1.2]</span></span><br></pre></td></tr></table></figure><h2 id="drop"><a href="#drop" class="headerlink" title="drop"></a>drop</h2><p>返回一个从左边移除n个元素后的新数组。</p><p>使用<code>Array.prototype.slice()</code>从左侧移除指定数量的元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> drop = <span class="function">(<span class="params">arr, n = <span class="number">1</span></span>) =&gt;</span> arr.slice(n);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">drop([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// [2,3]</span></span><br><span class="line">drop([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">2</span>); <span class="comment">// [3]</span></span><br><span class="line">drop([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">42</span>); <span class="comment">// []</span></span><br></pre></td></tr></table></figure><h2 id="dropRight"><a href="#dropRight" class="headerlink" title="dropRight"></a>dropRight</h2><p>返回一个从右边移除n个元素后的新数组。</p><p>使用<code>Array.prototype.slice()</code>从右侧移除指定数量的元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> drop = <span class="function">(<span class="params">arr, n = <span class="number">1</span></span>) =&gt;</span> arr.slice(<span class="number">0</span>, -n);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">dropRight([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// [1,2]</span></span><br><span class="line">dropRight([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">2</span>); <span class="comment">// [1]</span></span><br><span class="line">dropRight([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">42</span>); <span class="comment">// []</span></span><br></pre></td></tr></table></figure><h2 id="dropRightWhile"><a href="#dropRightWhile" class="headerlink" title="dropRightWhile"></a>dropRightWhile</h2><p>从数组末尾移除元素，直到传递的函数返回true。返回数组中的剩余元素。</p><p>使用<code>Array.protototype.slice()</code>循环数组，直到函数返回值为<code>true</code>。返回剩余元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dropRightWhile = <span class="function">(<span class="params">arr, func</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">while</span> (arr.length &gt; <span class="number">0</span> &amp;&amp; !func(arr[arr.length - <span class="number">1</span>])) arr = arr.slice(<span class="number">0</span>, <span class="number">-1</span>);</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">dropRightWhile([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], n =&gt; n &lt; <span class="number">3</span>); <span class="comment">// [1, 2]</span></span><br></pre></td></tr></table></figure><h2 id="dropWhile"><a href="#dropWhile" class="headerlink" title="dropWhile"></a>dropWhile</h2><p>从数组开头移除元素，直到传递的函数返回true。返回数组中的剩余元素。</p><p>循环数组，使用<code>Array.prototype.slice()</code>删除数组的第一个元素，直到函数返回值为<code>true</code>。返回剩余元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dropWhile = <span class="function">(<span class="params">arr, func</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">while</span> (arr.length &gt; <span class="number">0</span> &amp;&amp; !func(arr[<span class="number">0</span>])) arr = arr.slice(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">dropWhile([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], n =&gt; n &gt;= <span class="number">3</span>); <span class="comment">// [3,4]</span></span><br></pre></td></tr></table></figure><h2 id="everyNth"><a href="#everyNth" class="headerlink" title="everyNth"></a>everyNth</h2><p>返回数组中顺序为nth倍数的元素。</p><p>使用<code>Array.prototype.filter()</code>创建一个新数组，该数组包含给定数组中顺序为nth倍数的元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> everyNth = <span class="function">(<span class="params">arr, nth</span>) =&gt;</span> arr.filter(<span class="function">(<span class="params">e, i</span>) =&gt;</span> i % nth === nth - <span class="number">1</span>);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">everyNth([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], <span class="number">2</span>); <span class="comment">// [ 2, 4, 6 ]</span></span><br></pre></td></tr></table></figure><h2 id="filterNonUnique"><a href="#filterNonUnique" class="headerlink" title="filterNonUnique"></a>filterNonUnique</h2><p>过滤掉数组中的非唯一值。</p><p>使用<code>Array.prototype.filter()</code>创建包含唯一值的数组。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> filterNonUnique = <span class="function"><span class="params">arr</span> =&gt;</span> arr.filter(<span class="function"><span class="params">i</span> =&gt;</span> arr.indexOf(i) === arr.lastIndexOf(i));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">filterNonUnique([<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>]); <span class="comment">// [1, 3, 5]</span></span><br></pre></td></tr></table></figure><h2 id="filterNonUniqueBy"><a href="#filterNonUniqueBy" class="headerlink" title="filterNonUniqueBy"></a>filterNonUniqueBy</h2><p>基于提供的比较器函数过滤掉数组中的非唯一值。</p><p>基于比较器函数<code>fn</code>，对只包含唯一值的数组使用<code>Array.prototype.filter()</code>和<code>Array. prototype.every()</code>。比较器函数接受四个参数：两个被比较元素的值及其索引。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> filterNonUniqueBy = <span class="function">(<span class="params">arr, fn</span>) =&gt;</span></span><br><span class="line">  arr.filter(<span class="function">(<span class="params">v, i</span>) =&gt;</span> arr.every(<span class="function">(<span class="params">x, j</span>) =&gt;</span> (i === j) === fn(v, x, i, j)));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">filterNonUniqueBy(</span><br><span class="line">  [</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">0</span>, <span class="attr">value</span>: <span class="string">'a'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">value</span>: <span class="string">'b'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">value</span>: <span class="string">'c'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">value</span>: <span class="string">'d'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">0</span>, <span class="attr">value</span>: <span class="string">'e'</span> &#125;</span><br><span class="line">  ],</span><br><span class="line">  (a, b) =&gt; a.id == b.id</span><br><span class="line">); <span class="comment">// [ &#123; id: 2, value: 'c' &#125; ]</span></span><br></pre></td></tr></table></figure><h2 id="findLast"><a href="#findLast" class="headerlink" title="findLast"></a>findLast</h2><p>返回调用所给函数返回真值的最后一个元素。</p><p>使用<code>Array.prototype.filter()</code>过滤<code>fn</code>返回假值的元素，使用<code>Array.prototype.pop()</code>获取最后一个元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> findLast = <span class="function">(<span class="params">arr, fn</span>) =&gt;</span> arr.filter(fn).pop();</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">findLast([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], n =&gt; n % <span class="number">2</span> === <span class="number">1</span>); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><h2 id="findLastIndex"><a href="#findLastIndex" class="headerlink" title="findLastIndex"></a>findLastIndex</h2><p>返回调用所给函数返回真值的最后一个元素的索引。</p><p>使用<code>Array.prototype.map()</code>将每个元素与其索引和值映射到一个数组。使用<code>Array.prototype.filter()</code>过滤<code>fn</code>返回假值的元素，使用<code>Array.prototype.pop()</code>获取最后一个元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> findLastIndex = <span class="function">(<span class="params">arr, fn</span>) =&gt;</span></span><br><span class="line">  arr</span><br><span class="line">    .map(<span class="function">(<span class="params">val, i</span>) =&gt;</span> [i, val])</span><br><span class="line">    .filter(<span class="function">(<span class="params">[i, val]</span>) =&gt;</span> fn(val, i, arr))</span><br><span class="line">    .pop()[<span class="number">0</span>];</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">findLastIndex([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], n =&gt; n % <span class="number">2</span> === <span class="number">1</span>); <span class="comment">// 2 (index of the value 3)</span></span><br></pre></td></tr></table></figure><h2 id="flatten"><a href="#flatten" class="headerlink" title="flatten"></a>flatten</h2><p>将数组展平到指定的深度。</p><p>使用递归，对于每一深度级别，深度递减1。使用<code>Array.prototype.reduce()</code>和<code>Array.prototype.concat()</code>合并元素或数组。一般情况下，如果深度等于1则停止递归。省略第二个参数，<code>depth</code>仅展平到深度1 (单个展平)。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 理解起来有点困难</span></span><br><span class="line"><span class="keyword">const</span> flatten = <span class="function">(<span class="params">arr, depth = <span class="number">1</span></span>) =&gt;</span></span><br><span class="line">  arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> a.concat(depth &gt; <span class="number">1</span> &amp;&amp; <span class="built_in">Array</span>.isArray(v) ? flatten(v, depth - <span class="number">1</span>) : v), []);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">flatten([<span class="number">1</span>, [<span class="number">2</span>], <span class="number">3</span>, <span class="number">4</span>]); <span class="comment">// [1, 2, 3, 4]</span></span><br><span class="line">flatten([<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>, [<span class="number">4</span>, <span class="number">5</span>], <span class="number">6</span>], <span class="number">7</span>], <span class="number">8</span>], <span class="number">2</span>); <span class="comment">// [1, 2, 3, [4, 5], 6, 7, 8]</span></span><br></pre></td></tr></table></figure><h2 id="forEachRight"><a href="#forEachRight" class="headerlink" title="forEachRight"></a>forEachRight</h2><p>从数组的最后一个元素开始，为每个数组元素执行给定的函数。</p><p>使用<code>Array.protototype.slice(0)</code>克隆给定的数组，使用<code>Array.protototype.reverse()</code>反转数组，使用<code>Array.protototype.foreach()</code>循环反向数组。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> forEachRight = <span class="function">(<span class="params">arr, callback</span>) =&gt;</span></span><br><span class="line">  arr</span><br><span class="line">    .slice(<span class="number">0</span>)</span><br><span class="line">    .reverse()</span><br><span class="line">    .forEach(callback);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">forEachRight([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], val =&gt; <span class="built_in">console</span>.log(val)); <span class="comment">// '4', '3', '2', '1'</span></span><br></pre></td></tr></table></figure><h2 id="groupBy"><a href="#groupBy" class="headerlink" title="groupBy"></a>groupBy</h2><p>根据给定函数对数组元素进行分组。</p><p>使用<code>Array.prototype.map()</code>对数组元素调用到函数或属性。使用<code>Array.protototype .reduce()</code>创建一个对象，其中的键是根据前面结果生成的。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> groupBy = <span class="function">(<span class="params">arr, fn</span>) =&gt;</span></span><br><span class="line">  arr.map(<span class="keyword">typeof</span> fn === <span class="string">'function'</span> ? fn : <span class="function"><span class="params">val</span> =&gt;</span> val[fn]).reduce(<span class="function">(<span class="params">acc, val, i</span>) =&gt;</span> &#123;</span><br><span class="line">    acc[val] = (acc[val] || []).concat(arr[i]);</span><br><span class="line">    <span class="keyword">return</span> acc;</span><br><span class="line">  &#125;, &#123;&#125;);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">groupBy([<span class="number">6.1</span>, <span class="number">4.2</span>, <span class="number">6.3</span>], <span class="built_in">Math</span>.floor); <span class="comment">// &#123;4: [4.2], 6: [6.1, 6.3]&#125;</span></span><br><span class="line">groupBy([<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>], <span class="string">'length'</span>); <span class="comment">// &#123;3: ['one', 'two'], 5: ['three']&#125;</span></span><br></pre></td></tr></table></figure><h2 id="head"><a href="#head" class="headerlink" title="head"></a>head</h2><p>返回数组的第一个元素。</p><p>使用<code>arr[0]</code>返回数组的第一个元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> head = <span class="function"><span class="params">arr</span> =&gt;</span> arr[<span class="number">0</span>];</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">head([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><h2 id="indexOfAll"><a href="#indexOfAll" class="headerlink" title="indexOfAll"></a>indexOfAll</h2><p>返回数组中<code>val</code>出现的所有索引。如果<code>val</code>从未出现，返回<code>[]</code>。</p><p>使用<code>Array.prototype.reduce()</code>循环元素并存储匹配元素的索引。返回索引数组。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> indexOfAll = <span class="function">(<span class="params">arr, val</span>) =&gt;</span> arr.reduce(<span class="function">(<span class="params">acc, el, i</span>) =&gt;</span> (el === val ? [...acc, i] : acc), []);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">indexOfAll([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">1</span>); <span class="comment">// [0,3]</span></span><br><span class="line">indexOfAll([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>); <span class="comment">// []</span></span><br></pre></td></tr></table></figure><h2 id="initial"><a href="#initial" class="headerlink" title="initial"></a>initial</h2><p>返回数组除了最后一个以外的所有元素。</p><p>使用<code>arr.slice(0, -1)</code>来返回除最后一个元素以外的所有元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initial = <span class="function"><span class="params">arr</span> =&gt;</span> arr.slice(<span class="number">0</span>, <span class="number">-1</span>);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">initial([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// [1,2]</span></span><br></pre></td></tr></table></figure><h2 id="initialize2DArray"><a href="#initialize2DArray" class="headerlink" title="initialize2DArray"></a>initialize2DArray</h2><p>生成指定行列和值的二维数组。</p><p>使用<code>Array.prototype.map()</code>生成h行长度为w并填入值的数组。如果没有给定值，则默认为<code>null</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initialize2DArray = <span class="function">(<span class="params">w, h, val = <span class="literal">null</span></span>) =&gt;</span></span><br><span class="line">  <span class="built_in">Array</span>.from(&#123; <span class="attr">length</span>: h &#125;).map(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">Array</span>.from(&#123; <span class="attr">length</span>: w &#125;).fill(val));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">initialize2DArray(<span class="number">2</span>, <span class="number">2</span>, <span class="number">0</span>); <span class="comment">// [[0,0], [0,0]]</span></span><br></pre></td></tr></table></figure><h2 id="initializeArrayWithRange"><a href="#initializeArrayWithRange" class="headerlink" title="initializeArrayWithRange"></a>initializeArrayWithRange</h2><p>初始化一个数组，该数组包含指定范围内的数字，并且按照指定步长递增。</p><p>使用<code>Array.from()</code>创建所需长度的数组(结束-开始+1)/步长，并在给定范围内用所需值填充数组。可以省略开始值默认是0。也可以省略步长来使用默认值1。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initializeArrayWithRange = <span class="function">(<span class="params">end, start = <span class="number">0</span>, step = <span class="number">1</span></span>) =&gt;</span></span><br><span class="line">  <span class="built_in">Array</span>.from(&#123; <span class="attr">length</span>: <span class="built_in">Math</span>.ceil(<span class="function">(<span class="params">end - start + <span class="number">1</span></span>) / <span class="params">step</span>) &#125;, (<span class="params">v, i</span>) =&gt;</span> i * step + start);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">initializeArrayWithRange(<span class="number">5</span>); <span class="comment">// [0,1,2,3,4,5]</span></span><br><span class="line">initializeArrayWithRange(<span class="number">7</span>, <span class="number">3</span>); <span class="comment">// [3,4,5,6,7]</span></span><br><span class="line">initializeArrayWithRange(<span class="number">9</span>, <span class="number">0</span>, <span class="number">2</span>); <span class="comment">// [0,2,4,6,8]</span></span><br></pre></td></tr></table></figure><h2 id="initializeArrayWithRangeRight"><a href="#initializeArrayWithRangeRight" class="headerlink" title="initializeArrayWithRangeRight"></a>initializeArrayWithRangeRight</h2><p>初始化一个数组，该数组包含指定范围内的数字（反向），并且按照指定步长递减。</p><p>使用<code>Array.from(Math.ceil((end+1-start)/step))</code>创建所需长度的数组(长度等于(结束-开始)/步长或(结束+1-开始)/步长 (包含结束))，并在给定范围内用所需值填充数组。可以省略开始值默认是0。也可以省略步长来使用默认值1。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initializeArrayWithRangeRight = <span class="function">(<span class="params">end, start = <span class="number">0</span>, step = <span class="number">1</span></span>) =&gt;</span></span><br><span class="line">  <span class="built_in">Array</span>.from(&#123; <span class="attr">length</span>: <span class="built_in">Math</span>.ceil((end + <span class="number">1</span> - start) / step) &#125;).map(</span><br><span class="line">    (v, i, arr) =&gt; (arr.length - i - <span class="number">1</span>) * step + start</span><br><span class="line">  );</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">initializeArrayWithRangeRight(<span class="number">5</span>); <span class="comment">// [5,4,3,2,1,0]</span></span><br><span class="line">initializeArrayWithRangeRight(<span class="number">7</span>, <span class="number">3</span>); <span class="comment">// [7,6,5,4,3]</span></span><br><span class="line">initializeArrayWithRangeRight(<span class="number">9</span>, <span class="number">0</span>, <span class="number">2</span>); <span class="comment">// [8,6,4,2,0]</span></span><br></pre></td></tr></table></figure><h2 id="initializeArrayWithValues"><a href="#initializeArrayWithValues" class="headerlink" title="initializeArrayWithValues"></a>initializeArrayWithValues</h2><p>用指定的值初始化并填充数组。</p><p>使用<code>Array(n)</code>创建所需长度的数组，用<code>fill(v)</code>根据所需值填充数组(v)。你可以省略<code>val</code>来使用默认值0。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initializeArrayWithValues = <span class="function">(<span class="params">n, val = <span class="number">0</span></span>) =&gt;</span> <span class="built_in">Array</span>(n).fill(val);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">initializeArrayWithValues(<span class="number">5</span>, <span class="number">2</span>); <span class="comment">// [2, 2, 2, 2, 2]</span></span><br></pre></td></tr></table></figure><h2 id="initializeNDArray"><a href="#initializeNDArray" class="headerlink" title="initializeNDArray"></a>initializeNDArray</h2><p>创建具有给定值的n维数组。</p><p>使用递归。用<code>Array.prototype.map()</code>生成行数组，其中每一行都是使用<code>initializendaray</code>初始化的新数组。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initializeNDArray = <span class="function">(<span class="params">val, ...args</span>) =&gt;</span></span><br><span class="line">  args.length === <span class="number">0</span></span><br><span class="line">    ? val</span><br><span class="line">    : <span class="built_in">Array</span>.from(&#123; <span class="attr">length</span>: args[<span class="number">0</span>] &#125;).map(<span class="function"><span class="params">()</span> =&gt;</span> initializeNDArray(val, ...args.slice(<span class="number">1</span>)));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">initializeNDArray(<span class="number">1</span>, <span class="number">3</span>); <span class="comment">// [1,1,1]</span></span><br><span class="line">initializeNDArray(<span class="number">5</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>); <span class="comment">// [[[5,5],[5,5]],[[5,5],[5,5]]]</span></span><br></pre></td></tr></table></figure><h2 id="intersection"><a href="#intersection" class="headerlink" title="intersection"></a>intersection</h2><p>返回两个数组中都存在的元素数组。</p><p>从<code>b</code>创建一个集合，然后在<code>a</code>上使用<code>Array.prototype.filter()</code>来只保留<code>b</code>中包含的值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> intersection = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>(b);</span><br><span class="line">  <span class="keyword">return</span> a.filter(<span class="function"><span class="params">x</span> =&gt;</span> s.has(x));</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">intersection([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>]); <span class="comment">// [2, 3]</span></span><br></pre></td></tr></table></figure><h2 id="intersectionBy"><a href="#intersectionBy" class="headerlink" title="intersectionBy"></a>intersectionBy</h2><p>将给定的函数应用于两个数组中的每个数组元素后，返回执行函数后第一个数组和第二个数组中相同的值。</p><p><code>b</code>中的所有元素执行<code>fn</code>后创建一个集合，然后在<code>a</code>上使用<code>Array.prototype.filter()</code>来保留将执行<code>fn</code>后结果在b中的元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> intersectionBy = <span class="function">(<span class="params">a, b, fn</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>(b.map(fn));</span><br><span class="line">  <span class="keyword">return</span> a.filter(<span class="function"><span class="params">x</span> =&gt;</span> s.has(fn(x)));</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">intersectionBy([<span class="number">2.1</span>, <span class="number">1.2</span>], [<span class="number">2.3</span>, <span class="number">3.4</span>], <span class="built_in">Math</span>.floor); <span class="comment">// [2.1]</span></span><br></pre></td></tr></table></figure><h2 id="intersectionWith"><a href="#intersectionWith" class="headerlink" title="intersectionWith"></a>intersectionWith</h2><p>使用给定的函数返回两个数组中都通过的元素数组。</p><p>使用<code>Array.prototype.filter()</code>和<code>Array.prototype.findindex()</code>与所提供的函数结合使用来确定公共值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> intersectionWith = <span class="function">(<span class="params">a, b, comp</span>) =&gt;</span> a.filter(<span class="function"><span class="params">x</span> =&gt;</span> b.findIndex(<span class="function"><span class="params">y</span> =&gt;</span> comp(x, y)) !== <span class="number">-1</span>);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">intersectionWith([<span class="number">1</span>, <span class="number">1.2</span>, <span class="number">1.5</span>, <span class="number">3</span>, <span class="number">0</span>], [<span class="number">1.9</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">3.9</span>], (a, b) =&gt; <span class="built_in">Math</span>.round(a) === <span class="built_in">Math</span>.round(b)); <span class="comment">// [1.5, 3, 0]</span></span><br></pre></td></tr></table></figure><h2 id="isSorted"><a href="#isSorted" class="headerlink" title="isSorted"></a>isSorted</h2><p>如果数组按升序排序，则返回1；如果数组按降序排序，则返回-1；如果数组未排序，则返回0。</p><p>计算前两个元素的排序方向。使用<code>Object.entries()</code>循环数组元素并成对比较它们。如果方向改变，返回0；如果到达最后一个元素，返回排序方向。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isSorted = <span class="function"><span class="params">arr</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> direction = -(arr[<span class="number">0</span>] - arr[<span class="number">1</span>]);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> [i, val] <span class="keyword">of</span> arr.entries()) &#123;</span><br><span class="line">    direction = !direction ? -(arr[i - <span class="number">1</span>] - arr[i]) : direction;</span><br><span class="line">    <span class="keyword">if</span> (i === arr.length - <span class="number">1</span>) <span class="keyword">return</span> !direction ? <span class="number">0</span> : direction;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((val - arr[i + <span class="number">1</span>]) * direction &gt; <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">isSorted([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>]); <span class="comment">// 1</span></span><br><span class="line">isSorted([<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>]); <span class="comment">// -1</span></span><br><span class="line">isSorted([<span class="number">4</span>, <span class="number">3</span>, <span class="number">5</span>]); <span class="comment">// 0</span></span><br></pre></td></tr></table></figure><h2 id="join"><a href="#join" class="headerlink" title="join"></a>join</h2><p>将数组中的所有元素连接成一个字符串并返回该字符串。使用起始分隔符和末端分隔符。</p><p>使用<code>Array.prototype.reduce()</code>将元素组合成一个字符串。省略第二个参数<code>separator</code>时，将使用<code>,</code>作为默认分隔符。省略第三个参数<code>end</code>时，默认情况下使用与<code>separator</code>相同的值分隔。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> join = <span class="function">(<span class="params">arr, separator = <span class="string">','</span>, end = separator</span>) =&gt;</span></span><br><span class="line">  arr.reduce(</span><br><span class="line">    (acc, val, i) =&gt;</span><br><span class="line">      i === arr.length - <span class="number">2</span></span><br><span class="line">        ? acc + val + end</span><br><span class="line">        : i === arr.length - <span class="number">1</span></span><br><span class="line">          ? acc + val</span><br><span class="line">          : acc + val + separator,</span><br><span class="line">    <span class="string">''</span></span><br><span class="line">  );</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">join([<span class="string">'pen'</span>, <span class="string">'pineapple'</span>, <span class="string">'apple'</span>, <span class="string">'pen'</span>], <span class="string">','</span>, <span class="string">'&amp;'</span>); <span class="comment">// "pen,pineapple,apple&amp;pen"</span></span><br><span class="line">join([<span class="string">'pen'</span>, <span class="string">'pineapple'</span>, <span class="string">'apple'</span>, <span class="string">'pen'</span>], <span class="string">','</span>); <span class="comment">// "pen,pineapple,apple,pen"</span></span><br><span class="line">join([<span class="string">'pen'</span>, <span class="string">'pineapple'</span>, <span class="string">'apple'</span>, <span class="string">'pen'</span>]); <span class="comment">// "pen,pineapple,apple,pen"</span></span><br></pre></td></tr></table></figure><h2 id="JSONtoCSV"><a href="#JSONtoCSV" class="headerlink" title="JSONtoCSV"></a>JSONtoCSV</h2><p>将对象数组转换为仅包含指定<code>columns</code>的逗号分隔值(CSV)字符串。</p><p>使用<code>Array.prototype.join(分隔符)</code>将<code>columns</code>中的所有名称组合起来，创建第一行。使用<code>Array.prototype.map()</code>和<code>Array.prototype.reduce()</code>为每个对象创建一行，用空字符串替换不存在的值，只映射<code>columns</code>中的值。使用<code>Array.prototype.join(&#39;\n&#39;)</code>将所有行组合成一个字符串。省略第三个参数<code>delimiter</code>，将会使用默认分隔符<code>,</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> JSONtoCSV = <span class="function">(<span class="params">arr, columns, delimiter = <span class="string">','</span></span>) =&gt;</span></span><br><span class="line">  [</span><br><span class="line">    columns.join(delimiter),</span><br><span class="line">    ...arr.map(<span class="function"><span class="params">obj</span> =&gt;</span></span><br><span class="line">      columns.reduce(</span><br><span class="line">        (acc, key) =&gt; <span class="string">`<span class="subst">$&#123;acc&#125;</span><span class="subst">$&#123;!acc.length ? <span class="string">''</span> : delimiter&#125;</span>"<span class="subst">$&#123;!obj[key] ? <span class="string">''</span> : obj[key]&#125;</span>"`</span>,</span><br><span class="line">        <span class="string">''</span></span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">  ].join(<span class="string">'\n'</span>);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">JSONtoCSV([&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">a</span>: <span class="number">3</span>, <span class="attr">b</span>: <span class="number">4</span>, <span class="attr">c</span>: <span class="number">5</span> &#125;, &#123; <span class="attr">a</span>: <span class="number">6</span> &#125;, &#123; <span class="attr">b</span>: <span class="number">7</span> &#125;], [<span class="string">'a'</span>, <span class="string">'b'</span>]); <span class="comment">// 'a,b\n"1","2"\n"3","4"\n"6",""\n"","7"'</span></span><br><span class="line">JSONtoCSV([&#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">a</span>: <span class="number">3</span>, <span class="attr">b</span>: <span class="number">4</span>, <span class="attr">c</span>: <span class="number">5</span> &#125;, &#123; <span class="attr">a</span>: <span class="number">6</span> &#125;, &#123; <span class="attr">b</span>: <span class="number">7</span> &#125;], [<span class="string">'a'</span>, <span class="string">'b'</span>], <span class="string">';'</span>); <span class="comment">// 'a;b\n"1";"2"\n"3";"4"\n"6";""\n"";"7"'</span></span><br></pre></td></tr></table></figure><h2 id="last"><a href="#last" class="headerlink" title="last"></a>last</h2><p>返回数组中最后一个元素。</p><p>使用<code>arr.length - 1</code>计算给定数组的最后一个元素的索引并返回它。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> last = <span class="function"><span class="params">arr</span> =&gt;</span> arr[arr.length - <span class="number">1</span>];</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">last([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><h2 id="longestItem"><a href="#longestItem" class="headerlink" title="longestItem"></a>longestItem</h2><p>获取任意数量的可迭代对象或具有length属性的对象，并返回最长的对象。如果多个对象具有相同的长度，则将返回第一个对象。如果未提供参数，则返回<code>undefined</code>。</p><p>使用<code>Array.prototype.reduce()</code>，比较对象的长度以找到最长的对象。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> longestItem = <span class="function">(<span class="params">...vals</span>) =&gt;</span> vals.reduce(<span class="function">(<span class="params">a, x</span>) =&gt;</span> (x.length &gt; a.length ? x : a));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">longestItem(<span class="string">'this'</span>, <span class="string">'is'</span>, <span class="string">'a'</span>, <span class="string">'testcase'</span>); <span class="comment">// 'testcase'</span></span><br><span class="line">longestItem(...[<span class="string">'a'</span>, <span class="string">'ab'</span>, <span class="string">'abc'</span>]); <span class="comment">// 'abc'</span></span><br><span class="line">longestItem(...[<span class="string">'a'</span>, <span class="string">'ab'</span>, <span class="string">'abc'</span>], <span class="string">'abcd'</span>); <span class="comment">// 'abcd'</span></span><br><span class="line">longestItem([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">1</span>, <span class="number">2</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]); <span class="comment">// [1, 2, 3, 4, 5]</span></span><br><span class="line">longestItem([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="string">'foobar'</span>); <span class="comment">// 'foobar'</span></span><br></pre></td></tr></table></figure><h2 id="mapObject"><a href="#mapObject" class="headerlink" title="mapObject"></a>mapObject</h2><p>使用函数将数组的值映射到对象，其中键值对使用原始值作为键和计算后的映射值。</p><p>使用匿名内部函数声明未定义的内存空间，使用闭包存储返回值。使用一个新数组存储数组，新数组包含函数在传入数组上的映射，并使用逗号运算符返回第二步，而无需从一个上下文移动到另一个上下文(由于闭包和操作顺序)。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mapObject = <span class="function">(<span class="params">arr, fn</span>) =&gt;</span></span><br><span class="line">  (<span class="function"><span class="params">a</span> =&gt;</span> (</span><br><span class="line">    (a = [arr, arr.map(fn)]), a[<span class="number">0</span>].reduce(<span class="function">(<span class="params">acc, val, ind</span>) =&gt;</span> ((acc[val] = a[<span class="number">1</span>][ind]), acc), &#123;&#125;)</span><br><span class="line">  ))();</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> squareIt = <span class="function"><span class="params">arr</span> =&gt;</span> mapObject(arr, a =&gt; a * a);</span><br><span class="line">squareIt([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// &#123; 1: 1, 2: 4, 3: 9 &#125;</span></span><br></pre></td></tr></table></figure><h2 id="maxN"><a href="#maxN" class="headerlink" title="maxN"></a>maxN</h2><p>从提供的数组中返回n个最大的元素。如果n大于或等于提供的数组长度，则返回原始数组(按降序排序)。</p><p>将<code>Array.prototype.sort()</code>与扩展运算符(<code>...</code>)结合使用浅拷贝数组并按降序排序。使用<code>Array.prototype.slice()</code>获取指定数量的元素。省略第二个参数<code>n</code>，得到只有一个元素的数组。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> maxN = <span class="function">(<span class="params">arr, n = <span class="number">1</span></span>) =&gt;</span> [...arr].sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> b - a).slice(<span class="number">0</span>, n);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">maxN([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// [3]</span></span><br><span class="line">maxN([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">2</span>); <span class="comment">// [3,2]</span></span><br></pre></td></tr></table></figure><h2 id="minN"><a href="#minN" class="headerlink" title="minN"></a>minN</h2><p>从提供的数组中返回n个最小的元素。如果n大于或等于提供的数组长度，则返回原始数组(按升序排序)。</p><p>将<code>Array.prototype.sort()</code>与扩展运算符(<code>...</code>)结合使用浅拷贝数组并按升序排序。使用<code>Array.prototype.slice()</code>获取指定数量的元素。省略第二个参数<code>n</code>，得到只有一个元素的数组。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> minN = <span class="function">(<span class="params">arr, n = <span class="number">1</span></span>) =&gt;</span> [...arr].sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b).slice(<span class="number">0</span>, n);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">minN([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// [1]</span></span><br><span class="line">minN([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">2</span>); <span class="comment">// [1,2]</span></span><br></pre></td></tr></table></figure><h2 id="none"><a href="#none" class="headerlink" title="none"></a>none</h2><p>如果集合中的所有元素执行给定的函数后都返回false，则返回true，否则返回false。</p><p>使用<code>Array.prototype.some()</code>测试集合中的任何元素是否基于<code>fn</code>返回<code>true</code>。省略第二个参数<code>fn</code>，将使用<code>Boolean</code>作为默认值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> none = <span class="function">(<span class="params">arr, fn = <span class="built_in">Boolean</span></span>) =&gt;</span> !arr.some(fn);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">none([<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">0</span>], x =&gt; x == <span class="number">2</span>); <span class="comment">// true</span></span><br><span class="line">none([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="nthElement"><a href="#nthElement" class="headerlink" title="nthElement"></a>nthElement</h2><p>返回数组的第n个元素。</p><p>使用<code>Array.prototype.slice()</code>首先获得包含第n个元素的数组。如果索引超出范围，则返回<code>undefined</code>。省略第二个参数<code>n</code>，取数组的第一个元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onst nthElement = <span class="function">(<span class="params">arr, n = <span class="number">0</span></span>) =&gt;</span> (n === <span class="number">-1</span> ? arr.slice(n) : arr.slice(n, n + <span class="number">1</span>))[<span class="number">0</span>];</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">nthElement([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>], <span class="number">1</span>); <span class="comment">// 'b'</span></span><br><span class="line">nthElement([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'b'</span>], <span class="number">-3</span>); <span class="comment">// 'a'</span></span><br></pre></td></tr></table></figure><h2 id="offset"><a href="#offset" class="headerlink" title="offset"></a>offset</h2><p>将指定数量的元素移动到数组的末尾。</p><p>使用两次<code>Array.prototype.slice()</code>获得指定索引之后的元素和指定索引之前的元素。使用扩展运算符(<code>...</code>)将两者组合成一个数组。如果<code>offset</code>为负数，则元素将从尾部移动到头部。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> offset = <span class="function">(<span class="params">arr, offset</span>) =&gt;</span> [...arr.slice(offset), ...arr.slice(<span class="number">0</span>, offset)];</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">offset([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], <span class="number">2</span>); <span class="comment">// [3, 4, 5, 1, 2]</span></span><br><span class="line">offset([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], <span class="number">-2</span>); <span class="comment">// [4, 5, 1, 2, 3]</span></span><br></pre></td></tr></table></figure><h2 id="partition"><a href="#partition" class="headerlink" title="partition"></a>partition</h2><p>根据每个元素执行函数后返回的布尔值，将元素分成两类数组。</p><p>使用<code>Array.prototype.reduce()</code>创建一个由两个数组组成的数组。使用<code>Array.prototype.push()</code>将<code>fn</code>返回<code>true</code>的元素添加到第一个数组，将<code>fn</code>返回<code>false</code>的元素添加到第二个数组。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> partition = <span class="function">(<span class="params">arr, fn</span>) =&gt;</span></span><br><span class="line">  arr.reduce(</span><br><span class="line">    (acc, val, i, arr) =&gt; &#123;</span><br><span class="line">      acc[fn(val, i, arr) ? <span class="number">0</span> : <span class="number">1</span>].push(val);</span><br><span class="line">      <span class="keyword">return</span> acc;</span><br><span class="line">    &#125;,</span><br><span class="line">    [[], []]</span><br><span class="line">  );</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> users = [&#123; <span class="attr">user</span>: <span class="string">'barney'</span>, <span class="attr">age</span>: <span class="number">36</span>, <span class="attr">active</span>: <span class="literal">false</span> &#125;, &#123; <span class="attr">user</span>: <span class="string">'fred'</span>, <span class="attr">age</span>: <span class="number">40</span>, <span class="attr">active</span>: <span class="literal">true</span> &#125;];</span><br><span class="line">partition(users, o =&gt; o.active); <span class="comment">// [[&#123; 'user': 'fred',    'age': 40, 'active': true &#125;],[&#123; 'user': 'barney',  'age': 36, 'active': false &#125;]]</span></span><br></pre></td></tr></table></figure><h2 id="permutations"><a href="#permutations" class="headerlink" title="permutations"></a>permutations</h2><p>警告：这个函数的执行时间随着数组元素的增加呈指数增长。当浏览器试图计算所有不同的组合时，超过8到10个条目都会导致浏览器挂起。</p><p>生成数组元素的所有组合(包含重复元素)。</p><p>使用递归。对给定数组中进行元素遍历，为剩余元素创建所有的组合。使用<code>Array.prototype.map()</code>将该元素与剩余部分排列组合起来，然后使用<code>Array.prototype.reduce()</code>将所有排列组合成一个数组。一般情况是数组长度为2或1。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> permutations = <span class="function"><span class="params">arr</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (arr.length &lt;= <span class="number">2</span>) <span class="keyword">return</span> arr.length === <span class="number">2</span> ? [arr, [arr[<span class="number">1</span>], arr[<span class="number">0</span>]]] : arr;</span><br><span class="line">  <span class="keyword">return</span> arr.reduce(</span><br><span class="line">    (acc, item, i) =&gt;</span><br><span class="line">      acc.concat(</span><br><span class="line">        permutations([...arr.slice(<span class="number">0</span>, i), ...arr.slice(i + <span class="number">1</span>)]).map(<span class="function"><span class="params">val</span> =&gt;</span> [item, ...val])</span><br><span class="line">      ),</span><br><span class="line">    []</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">permutations([<span class="number">1</span>, <span class="number">33</span>, <span class="number">5</span>]); <span class="comment">// [ [ 1, 33, 5 ], [ 1, 5, 33 ], [ 33, 1, 5 ], [ 33, 5, 1 ], [ 5, 1, 33 ], [ 5, 33, 1 ] ]</span></span><br></pre></td></tr></table></figure><h2 id="pull"><a href="#pull" class="headerlink" title="pull"></a>pull</h2><p>变异原数组以过滤掉指定的值。</p><p>使用<code>Array.prototype.filter()</code>和<code>Array.prototype.include()</code>提取不需要的值。使用<code>Array.protototype.length = 0</code>将将数组的长度重置为零来对数组中传递的值进行变异，并使用<code>Array.prototype.push()</code>重新填充该值。</p><p>(对于不改变原始数组的代码片段，请参见<a href="#without">without</a>)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pull = <span class="function">(<span class="params">arr, ...args</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> argState = <span class="built_in">Array</span>.isArray(args[<span class="number">0</span>]) ? args[<span class="number">0</span>] : args;</span><br><span class="line">  <span class="keyword">let</span> pulled = arr.filter(<span class="function">(<span class="params">v, i</span>) =&gt;</span> !argState.includes(v));</span><br><span class="line">  arr.length = <span class="number">0</span>;</span><br><span class="line">  pulled.forEach(<span class="function"><span class="params">v</span> =&gt;</span> arr.push(v));</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">let</span> myArray = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>];</span><br><span class="line">pull(myArray, <span class="string">'a'</span>, <span class="string">'c'</span>); <span class="comment">// myArray = [ 'b', 'b' ]</span></span><br></pre></td></tr></table></figure><h2 id="pullAtIndex"><a href="#pullAtIndex" class="headerlink" title="pullAtIndex"></a>pullAtIndex</h2><p>变异原数组以筛选出指定索引处的值。</p><p>使用<code>Array.prototype.filter()</code>和<code>Array.prototype.include()</code>提取不需要的值。使用<code>Array.protototype.length = 0</code>将数组的长度重置为零来对数组中传递的值进行变异，并使用<code>Array.prototype.push()</code>重新填充该值。使用<code>Array.prototype.push()</code>来跟踪所提取的值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pullAtIndex = <span class="function">(<span class="params">arr, pullArr</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> removed = [];</span><br><span class="line">  <span class="keyword">let</span> pulled = arr</span><br><span class="line">    .map(<span class="function">(<span class="params">v, i</span>) =&gt;</span> (pullArr.includes(i) ? removed.push(v) : v))</span><br><span class="line">    .filter(<span class="function">(<span class="params">v, i</span>) =&gt;</span> !pullArr.includes(i));</span><br><span class="line">  arr.length = <span class="number">0</span>;</span><br><span class="line">  pulled.forEach(<span class="function"><span class="params">v</span> =&gt;</span> arr.push(v));</span><br><span class="line">  <span class="keyword">return</span> removed;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">let</span> myArray = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>];</span><br><span class="line"><span class="keyword">let</span> pulled = pullAtIndex(myArray, [<span class="number">1</span>, <span class="number">3</span>]); <span class="comment">// myArray = [ 'a', 'c' ] , pulled = [ 'b', 'd' ]</span></span><br></pre></td></tr></table></figure><h2 id="pullAtValue"><a href="#pullAtValue" class="headerlink" title="pullAtValue"></a>pullAtValue</h2><p>变异原数组以过滤掉指定的值。返回删除的元素。</p><p>使用<code>Array.prototype.filter()</code>和<code>Array.prototype.include()</code>提取不需要的值。使用<code>Array.protototype.length = 0</code>将数组的长度重置为零来对数组中传递的值进行变异，并使用<code>Array.prototype.push()</code>重新填充该值。使用<code>Array.prototype.push()</code>来跟踪所提取的值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pullAtValue = <span class="function">(<span class="params">arr, pullArr</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> removed = [],</span><br><span class="line">    pushToRemove = arr.forEach(<span class="function">(<span class="params">v, i</span>) =&gt;</span> (pullArr.includes(v) ? removed.push(v) : v)),</span><br><span class="line">    mutateTo = arr.filter(<span class="function">(<span class="params">v, i</span>) =&gt;</span> !pullArr.includes(v));</span><br><span class="line">  arr.length = <span class="number">0</span>;</span><br><span class="line">  mutateTo.forEach(<span class="function"><span class="params">v</span> =&gt;</span> arr.push(v));</span><br><span class="line">  <span class="keyword">return</span> removed;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">let</span> myArray = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>];</span><br><span class="line"><span class="keyword">let</span> pulled = pullAtValue(myArray, [<span class="string">'b'</span>, <span class="string">'d'</span>]); <span class="comment">// myArray = [ 'a', 'c' ] , pulled = [ 'b', 'd' ]</span></span><br></pre></td></tr></table></figure><h2 id="pullBy"><a href="#pullBy" class="headerlink" title="pullBy"></a>pullBy</h2><p>基于给定的迭代函数，对原始数组进行变异以过滤掉指定的值。</p><p>检查函数中是否提供了最后一个参数。使用<code>Array.prototype.map()</code>将迭代函数<code>fn</code>应用于所有数组元素。使用<code>Array.prototype.filter()</code>和<code>Array.prototype.include()</code>提取不需要的值。使用<code>Array.protototype.length = 0</code>将数组的长度重置为零来对数组中传递的值进行变异，并使用<code>Array.prototype.push()</code>重新填充该值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pullBy = <span class="function">(<span class="params">arr, ...args</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> length = args.length;</span><br><span class="line">  <span class="keyword">let</span> fn = length &gt; <span class="number">1</span> ? args[length - <span class="number">1</span>] : <span class="literal">undefined</span>;</span><br><span class="line">  fn = <span class="keyword">typeof</span> fn == <span class="string">'function'</span> ? (args.pop(), fn) : <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">let</span> argState = (<span class="built_in">Array</span>.isArray(args[<span class="number">0</span>]) ? args[<span class="number">0</span>] : args).map(<span class="function"><span class="params">val</span> =&gt;</span> fn(val));</span><br><span class="line">  <span class="keyword">let</span> pulled = arr.filter(<span class="function">(<span class="params">v, i</span>) =&gt;</span> !argState.includes(fn(v)));</span><br><span class="line">  arr.length = <span class="number">0</span>;</span><br><span class="line">  pulled.forEach(<span class="function"><span class="params">v</span> =&gt;</span> arr.push(v));</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">var</span> myArray = [&#123; <span class="attr">x</span>: <span class="number">1</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">3</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">1</span> &#125;];</span><br><span class="line">pullBy(myArray, [&#123; <span class="attr">x</span>: <span class="number">1</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">3</span> &#125;], o =&gt; o.x); <span class="comment">// myArray = [&#123; x: 2 &#125;]</span></span><br></pre></td></tr></table></figure><h2 id="reducedFilter"><a href="#reducedFilter" class="headerlink" title="reducedFilter"></a>reducedFilter</h2><p>基于条件过滤对象数组，同时过滤掉未指定的键。</p><p>使用<code>Array.prototype.filter()</code>根据函数<code>fn</code>过滤数组，返回满足条件的对象。在过滤后的数组上，使用<code>Array.prototype.map()</code>返回新对象，使用<code>Array.prototype.reduce()</code>过滤掉未作为键参数提供的键。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reducedFilter = <span class="function">(<span class="params">data, keys, fn</span>) =&gt;</span></span><br><span class="line">  data.filter(fn).map(<span class="function"><span class="params">el</span> =&gt;</span></span><br><span class="line">    keys.reduce(<span class="function">(<span class="params">acc, key</span>) =&gt;</span> &#123;</span><br><span class="line">      acc[key] = el[key];</span><br><span class="line">      <span class="keyword">return</span> acc;</span><br><span class="line">    &#125;, &#123;&#125;)</span><br><span class="line">  );</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> data = [</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="number">1</span>,</span><br><span class="line">    name: <span class="string">'john'</span>,</span><br><span class="line">    age: <span class="number">24</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    id: <span class="number">2</span>,</span><br><span class="line">    name: <span class="string">'mike'</span>,</span><br><span class="line">    age: <span class="number">50</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">reducedFilter(data, [<span class="string">'id'</span>, <span class="string">'name'</span>], item =&gt; item.age &gt; <span class="number">24</span>); <span class="comment">// [&#123; id: 2, name: 'mike'&#125;]</span></span><br></pre></td></tr></table></figure><h2 id="reduceSuccessive"><a href="#reduceSuccessive" class="headerlink" title="reduceSuccessive"></a>reduceSuccessive</h2><p>对累加器和数组中的每个元素应用一个函数(从左到右)，返回一个值变大的数组。</p><p>使用<code>Array.prototype.reduce()</code>将给定的函数应用于数组，存储每个新的结果。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reduceSuccessive = <span class="function">(<span class="params">arr, fn, acc</span>) =&gt;</span></span><br><span class="line">  arr.reduce(<span class="function">(<span class="params">res, val, i, arr</span>) =&gt;</span> (res.push(fn(res.slice(<span class="number">-1</span>)[<span class="number">0</span>], val, i, arr)), res), [acc]);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">reduceSuccessive([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], (acc, val) =&gt; acc + val, <span class="number">0</span>); <span class="comment">// [0, 1, 3, 6, 10, 15, 21]</span></span><br></pre></td></tr></table></figure><h2 id="reduceWhich"><a href="#reduceWhich" class="headerlink" title="reduceWhich"></a>reduceWhich</h2><p>应用提供的函数设置比较规则后，返回数组的最小值/最大值。</p><p>将<code>Array.prototype.reduce()</code>与<code>comparator</code>函数结合使用，在数组中取得对应的元素。可以省略第二个参数，使用返回数组中最小元素作为默认参数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 简直精髓</span></span><br><span class="line"><span class="keyword">const</span> reduceWhich = <span class="function">(<span class="params">arr, comparator = (a, b</span>) =&gt;</span> a - b) =&gt;</span><br><span class="line">  arr.reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> (comparator(a, b) &gt;= <span class="number">0</span> ? b : a));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">reduceWhich([<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>]); <span class="comment">// 1</span></span><br><span class="line">reduceWhich([<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>], (a, b) =&gt; b - a); <span class="comment">// 3</span></span><br><span class="line">reduceWhich(</span><br><span class="line">  [&#123; <span class="attr">name</span>: <span class="string">'Tom'</span>, <span class="attr">age</span>: <span class="number">12</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">'Jack'</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">'Lucy'</span>, <span class="attr">age</span>: <span class="number">9</span> &#125;],</span><br><span class="line">  (a, b) =&gt; a.age - b.age</span><br><span class="line">); <span class="comment">// &#123;name: "Lucy", age: 9&#125;</span></span><br></pre></td></tr></table></figure><h2 id="reject"><a href="#reject" class="headerlink" title="reject"></a>reject</h2><p>接收函数和数组，使用<code>Array.prototype.Filter()</code>，但仅在<code>pred(x) = false</code>时保留<code>x</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reject = <span class="function">(<span class="params">pred, array</span>) =&gt;</span> array.filter(<span class="function">(<span class="params">...args</span>) =&gt;</span> !pred(...args));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">reject(<span class="function"><span class="params">x</span> =&gt;</span> x % <span class="number">2</span> === <span class="number">0</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]); <span class="comment">// [1, 3, 5]</span></span><br><span class="line">reject(<span class="function"><span class="params">word</span> =&gt;</span> word.length &gt; <span class="number">4</span>, [<span class="string">'Apple'</span>, <span class="string">'Pear'</span>, <span class="string">'Kiwi'</span>, <span class="string">'Banana'</span>]); <span class="comment">// ['Pear', 'Kiwi']</span></span><br></pre></td></tr></table></figure><h2 id="remove"><a href="#remove" class="headerlink" title="remove"></a>remove</h2><p>从数组中移除给定函数返回false的元素。</p><p>使用<code>Array.prototype.filter()</code>查找返回真值的数组元素，使用<code>Array.prototype.splice()</code>删除元素。函数是用三个参数(值、索引、数组)调用的。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> remove = <span class="function">(<span class="params">arr, func</span>) =&gt;</span></span><br><span class="line">  <span class="built_in">Array</span>.isArray(arr)</span><br><span class="line">    ? arr.filter(func).reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> &#123;</span><br><span class="line">      arr.splice(arr.indexOf(val), <span class="number">1</span>);</span><br><span class="line">      <span class="keyword">return</span> acc.concat(val);</span><br><span class="line">    &#125;, [])</span><br><span class="line">    : [];</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">remove([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], n =&gt; n % <span class="number">2</span> === <span class="number">0</span>); <span class="comment">// [2, 4]</span></span><br></pre></td></tr></table></figure><h2 id="sample"><a href="#sample" class="headerlink" title="sample"></a>sample</h2><p>从数组中返回随机元素</p><p>使用<code>Math.random()</code>生成一个随机数，并乘上数组长度，然后使用<code>Math.floor()</code>向下取整。这个方法也适用于字符串。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sample = <span class="function"><span class="params">arr</span> =&gt;</span> arr[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * arr.length)];</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">sample([<span class="number">3</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">11</span>]); <span class="comment">// 9</span></span><br></pre></td></tr></table></figure><h2 id="sampleSize"><a href="#sampleSize" class="headerlink" title="sampleSize"></a>sampleSize</h2><p>从数组中以唯一键获取n个随机元素，直到数组结束。</p><p>使用<a href="https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle" rel="external nofollow noopener noreferrer" target="_blank">Fisher-Yates</a>算法洗牌数组。使用<code>Array.prototype.slice()</code>获得前<code>n</code>个元素。省略第二个参数<code>n</code>，从数组中获取第一个元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sampleSize = <span class="function">(<span class="params">[...arr], n = <span class="number">1</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> m = arr.length;</span><br><span class="line">  <span class="keyword">while</span> (m) &#123;</span><br><span class="line">    <span class="keyword">const</span> i = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * m--);</span><br><span class="line">    [arr[m], arr[i]] = [arr[i], arr[m]];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr.slice(<span class="number">0</span>, n);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">sampleSize([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">2</span>); <span class="comment">// [3,1]</span></span><br><span class="line">sampleSize([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>); <span class="comment">// [2,3,1]</span></span><br></pre></td></tr></table></figure><h2 id="shank"><a href="#shank" class="headerlink" title="shank"></a>shank</h2><p>和<code>Array.prototype.splice()</code>功能相同，但是返回一个新的数组，而不是改变原始数组。</p><p>在移除现有元素/添加新元素后，使用<code>Array.prototype.slice()</code>和<code>Array.prototype .concat()</code>获得包含新内容的新数组。省略第二个参数<code>index</code>，则从<code>0</code>开始。省略第三个参数<code>DelCount</code>，不删除元素。省略第四个参数元素，不添加新元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> shank = <span class="function">(<span class="params">arr, index = <span class="number">0</span>, delCount = <span class="number">0</span>, ...elements</span>) =&gt;</span></span><br><span class="line">  arr</span><br><span class="line">    .slice(<span class="number">0</span>, index)</span><br><span class="line">    .concat(elements)</span><br><span class="line">    .concat(arr.slice(index + delCount));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> names = [<span class="string">'alpha'</span>, <span class="string">'bravo'</span>, <span class="string">'charlie'</span>];</span><br><span class="line"><span class="keyword">const</span> namesAndDelta = shank(names, <span class="number">1</span>, <span class="number">0</span>, <span class="string">'delta'</span>); <span class="comment">// [ 'alpha', 'delta', 'bravo', 'charlie' ]</span></span><br><span class="line"><span class="keyword">const</span> namesNoBravo = shank(names, <span class="number">1</span>, <span class="number">1</span>); <span class="comment">// [ 'alpha', 'charlie' ]</span></span><br><span class="line"><span class="built_in">console</span>.log(names); <span class="comment">// ['alpha', 'bravo', 'charlie']</span></span><br></pre></td></tr></table></figure><h2 id="shuffle"><a href="#shuffle" class="headerlink" title="shuffle"></a>shuffle</h2><p>随机排列数组值的顺序，返回一个新数组。</p><p>使用<a href="https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle" rel="external nofollow noopener noreferrer" target="_blank">Fisher-Yates</a>算法对数组元素重新排序。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> shuffle = <span class="function">(<span class="params">[...arr]</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> m = arr.length;</span><br><span class="line">  <span class="keyword">while</span> (m) &#123;</span><br><span class="line">    <span class="keyword">const</span> i = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * m--);</span><br><span class="line">    [arr[m], arr[i]] = [arr[i], arr[m]];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> foo = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">shuffle(foo); <span class="comment">// [2, 3, 1], foo = [1, 2, 3]</span></span><br></pre></td></tr></table></figure><h2 id="similarity"><a href="#similarity" class="headerlink" title="similarity"></a>similarity</h2><p>返回出现在两个数组中的元素数组。</p><p>使用<code>Array.prototype.filter()</code>过滤非公共值，这些值是由<code>Array.prototype.include()</code>确定的。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> similarity = <span class="function">(<span class="params">arr, values</span>) =&gt;</span> arr.filter(<span class="function"><span class="params">v</span> =&gt;</span> values.includes(v));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">similarity([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>]); <span class="comment">// [1, 2]</span></span><br></pre></td></tr></table></figure><h2 id="sortedIndex"><a href="#sortedIndex" class="headerlink" title="sortedIndex"></a>sortedIndex</h2><p>返回将值插入数组后仍保持其排序顺序的索引。</p><p>检查数组是否按降序排序。使用<code>Array.prototype.findIndex()</code>找到元素应该插入的索引。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sortedIndex = <span class="function">(<span class="params">arr, n</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> isDescending = arr[<span class="number">0</span>] &gt; arr[arr.length - <span class="number">1</span>];</span><br><span class="line">  <span class="keyword">const</span> index = arr.findIndex(<span class="function"><span class="params">el</span> =&gt;</span> (isDescending ? n &gt;= el : n &lt;= el));</span><br><span class="line">  <span class="keyword">return</span> index === <span class="number">-1</span> ? arr.length : index;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">sortedIndex([<span class="number">5</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>], <span class="number">4</span>); <span class="comment">// 1</span></span><br><span class="line">sortedIndex([<span class="number">30</span>, <span class="number">50</span>], <span class="number">40</span>); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><h2 id="sortedIndexBy"><a href="#sortedIndexBy" class="headerlink" title="sortedIndexBy"></a>sortedIndexBy</h2><p>基于提供的函数，返回将值插入数组后仍保持其排序顺序的索引。</p><p>检查数组是否按降序排序。根据函数<code>fn</code>，使用<code>Array.prototype.findIndex()</code>找到元素应该插入的适当索引。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sortedIndexBy = <span class="function">(<span class="params">arr, n, fn</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> isDescending = fn(arr[<span class="number">0</span>]) &gt; fn(arr[arr.length - <span class="number">1</span>]);</span><br><span class="line">  <span class="keyword">const</span> val = fn(n);</span><br><span class="line">  <span class="keyword">const</span> index = arr.findIndex(<span class="function"><span class="params">el</span> =&gt;</span> (isDescending ? val &gt;= fn(el) : val &lt;= fn(el)));</span><br><span class="line">  <span class="keyword">return</span> index === <span class="number">-1</span> ? arr.length : index;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">sortedIndexBy([&#123; <span class="attr">x</span>: <span class="number">4</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">5</span> &#125;], &#123; <span class="attr">x</span>: <span class="number">4</span> &#125;, o =&gt; o.x); <span class="comment">// 0</span></span><br></pre></td></tr></table></figure><h2 id="sortedLastIndex"><a href="#sortedLastIndex" class="headerlink" title="sortedLastIndex"></a>sortedLastIndex</h2><p>返回最后索引，在该索引处，值插入数组保持其排序顺序。</p><p>检查数组是否按降序排序。使用<code>Array.prototype.reverse()</code>和<code>Array.prototype.findIndex()</code>找到元素应该插入的最后一个索引。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sortedLastIndex = <span class="function">(<span class="params">arr, n</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> isDescending = arr[<span class="number">0</span>] &gt; arr[arr.length - <span class="number">1</span>];</span><br><span class="line">  <span class="keyword">const</span> index = arr.reverse().findIndex(<span class="function"><span class="params">el</span> =&gt;</span> (isDescending ? n &lt;= el : n &gt;= el));</span><br><span class="line">  <span class="keyword">return</span> index === <span class="number">-1</span> ? <span class="number">0</span> : arr.length - index;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">sortedLastIndex([<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">30</span>, <span class="number">40</span>], <span class="number">30</span>); <span class="comment">// 4</span></span><br></pre></td></tr></table></figure><h2 id="sortedLastIndexBy"><a href="#sortedLastIndexBy" class="headerlink" title="sortedLastIndexBy"></a>sortedLastIndexBy</h2><p>基于提供的函数，返回当值插入数组后保持其排序顺序的最后索引。</p><p>检查数组是否按降序排序。使用<code>Array.prototype.map()</code>将函数应用于数组的所有元素。使用<code>Array.prototype.reverse()</code>和<code>Array.prototype.findIndex()</code>根据提供的函数，找到元素应该插入的最后一个索引。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sortedLastIndexBy = <span class="function">(<span class="params">arr, n, fn</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> isDescending = fn(arr[<span class="number">0</span>]) &gt; fn(arr[arr.length - <span class="number">1</span>]);</span><br><span class="line">  <span class="keyword">const</span> val = fn(n);</span><br><span class="line">  <span class="keyword">const</span> index = arr</span><br><span class="line">    .map(fn)</span><br><span class="line">    .reverse()</span><br><span class="line">    .findIndex(<span class="function"><span class="params">el</span> =&gt;</span> (isDescending ? val &lt;= el : val &gt;= el));</span><br><span class="line">  <span class="keyword">return</span> index === <span class="number">-1</span> ? <span class="number">0</span> : arr.length - index;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">sortedLastIndexBy([&#123; <span class="attr">x</span>: <span class="number">4</span> &#125;, &#123; <span class="attr">x</span>: <span class="number">5</span> &#125;], &#123; <span class="attr">x</span>: <span class="number">4</span> &#125;, o =&gt; o.x); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><h2 id="stableSort"><a href="#stableSort" class="headerlink" title="stableSort"></a>stableSort</h2><p>对数组执行排序，当项目的值相同时，保留项目的初始索引。不改变原始数组，返回一个新数组。</p><p>使用<code>Array.prototype.map()</code>将输入数组的每个元素与其对应的索引配对。使用<code>Array.prototype.sort()</code>和<code>compare</code>函数对数组进行排序，如果比较的项目相等，则保留它们的初始顺序。使用<code>Array.prototype.map()</code>转换回初始数组。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> stableSort = <span class="function">(<span class="params">arr, compare</span>) =&gt;</span></span><br><span class="line">  arr</span><br><span class="line">    .map(<span class="function">(<span class="params">item, index</span>) =&gt;</span> (&#123; item, index &#125;))</span><br><span class="line">    .sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> compare(a.item, b.item) || a.index - b.index)</span><br><span class="line">    .map(<span class="function">(<span class="params">&#123; item &#125;</span>) =&gt;</span> item);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>];</span><br><span class="line"><span class="keyword">const</span> stable = stableSort(arr, () =&gt; <span class="number">0</span>); <span class="comment">// [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span></span><br></pre></td></tr></table></figure><h2 id="symmetricDifference"><a href="#symmetricDifference" class="headerlink" title="symmetricDifference"></a>symmetricDifference</h2><p>返回两个数组之间的不同的值，没有滤掉重复值。</p><p>每个数组创建一个<code>Set</code>，然后在每个数组上使用<code>Array.prototype.filter()</code>来保留另一个数组中不包含的值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> symmetricDifference = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> sA = <span class="keyword">new</span> <span class="built_in">Set</span>(a),</span><br><span class="line">    sB = <span class="keyword">new</span> <span class="built_in">Set</span>(b);</span><br><span class="line">  <span class="keyword">return</span> [...a.filter(<span class="function"><span class="params">x</span> =&gt;</span> !sB.has(x)), ...b.filter(<span class="function"><span class="params">x</span> =&gt;</span> !sA.has(x))];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">symmetricDifference([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>]); <span class="comment">// [3, 4]</span></span><br><span class="line">symmetricDifference([<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>], [<span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>]); <span class="comment">// [2, 2, 3]</span></span><br></pre></td></tr></table></figure><h2 id="symmetricDifferenceBy"><a href="#symmetricDifferenceBy" class="headerlink" title="symmetricDifferenceBy"></a>symmetricDifferenceBy</h2><p>将给定的函数应用于两个数组的每个元素后，返回两个数组之间不同的值。</p><p>每个数组元素执行<code>fn</code>后创建一个集合，然后在每个元素上使用<code>Array.prototype.filter()</code>来只保留另一个元素中不包含的值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> symmetricDifferenceBy = <span class="function">(<span class="params">a, b, fn</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> sA = <span class="keyword">new</span> <span class="built_in">Set</span>(a.map(<span class="function"><span class="params">v</span> =&gt;</span> fn(v))),</span><br><span class="line">    sB = <span class="keyword">new</span> <span class="built_in">Set</span>(b.map(<span class="function"><span class="params">v</span> =&gt;</span> fn(v)));</span><br><span class="line">  <span class="keyword">return</span> [...a.filter(<span class="function"><span class="params">x</span> =&gt;</span> !sB.has(fn(x))), ...b.filter(<span class="function"><span class="params">x</span> =&gt;</span> !sA.has(fn(x)))];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">symmetricDifferenceBy([<span class="number">2.1</span>, <span class="number">1.2</span>], [<span class="number">2.3</span>, <span class="number">3.4</span>], <span class="built_in">Math</span>.floor); <span class="comment">// [ 1.2, 3.4 ]</span></span><br></pre></td></tr></table></figure><h2 id="symmetricDifferenceWith"><a href="#symmetricDifferenceWith" class="headerlink" title="symmetricDifferenceWith"></a>symmetricDifferenceWith</h2><p>使用提供的函数作为比较器，返回两个数组之间的不同的值。</p><p>使用<code>Array.prototype.filter()</code>和<code>Array.prototype.findIndex()</code>查找适当的值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> symmetricDifferenceWith = <span class="function">(<span class="params">arr, val, comp</span>) =&gt;</span> [</span><br><span class="line">  ...arr.filter(<span class="function"><span class="params">a</span> =&gt;</span> val.findIndex(<span class="function"><span class="params">b</span> =&gt;</span> comp(a, b)) === <span class="number">-1</span>),</span><br><span class="line">  ...val.filter(<span class="function"><span class="params">a</span> =&gt;</span> arr.findIndex(<span class="function"><span class="params">b</span> =&gt;</span> comp(a, b)) === <span class="number">-1</span>)</span><br><span class="line">];</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">symmetricDifferenceWith(</span><br><span class="line">  [<span class="number">1</span>, <span class="number">1.2</span>, <span class="number">1.5</span>, <span class="number">3</span>, <span class="number">0</span>],</span><br><span class="line">  [<span class="number">1.9</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">3.9</span>],</span><br><span class="line">  (a, b) =&gt; <span class="built_in">Math</span>.round(a) === <span class="built_in">Math</span>.round(b)</span><br><span class="line">); <span class="comment">// [1, 1.2, 3.9]</span></span><br></pre></td></tr></table></figure><h2 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h2><p>返回数组中除第一个元素以外的所有元素。</p><p>如果数组长度大于1，则返回<code>Array.prototype.slice(1)</code>，否则返回整个数组。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> tail = <span class="function"><span class="params">arr</span> =&gt;</span> (arr.length &gt; <span class="number">1</span> ? arr.slice(<span class="number">1</span>) : arr);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">tail([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// [2,3]</span></span><br><span class="line">tail([<span class="number">1</span>]); <span class="comment">// [1]</span></span><br></pre></td></tr></table></figure><h2 id="take"><a href="#take" class="headerlink" title="take"></a>take</h2><p>返回从开头移除n个元素后的数组。</p><p>使用<code>Array.prototype.slice()</code>返回第<code>n</code>个元素后的元素浅拷贝。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> take = <span class="function">(<span class="params">arr, n = <span class="number">1</span></span>) =&gt;</span> arr.slice(<span class="number">0</span>, n);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">take([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">5</span>); <span class="comment">// [1, 2, 3]</span></span><br><span class="line">take([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">0</span>); <span class="comment">// []</span></span><br></pre></td></tr></table></figure><h2 id="takeRight"><a href="#takeRight" class="headerlink" title="takeRight"></a>takeRight</h2><p>返回从末尾数n个元素后的数组。</p><p>使用<code>Array.prototype.slice()</code>返回从末尾数<code>n</code>个元素后的元素浅拷贝。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> takeRight = <span class="function">(<span class="params">arr, n = <span class="number">1</span></span>) =&gt;</span> arr.slice(arr.length - n, arr.length);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">takeRight([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">2</span>); <span class="comment">// [ 2, 3 ]</span></span><br><span class="line">takeRight([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// [3]</span></span><br></pre></td></tr></table></figure><h2 id="takeRightWhile"><a href="#takeRightWhile" class="headerlink" title="takeRightWhile"></a>takeRightWhile</h2><p>从数组末尾移除元素，直到传递的函数返回<code>true</code>。返回移除的元素。</p><p>当函数返回<code>false</code>值时，使用<code>Array.prototype.reduceRight()</code>循环遍历数组并累积元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> takeRightWhile = <span class="function">(<span class="params">arr, func</span>) =&gt;</span></span><br><span class="line">  arr.reduceRight(<span class="function">(<span class="params">acc, el</span>) =&gt;</span> (func(el) ? acc : [el, ...acc]), []); <span class="comment">// reduceRight 从右到左遍历</span></span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">takeRightWhile([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], n =&gt; n &lt; <span class="number">3</span>); <span class="comment">// [3, 4]</span></span><br></pre></td></tr></table></figure><h2 id="takeWhile"><a href="#takeWhile" class="headerlink" title="takeWhile"></a>takeWhile</h2><p>正向移除数组中的元素，直到传递的函数返回<code>true</code>。返回移除的元素。</p><p>使用<code>for...of</code>循环数组直到函数返回值为<code>true</code>。使用<code>Array.prototype.slice()</code>返回移除的元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> takeWhile = <span class="function">(<span class="params">arr, func</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> [i, val] <span class="keyword">of</span> arr.entries()) <span class="keyword">if</span> (func(val)) <span class="keyword">return</span> arr.slice(<span class="number">0</span>, i);</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">takeWhile([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], n =&gt; n &gt;= <span class="number">3</span>); <span class="comment">// [1, 2]</span></span><br></pre></td></tr></table></figure><h2 id="toHash"><a href="#toHash" class="headerlink" title="toHash"></a>toHash</h2><p>将给定的类数组转化为哈希表(键控数据存储)。</p><p>给定一个可迭代的或类似数组的结构，在提供的对象上调用<code>Array.prototype.reduce.call ()</code>，跨过它并返回一个对象，该对象由引用值键入。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> toHash = <span class="function">(<span class="params">object, key</span>) =&gt;</span></span><br><span class="line">  <span class="built_in">Array</span>.prototype.reduce.call(</span><br><span class="line">    object,</span><br><span class="line">    (acc, data, index) =&gt; ((acc[!key ? index : data[key]] = data), acc),</span><br><span class="line">    &#123;&#125;</span><br><span class="line">  );</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">toHash([<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]); <span class="comment">// &#123; 0: 4, 1: 3, 2: 2, 3: 1 &#125;</span></span><br><span class="line">toHash([&#123; <span class="attr">a</span>: <span class="string">'label'</span> &#125;], <span class="string">'a'</span>); <span class="comment">// &#123; label: &#123; a: 'label' &#125; &#125;</span></span><br><span class="line"><span class="comment">// A more in depth example:</span></span><br><span class="line"><span class="keyword">let</span> users = [&#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">first</span>: <span class="string">'Jon'</span> &#125;, &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">first</span>: <span class="string">'Joe'</span> &#125;, &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">first</span>: <span class="string">'Moe'</span> &#125;];</span><br><span class="line"><span class="keyword">let</span> managers = [&#123; <span class="attr">manager</span>: <span class="number">1</span>, <span class="attr">employees</span>: [<span class="number">2</span>, <span class="number">3</span>] &#125;];</span><br><span class="line"><span class="comment">// We use function here because we want a bindable reference, but a closure referencing the hash would work, too.</span></span><br><span class="line">managers.forEach(</span><br><span class="line">  manager =&gt;</span><br><span class="line">    (manager.employees = manager.employees.map(<span class="function"><span class="keyword">function</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>[id];</span><br><span class="line">    &#125;, toHash(users, <span class="string">'id'</span>)))</span><br><span class="line">);</span><br><span class="line">managers; <span class="comment">// [ &#123; manager:1, employees: [ &#123; id: 2, first: "Joe" &#125;, &#123; id: 3, first: "Moe" &#125; ] &#125; ]</span></span><br></pre></td></tr></table></figure><h2 id="union"><a href="#union" class="headerlink" title="union"></a>union</h2><p>返回两个数组中不重复的元素。</p><p>用<code>a</code>和<code>b</code>创建一个<code>Set</code>，并转换为数组。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> union = <span class="function">(<span class="params">a, b</span>) =&gt;</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>([...a, ...b]));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">union([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>]); <span class="comment">// [1,2,3,4]</span></span><br></pre></td></tr></table></figure><h2 id="unionBy"><a href="#unionBy" class="headerlink" title="unionBy"></a>unionBy</h2><p>将给定的函数应用于两个数组中的每个数组元素后，返回两个数组中不重复的元素。</p><p>通过将<code>fn</code>应用于<code>a</code>的所有值来创建<code>Set</code>。在执行<code>fn</code>后，从a和b中的所有元素创建一个集合，这些元素的值与先前创建的集合中的值不匹配。返回转换为数组的最后一个集合。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> unionBy = <span class="function">(<span class="params">a, b, fn</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>(a.map(fn));</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>([...a, ...b.filter(<span class="function"><span class="params">x</span> =&gt;</span> !s.has(fn(x)))]));</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">unionBy([<span class="number">2.1</span>], [<span class="number">1.2</span>, <span class="number">2.3</span>], <span class="built_in">Math</span>.floor); <span class="comment">// [2.1, 1.2]</span></span><br></pre></td></tr></table></figure><h2 id="unionWith"><a href="#unionWith" class="headerlink" title="unionWith"></a>unionWith</h2><p>使用提供的比较器函数，返回两个数组中不重复的元素。</p><p>创建一个<code>Set</code>，其中包含比较器在a中找不到匹配项的所有a值和b值，使用<code>Array.prototype.findIndex()</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> unionWith = <span class="function">(<span class="params">a, b, comp</span>) =&gt;</span></span><br><span class="line">  <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>([...a, ...b.filter(<span class="function"><span class="params">x</span> =&gt;</span> a.findIndex(<span class="function"><span class="params">y</span> =&gt;</span> comp(x, y)) === <span class="number">-1</span>)]));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">unionWith([<span class="number">1</span>, <span class="number">1.2</span>, <span class="number">1.5</span>, <span class="number">3</span>, <span class="number">0</span>], [<span class="number">1.9</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">3.9</span>], (a, b) =&gt; <span class="built_in">Math</span>.round(a) === <span class="built_in">Math</span>.round(b)); <span class="comment">// [1, 1.2, 1.5, 3, 0, 3.9]</span></span><br></pre></td></tr></table></figure><h2 id="uniqueElements"><a href="#uniqueElements" class="headerlink" title="uniqueElements"></a>uniqueElements</h2><p>返回数组的所有唯一值。</p><p>使用ES6<code>Set</code>和<code>...rest</code>运算符丢弃所有重复的值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> uniqueElements = <span class="function"><span class="params">arr</span> =&gt;</span> [...new <span class="built_in">Set</span>(arr)];</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">uniqueElements([<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>]); <span class="comment">// [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure><h2 id="uniqueElementsBy"><a href="#uniqueElementsBy" class="headerlink" title="uniqueElementsBy"></a>uniqueElementsBy</h2><p>基于提供的比较器函数，返回数组的所有唯一值。</p><p>使用<code>Array.prototype.reduce()</code>和<code>Array.prototype.some()</code>，根据比较器函数<code>fn</code>，返回满足条件的第一次出现的元素。比较器函数有两个参数：正在比较的两个元素的值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> uniqueElementsBy = <span class="function">(<span class="params">arr, fn</span>) =&gt;</span></span><br><span class="line">  arr.reduce(<span class="function">(<span class="params">acc, v</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!acc.some(<span class="function"><span class="params">x</span> =&gt;</span> fn(v, x))) acc.push(v);</span><br><span class="line">    <span class="keyword">return</span> acc;</span><br><span class="line">  &#125;, []);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">uniqueElementsBy(</span><br><span class="line">  [</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">0</span>, <span class="attr">value</span>: <span class="string">'a'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">value</span>: <span class="string">'b'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">value</span>: <span class="string">'c'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">value</span>: <span class="string">'d'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">0</span>, <span class="attr">value</span>: <span class="string">'e'</span> &#125;</span><br><span class="line">  ],</span><br><span class="line">  (a, b) =&gt; a.id == b.id</span><br><span class="line">); <span class="comment">// [ &#123; id: 0, value: 'a' &#125;, &#123; id: 1, value: 'b' &#125;, &#123; id: 2, value: 'c' &#125; ]</span></span><br></pre></td></tr></table></figure><h2 id="uniqueElementsByRight"><a href="#uniqueElementsByRight" class="headerlink" title="uniqueElementsByRight"></a>uniqueElementsByRight</h2><p>基于提供的比较器函数，返回数组的所有唯一值。</p><p>使用<code>Array.prototype.reduceRight()</code>和<code>Array.prototype.some()</code>，根据比较器函数<code>fn</code>，返回满足条件的第一次出现的元素。比较器函数有两个参数：正在比较的两个元素的值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> uniqueElementsByRight = <span class="function">(<span class="params">arr, fn</span>) =&gt;</span></span><br><span class="line">  arr.reduceRight(<span class="function">(<span class="params">acc, v</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!acc.some(<span class="function"><span class="params">x</span> =&gt;</span> fn(v, x))) acc.push(v);</span><br><span class="line">    <span class="keyword">return</span> acc;</span><br><span class="line">  &#125;, []);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">uniqueElementsByRight(</span><br><span class="line">  [</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">0</span>, <span class="attr">value</span>: <span class="string">'a'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">value</span>: <span class="string">'b'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">value</span>: <span class="string">'c'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">value</span>: <span class="string">'d'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">0</span>, <span class="attr">value</span>: <span class="string">'e'</span> &#125;</span><br><span class="line">  ],</span><br><span class="line">  (a, b) =&gt; a.id == b.id</span><br><span class="line">); <span class="comment">// [ &#123; id: 0, value: 'e' &#125;, &#123; id: 1, value: 'd' &#125;, &#123; id: 2, value: 'c' &#125; ]</span></span><br></pre></td></tr></table></figure><h2 id="uniqueSymmetricDifference"><a href="#uniqueSymmetricDifference" class="headerlink" title="uniqueSymmetricDifference"></a>uniqueSymmetricDifference</h2><p>返回两个数组之间不重复的值。</p><p>在每个数组上使用<code>Array.prototype.filter()</code>和<code>Array.prototype.includes()</code>来删除另一个数组中包含的值，然后根据结果创建一个集合，删除重复的值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> uniqueSymmetricDifference = <span class="function">(<span class="params">a, b</span>) =&gt;</span> [</span><br><span class="line">  ...new <span class="built_in">Set</span>([...a.filter(<span class="function"><span class="params">v</span> =&gt;</span> !b.includes(v)), ...b.filter(<span class="function"><span class="params">v</span> =&gt;</span> !a.includes(v))])</span><br><span class="line">];</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">uniqueSymmetricDifference([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>]); <span class="comment">// [3, 4]</span></span><br><span class="line">uniqueSymmetricDifference([<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>], [<span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>]); <span class="comment">// [2, 3]</span></span><br></pre></td></tr></table></figure><h2 id="unzip"><a href="#unzip" class="headerlink" title="unzip"></a>unzip</h2><p>创建二维数组，将<a href="#zip">zip</a>生成的数组中的元素取消分组。</p><p>使用<code>Math.max.apply()</code>得到最长的数组长度，<code>Array.prototype.map()</code>生成数组。使用<code>Array.prototype.reduce()</code>和<code>Array.prototype.forEach()</code>将分组值映射到单个数组。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> unzip = <span class="function"><span class="params">arr</span> =&gt;</span></span><br><span class="line">  arr.reduce(</span><br><span class="line">    (acc, val) =&gt; <span class="function">(<span class="params">val.forEach((v, i</span>) =&gt;</span> acc[i].push(v)), acc),</span><br><span class="line">    <span class="built_in">Array</span>.from(&#123;</span><br><span class="line">      length: <span class="built_in">Math</span>.max(...arr.map(<span class="function"><span class="params">x</span> =&gt;</span> x.length))</span><br><span class="line">    &#125;).map(<span class="function"><span class="params">x</span> =&gt;</span> [])</span><br><span class="line">  );</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">unzip([[<span class="string">'a'</span>, <span class="number">1</span>, <span class="literal">true</span>], [<span class="string">'b'</span>, <span class="number">2</span>, <span class="literal">false</span>]]); <span class="comment">// [['a', 'b'], [1, 2], [true, false]]</span></span><br><span class="line">unzip([[<span class="string">'a'</span>, <span class="number">1</span>, <span class="literal">true</span>], [<span class="string">'b'</span>, <span class="number">2</span>]]); <span class="comment">// [['a', 'b'], [1, 2], [true]]</span></span><br></pre></td></tr></table></figure><h2 id="unzipWith"><a href="#unzipWith" class="headerlink" title="unzipWith"></a>unzipWith</h2><p>创建一个元素数组，将<a href="#zip">zip</a>生成的数组中的元素取消分组，并应用提供的函数。</p><p>使用<code>Math.max.apply()</code>得到最长的数组长度，<code>Array.prototype.map()</code>生成数组。使用<code>Array.prototype.reduce()</code>和<code>Array.prototype.forEach()</code>将分组值映射到单个数组。使用<code>Array.prototype.map()</code>和扩展运算符(<code>...</code>)将<code>fn</code>应用于每个单独的元素数组。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> unzipWith = <span class="function">(<span class="params">arr, fn</span>) =&gt;</span></span><br><span class="line">  arr</span><br><span class="line">    .reduce(</span><br><span class="line">      (acc, val) =&gt; <span class="function">(<span class="params">val.forEach((v, i</span>) =&gt;</span> acc[i].push(v)), acc),</span><br><span class="line">      <span class="built_in">Array</span>.from(&#123;</span><br><span class="line">        length: <span class="built_in">Math</span>.max(...arr.map(<span class="function"><span class="params">x</span> =&gt;</span> x.length))</span><br><span class="line">      &#125;).map(<span class="function"><span class="params">x</span> =&gt;</span> [])</span><br><span class="line">    )</span><br><span class="line">    .map(<span class="function"><span class="params">val</span> =&gt;</span> fn(...val));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">unzipWith([[<span class="number">1</span>, <span class="number">10</span>, <span class="number">100</span>], [<span class="number">2</span>, <span class="number">20</span>, <span class="number">200</span>]], (...args) =&gt; args.reduce(<span class="function">(<span class="params">acc, v</span>) =&gt;</span> acc + v, <span class="number">0</span>)); <span class="comment">// [3, 30, 300]</span></span><br></pre></td></tr></table></figure><h2 id="without"><a href="#without" class="headerlink" title="without"></a>without</h2><p>筛选出数组中不是指定值的元素。</p><p>使用<code>Array.prototype.filter()</code>创建一个数组，排除(使用<code>！Array.includes()</code>方法)所有给定值。</p><p>（对于改变原始数组的代码片段，请参见<a href="#pull">pull</a>）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> without = <span class="function">(<span class="params">arr, ...args</span>) =&gt;</span> arr.filter(<span class="function"><span class="params">v</span> =&gt;</span> !args.includes(v));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">without([<span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">1</span>, <span class="number">2</span>); <span class="comment">// [3]</span></span><br></pre></td></tr></table></figure><h2 id="xProd"><a href="#xProd" class="headerlink" title="xProd"></a>xProd</h2><p>通过从数组中创建每个可能的对，在提供的两个数组中创建一个新数组。</p><p>使用<code>Array.prototype.reduce()</code>,<code>Array.prototype.map()</code>和<code>Array.prototype.concat()</code>从两个数组的元素中产生每一个组合，并将它们保存在新数组中。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> xProd = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a.reduce(<span class="function">(<span class="params">acc, x</span>) =&gt;</span> acc.concat(b.map(<span class="function"><span class="params">y</span> =&gt;</span> [x, y])), []);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">xProd([<span class="number">1</span>, <span class="number">2</span>], [<span class="string">'a'</span>, <span class="string">'b'</span>]); <span class="comment">// [[1, 'a'], [1, 'b'], [2, 'a'], [2, 'b']]</span></span><br></pre></td></tr></table></figure><h2 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h2><p>创建元素数组，根据原始数组中的位置分组。</p><p>使用<code>Math.max.apply()</code>获取传入数组的最大长度。创建一个长度为最大长度的数组，并使用<code>Array.from()</code>和映射函数创建一个分组数组。如果参数数组的长度不同，则在没值的地方使用<code>undefined</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> zip = <span class="function">(<span class="params">...arrays</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> maxLength = <span class="built_in">Math</span>.max(...arrays.map(<span class="function"><span class="params">x</span> =&gt;</span> x.length));</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.from(&#123; <span class="attr">length</span>: maxLength &#125;).map(<span class="function">(<span class="params">_, i</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>.from(&#123; <span class="attr">length</span>: arrays.length &#125;, (_, k) =&gt; arrays[k][i]);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">zip([<span class="string">'a'</span>, <span class="string">'b'</span>], [<span class="number">1</span>, <span class="number">2</span>], [<span class="literal">true</span>, <span class="literal">false</span>]); <span class="comment">// [['a', 1, true], ['b', 2, false]]</span></span><br><span class="line">zip([<span class="string">'a'</span>], [<span class="number">1</span>, <span class="number">2</span>], [<span class="literal">true</span>, <span class="literal">false</span>]); <span class="comment">// [['a', 1, true], [undefined, 2, false]]</span></span><br></pre></td></tr></table></figure><h2 id="zipObject"><a href="#zipObject" class="headerlink" title="zipObject"></a>zipObject</h2><p>给定有效的属性数组和值数组，返回一个将属性与值相关联的对象。</p><p>由于对象可以有未定义的值，但不能有未定义的属性，属性数组使用<code>Array. prototype.reduce()</code>来决定结果对象的结构。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> zipObject = <span class="function">(<span class="params">props, values</span>) =&gt;</span></span><br><span class="line">  props.reduce(<span class="function">(<span class="params">obj, prop, index</span>) =&gt;</span> ((obj[prop] = values[index]), obj), &#123;&#125;);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">zipObject([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>], [<span class="number">1</span>, <span class="number">2</span>]); <span class="comment">// &#123;a: 1, b: 2, c: undefined&#125;</span></span><br><span class="line">zipObject([<span class="string">'a'</span>, <span class="string">'b'</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// &#123;a: 1, b: 2&#125;</span></span><br></pre></td></tr></table></figure><h2 id="zipWith"><a href="#zipWith" class="headerlink" title="zipWith"></a>zipWith</h2><p>创建一个数组，根据原始数组中的位置进行分组，并使用函数作为最后一个值来指定分组值的组合方式。</p><p>检查提供的最后一个参数是否是函数。使用<code>Math.max()</code>获取参数中数组最大长度。创建一个长度为最大值的数组，并使用<code>Array.from()</code>和映射函数创建一个分组元素数组。如果参数数组的长度不同，则在无值的地方使用<code>undefined</code>。用每个组的元素调用该函数<code>(...group)</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> zipWith = <span class="function">(<span class="params">...array</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> fn = <span class="keyword">typeof</span> array[array.length - <span class="number">1</span>] === <span class="string">'function'</span> ? array.pop() : <span class="literal">undefined</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.from(</span><br><span class="line">    &#123; <span class="attr">length</span>: <span class="built_in">Math</span>.max(...array.map(<span class="function"><span class="params">a</span> =&gt;</span> a.length)) &#125;,</span><br><span class="line">    (_, i) =&gt; (fn ? fn(...array.map(<span class="function"><span class="params">a</span> =&gt;</span> a[i])) : array.map(<span class="function"><span class="params">a</span> =&gt;</span> a[i]))</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">zipWith([<span class="number">1</span>, <span class="number">2</span>], [<span class="number">10</span>, <span class="number">20</span>], [<span class="number">100</span>, <span class="number">200</span>], (a, b, c) =&gt; a + b + c); <span class="comment">// [111,222]</span></span><br><span class="line">zipWith(</span><br><span class="line">  [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">  [<span class="number">10</span>, <span class="number">20</span>],</span><br><span class="line">  [<span class="number">100</span>, <span class="number">200</span>],</span><br><span class="line">  (a, b, c) =&gt; (a != <span class="literal">null</span> ? a : <span class="string">'a'</span>) + (b != <span class="literal">null</span> ? b : <span class="string">'b'</span>) + (c != <span class="literal">null</span> ? c : <span class="string">'c'</span>)</span><br><span class="line">); <span class="comment">// [111, 222, '3bc']</span></span><br></pre></td></tr></table></figure><h1 id="Browser"><a href="#Browser" class="headerlink" title="Browser"></a>Browser</h1><h2 id="arrayToHtmlList"><a href="#arrayToHtmlList" class="headerlink" title="arrayToHtmlList"></a>arrayToHtmlList</h2><p>将给定数组元素转换为<code>&lt;li&gt;</code>标签，并将它们追加到给定id的列表中。</p><p>使用<code>Array.prototype.map()</code>、<code>document.querySelector()</code>和匿名闭包函数创建html标记。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arrayToHtmlList = <span class="function">(<span class="params">arr, listID</span>) =&gt;</span></span><br><span class="line">  (<span class="function"><span class="params">el</span> =&gt;</span> (</span><br><span class="line">    (el = <span class="built_in">document</span>.querySelector(<span class="string">'#'</span> + listID)),</span><br><span class="line">    (el.innerHTML += arr.map(<span class="function"><span class="params">item</span> =&gt;</span> <span class="string">`&lt;li&gt;<span class="subst">$&#123;item&#125;</span>&lt;/li&gt;`</span>).join(<span class="string">''</span>))</span><br><span class="line">  ))();</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">arrayToHtmlList([<span class="string">'item 1'</span>, <span class="string">'item 2'</span>], <span class="string">'myListID'</span>);</span><br></pre></td></tr></table></figure><h2 id="bottomVisible"><a href="#bottomVisible" class="headerlink" title="bottomVisible"></a>bottomVisible</h2><p>如果页面到达底部，则返回<code>true</code>，否则返回<code>false</code>。</p><p>使用<code>scrollY</code>、<code>scrollHeight</code>和<code>clientHeight</code>来确定页面是否到达底部。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bottomVisible = <span class="function"><span class="params">()</span> =&gt;</span></span><br><span class="line">  <span class="built_in">document</span>.documentElement.clientHeight + <span class="built_in">window</span>.scrollY &gt;=</span><br><span class="line">  (<span class="built_in">document</span>.documentElement.scrollHeight || <span class="built_in">document</span>.documentElement.clientHeight);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">bottomVisible(); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="copyToClipboard"><a href="#copyToClipboard" class="headerlink" title="copyToClipboard"></a>copyToClipboard</h2><p>⚠️注意:通过使用新的剪贴板异步API，同样的功能可以更容易地实现，这个API仍然是实验性的，但是应该在将来使用，而不是这个片段。<a href="https://github.com/w3c/clipboard-apis/blob/master/explainer.adoc#writing-to-the-clipboard" rel="external nofollow noopener noreferrer" target="_blank">点击</a>了解更多信息。</p><p>将字符串复制到剪贴板。仅当用户有操作才可用(例如，在点击事件中)。</p><p>创建一个<code>&lt;textarea&gt;</code>，用提供的数据填充它，并将其添加到HTML文档中。使用<code>Selection.getRangeAt()</code>存储所选范围(如果有)。使用<code>document.execCommand(&#39;copy&#39;)</code>复制到剪贴板。之后从HTML文档中删除元素。最后，使用<code>Selection().addRange()</code>以恢复原始选定范围(如果有)。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> copyToClipboard = <span class="function"><span class="params">str</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> el = <span class="built_in">document</span>.createElement(<span class="string">'textarea'</span>);</span><br><span class="line">  el.value = str;</span><br><span class="line">  el.setAttribute(<span class="string">'readonly'</span>, <span class="string">''</span>);</span><br><span class="line">  el.style.position = <span class="string">'absolute'</span>;</span><br><span class="line">  el.style.left = <span class="string">'-9999px'</span>;</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(el);</span><br><span class="line">  <span class="keyword">const</span> selected =</span><br><span class="line">    <span class="built_in">document</span>.getSelection().rangeCount &gt; <span class="number">0</span> ? <span class="built_in">document</span>.getSelection().getRangeAt(<span class="number">0</span>) : <span class="literal">false</span>;</span><br><span class="line">  el.select();</span><br><span class="line">  <span class="built_in">document</span>.execCommand(<span class="string">'copy'</span>);</span><br><span class="line">  <span class="built_in">document</span>.body.removeChild(el);</span><br><span class="line">  <span class="keyword">if</span> (selected) &#123;</span><br><span class="line">    <span class="built_in">document</span>.getSelection().removeAllRanges();</span><br><span class="line">    <span class="built_in">document</span>.getSelection().addRange(selected);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">copyToClipboard(<span class="string">'Lorem ipsum'</span>); <span class="comment">// 'Lorem ipsum' copied to clipboard.</span></span><br></pre></td></tr></table></figure><h2 id="counter"><a href="#counter" class="headerlink" title="counter"></a>counter</h2><p>为指定的选择器创建具有指定范围、步长和持续时间的计数器。</p><p>检查<code>step</code>正负是否正确，并相应地进行更改。将<code>setInterval()</code>与<code>Math.abs()</code>、<code>Math.floor()</code>结合使用，计算每次新文本绘制的时间。使用<code>document.querySelector().innerHTML</code>来更新元素的值。省略第四个参数<code>step</code>，使用默认值<code>1</code>。省略第五个参数<code>duration</code>，使用<code>2000</code>毫秒的默认持续时间。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> counter = <span class="function">(<span class="params">selector, start, end, step = <span class="number">1</span>, duration = <span class="number">2000</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> current = start,</span><br><span class="line">    _step = (end - start) * step &lt; <span class="number">0</span> ? -step : step,</span><br><span class="line">    timer = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      current += _step;</span><br><span class="line">      <span class="built_in">document</span>.querySelector(selector).innerHTML = current;</span><br><span class="line">      <span class="keyword">if</span> (current &gt;= end) <span class="built_in">document</span>.querySelector(selector).innerHTML = end;</span><br><span class="line">      <span class="keyword">if</span> (current &gt;= end) clearInterval(timer);</span><br><span class="line">    &#125;, <span class="built_in">Math</span>.abs(<span class="built_in">Math</span>.floor(duration / (end - start))));</span><br><span class="line">  <span class="keyword">return</span> timer;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">counter(<span class="string">'#my-id'</span>, <span class="number">1</span>, <span class="number">1000</span>, <span class="number">5</span>, <span class="number">2000</span>); <span class="comment">// Creates a 2-second timer for the element with id="my-id"</span></span><br></pre></td></tr></table></figure><h2 id="createElement"><a href="#createElement" class="headerlink" title="createElement"></a>createElement</h2><p>根据字符串创建元素(不将其添加到文档)。如果给定字符串包含多个元素，则返回第一个元素。</p><p>使用<code>document.createElement()</code>创建一个新元素。将它的<code>innerHTML</code>设置为参数提供的字符串。使用<code>ParentNode.firstElementChild</code>返回字符串的元素版本。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> createElement = <span class="function"><span class="params">str</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> el = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">  el.innerHTML = str;</span><br><span class="line">  <span class="keyword">return</span> el.firstElementChild;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> el = createElement(</span><br><span class="line">  <span class="string">`&lt;div class="container"&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;Hello!&lt;/p&gt;</span></span><br><span class="line"><span class="string">  &lt;/div&gt;`</span></span><br><span class="line">);</span><br><span class="line"><span class="built_in">console</span>.log(el.className); <span class="comment">// 'container'</span></span><br></pre></td></tr></table></figure><h2 id="createEventHub"><a href="#createEventHub" class="headerlink" title="createEventHub"></a>createEventHub</h2><p>使用emit、on和off方法创建发布/订阅事件中心。</p><p>使用<code>Object.create(null)</code>创建一个不从<code>Object.prototype</code>继承属性的空集线器对象。对于emit，请根据事件参数解析处理程序数组，然后通过将数据作为参数传入，使用Array.prototype.forEach ( )运行每个处理程序数组。对于on，如果事件尚不存在，请为其创建一个数组，然后使用Array.prototype.push ( )将处理程序添加到数组中。对于off，使用数组. prototype.findIndex ( )在事件数组中查找处理程序的索引，并使用数组. prototype.splice ( )将其移除。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> createEventHub = <span class="function"><span class="params">()</span> =&gt;</span> (&#123;</span><br><span class="line">  hub: <span class="built_in">Object</span>.create(<span class="literal">null</span>),</span><br><span class="line">  emit(event, data) &#123;</span><br><span class="line">    (<span class="keyword">this</span>.hub[event] || []).forEach(<span class="function"><span class="params">handler</span> =&gt;</span> handler(data));</span><br><span class="line">  &#125;,</span><br><span class="line">  on(event, handler) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.hub[event]) <span class="keyword">this</span>.hub[event] = [];</span><br><span class="line">    <span class="keyword">this</span>.hub[event].push(handler);</span><br><span class="line">  &#125;,</span><br><span class="line">  off(event, handler) &#123;</span><br><span class="line">    <span class="keyword">const</span> i = (<span class="keyword">this</span>.hub[event] || []).findIndex(<span class="function"><span class="params">h</span> =&gt;</span> h === handler);</span><br><span class="line">    <span class="keyword">if</span> (i &gt; <span class="number">-1</span>) <span class="keyword">this</span>.hub[event].splice(i, <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> handler = <span class="function"><span class="params">data</span> =&gt;</span> <span class="built_in">console</span>.log(data);</span><br><span class="line"><span class="keyword">const</span> hub = createEventHub();</span><br><span class="line"><span class="keyword">let</span> increment = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Subscribe: listen for different types of events</span></span><br><span class="line">hub.on(<span class="string">'message'</span>, handler);</span><br><span class="line">hub.on(<span class="string">'message'</span>, () =&gt; <span class="built_in">console</span>.log(<span class="string">'Message event fired'</span>));</span><br><span class="line">hub.on(<span class="string">'increment'</span>, () =&gt; increment++);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Publish: emit events to invoke all handlers subscribed to them, passing the data to them as an argument</span></span><br><span class="line">hub.emit(<span class="string">'message'</span>, <span class="string">'hello world'</span>); <span class="comment">// logs 'hello world' and 'Message event fired'</span></span><br><span class="line">hub.emit(<span class="string">'message'</span>, &#123; <span class="attr">hello</span>: <span class="string">'world'</span> &#125;); <span class="comment">// logs the object and 'Message event fired'</span></span><br><span class="line">hub.emit(<span class="string">'increment'</span>); <span class="comment">// `increment` variable is now 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Unsubscribe: stop a specific handler from listening to the 'message' event</span></span><br><span class="line">hub.off(<span class="string">'message'</span>, handler);</span><br></pre></td></tr></table></figure><h2 id="currentURL"><a href="#currentURL" class="headerlink" title="currentURL"></a>currentURL</h2><p>返回当前网址。</p><p>使用<code>window.location.href</code>获取当前网址。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> currentURL = <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">window</span>.location.href;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">currentURL(); <span class="comment">// 'https://google.com'</span></span><br></pre></td></tr></table></figure><h2 id="detectDeviceType"><a href="#detectDeviceType" class="headerlink" title="detectDeviceType"></a>detectDeviceType</h2><p>检测网站是在移动设备中打开还是在台式机/笔记本电脑中打开。</p><p>使用正则表达式匹配<code>navigator.userAgent</code>属性，以确定设备是移动设备还是台式机/笔记本电脑。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> detectDeviceType = <span class="function"><span class="params">()</span> =&gt;</span></span><br><span class="line">  /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)</span><br><span class="line">    ? <span class="string">'Mobile'</span></span><br><span class="line">    : <span class="string">'Desktop'</span>;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">detectDeviceType(); <span class="comment">// "Mobile" or "Desktop"</span></span><br></pre></td></tr></table></figure><h2 id="elementContains"><a href="#elementContains" class="headerlink" title="elementContains"></a>elementContains</h2><p>如果父元素包含子元素，则返回<code>true</code>，否则返回<code>false</code>。</p><p>检查父元素和子元素是否不同，使用<code>parent.contains(child)</code>检查父元素是否包含子元素。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> elementContains = <span class="function">(<span class="params">parent, child</span>) =&gt;</span> parent !== child &amp;&amp; parent.contains(child);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">elementContains(<span class="built_in">document</span>.querySelector(<span class="string">'head'</span>), <span class="built_in">document</span>.querySelector(<span class="string">'title'</span>)); <span class="comment">// true</span></span><br><span class="line">elementContains(<span class="built_in">document</span>.querySelector(<span class="string">'body'</span>), <span class="built_in">document</span>.querySelector(<span class="string">'body'</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h2 id="elementIsVisibleInViewport"><a href="#elementIsVisibleInViewport" class="headerlink" title="elementIsVisibleInViewport"></a>elementIsVisibleInViewport</h2><p>如果指定的元素在视口中可见，则返回<code>true</code>，否则返回<code>false</code>。</p><p>使用<code>Element.getBoundingClientRect()</code>和<code>window.inner(Width|Height)</code>值来确定给定元素在视口中是否可见。省略第二个参数表示元素完全可见，或者指定<code>true</code>来表示部分可见。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> elementIsVisibleInViewport = <span class="function">(<span class="params">el, partiallyVisible = <span class="literal">false</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; top, left, bottom, right &#125; = el.getBoundingClientRect();</span><br><span class="line">  <span class="keyword">const</span> &#123; innerHeight, innerWidth &#125; = <span class="built_in">window</span>;</span><br><span class="line">  <span class="keyword">return</span> partiallyVisible</span><br><span class="line">    ? ((top &gt; <span class="number">0</span> &amp;&amp; top &lt; innerHeight) || (bottom &gt; <span class="number">0</span> &amp;&amp; bottom &lt; innerHeight)) &amp;&amp;</span><br><span class="line">        ((left &gt; <span class="number">0</span> &amp;&amp; left &lt; innerWidth) || (right &gt; <span class="number">0</span> &amp;&amp; right &lt; innerWidth))</span><br><span class="line">    : top &gt;= <span class="number">0</span> &amp;&amp; left &gt;= <span class="number">0</span> &amp;&amp; bottom &lt;= innerHeight &amp;&amp; right &lt;= innerWidth;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="comment">// e.g. 100x100 viewport and a 10x10px element at position &#123;top: -1, left: 0, bottom: 9, right: 10&#125;</span></span><br><span class="line">elementIsVisibleInViewport(el); <span class="comment">// false - (not fully visible)</span></span><br><span class="line">elementIsVisibleInViewport(el, <span class="literal">true</span>); <span class="comment">// true - (partially visible)</span></span><br></pre></td></tr></table></figure><h2 id="getImages"><a href="#getImages" class="headerlink" title="getImages"></a>getImages</h2><p>从元素中提取所有图像，并将它们放入数组中</p><p>使用<code>Element.prototype.GetElementsBytagName()</code>获取所提供元素中的所有的<code>&lt;img&gt;</code>元素，<code>Array.prototype.map()</code>映射每个元素的<code>src</code>属性，然后创建一个集合来消除重复并返回数组。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getImages = <span class="function">(<span class="params">el, includeDuplicates = <span class="literal">false</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> images = [...el.getElementsByTagName(<span class="string">'img'</span>)].map(<span class="function"><span class="params">img</span> =&gt;</span> img.getAttribute(<span class="string">'src'</span>));</span><br><span class="line">  <span class="keyword">return</span> includeDuplicates ? images : [...new <span class="built_in">Set</span>(images)];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">getImages(<span class="built_in">document</span>, <span class="literal">true</span>); <span class="comment">// ['image1.jpg', 'image2.png', 'image1.png', '...']</span></span><br><span class="line">getImages(<span class="built_in">document</span>, <span class="literal">false</span>); <span class="comment">// ['image1.jpg', 'image2.png', '...']</span></span><br></pre></td></tr></table></figure><h2 id="getScrollPosition"><a href="#getScrollPosition" class="headerlink" title="getScrollPosition"></a>getScrollPosition</h2><p>返回当前页面的滚动位置。</p><p>如果有<code>pageXOffset</code>和<code>pageYOffset</code>则使用它们，否则使用<code>scrollLeft</code>和<code>scrollTop</code>。省略<code>el</code>使用默认值<code>window</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getScrollPosition = <span class="function">(<span class="params">el = <span class="built_in">window</span></span>) =&gt;</span> (&#123;</span><br><span class="line">  x: el.pageXOffset !== <span class="literal">undefined</span> ? el.pageXOffset : el.scrollLeft,</span><br><span class="line">  y: el.pageYOffset !== <span class="literal">undefined</span> ? el.pageYOffset : el.scrollTop</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">getScrollPosition(); <span class="comment">// &#123;x: 0, y: 200&#125;</span></span><br></pre></td></tr></table></figure><h2 id="getStyle"><a href="#getStyle" class="headerlink" title="getStyle"></a>getStyle</h2><p>返回指定元素的CSS规则值。</p><p>使用<code>window.getComputedStyle()</code>获取指定元素的CSS规则值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getStyle = <span class="function">(<span class="params">el, ruleName</span>) =&gt;</span> getComputedStyle(el)[ruleName];</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">getStyle(<span class="built_in">document</span>.querySelector(<span class="string">'p'</span>), <span class="string">'font-size'</span>); <span class="comment">// '16px'</span></span><br></pre></td></tr></table></figure><h2 id="hasClass"><a href="#hasClass" class="headerlink" title="hasClass"></a>hasClass</h2><p>如果元素具有指定的类名，则返回<code>true</code>，否则返回<code>false</code>。</p><p>使用<code>element.classList.contains()</code>检查该元素是否具有指定的类名。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> hasClass = <span class="function">(<span class="params">el, className</span>) =&gt;</span> el.classList.contains(className);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">hasClass(<span class="built_in">document</span>.querySelector(<span class="string">'p.special'</span>), <span class="string">'special'</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="hashBrowser"><a href="#hashBrowser" class="headerlink" title="hashBrowser"></a>hashBrowser</h2><p>使用<a href="https://en.wikipedia.org/wiki/SHA-2" rel="external nofollow noopener noreferrer" target="_blank">SHA-256</a>算法为传入值创建哈希值。返回一个<code>Promise</code>。</p><p>使用<a href="https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto" rel="external nofollow noopener noreferrer" target="_blank">SubtleCrypto</a>接口为给定值创建哈希。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> hashBrowser = <span class="function"><span class="params">val</span> =&gt;</span></span><br><span class="line">  crypto.subtle.digest(<span class="string">'SHA-256'</span>, <span class="keyword">new</span> TextEncoder(<span class="string">'utf-8'</span>).encode(val)).then(<span class="function"><span class="params">h</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> hexes = [],</span><br><span class="line">      view = <span class="keyword">new</span> <span class="built_in">DataView</span>(h);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; view.byteLength; i += <span class="number">4</span>)</span><br><span class="line">      hexes.push((<span class="string">'00000000'</span> + view.getUint32(i).toString(<span class="number">16</span>)).slice(<span class="number">-8</span>));</span><br><span class="line">    <span class="keyword">return</span> hexes.join(<span class="string">''</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">hashBrowser(<span class="built_in">JSON</span>.stringify(&#123; <span class="attr">a</span>: <span class="string">'a'</span>, <span class="attr">b</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], <span class="attr">foo</span>: &#123; <span class="attr">c</span>: <span class="string">'bar'</span> &#125; &#125;)).then(<span class="built_in">console</span>.log); <span class="comment">// '04aa106279f5977f59f9067fa9712afc4aedc6f5862a8defc34552d8c7206393'</span></span><br></pre></td></tr></table></figure><h2 id="hide"><a href="#hide" class="headerlink" title="hide"></a>hide</h2><p>隐藏所有指定的元素。</p><p>使用<code>NodeList.prototype.forEach()</code>对指定的每个元素应用<code>display: none</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> hide = <span class="function">(<span class="params">...el</span>) =&gt;</span> [...el].forEach(<span class="function"><span class="params">e</span> =&gt;</span> (e.style.display = <span class="string">'none'</span>));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">hide(<span class="built_in">document</span>.querySelectorAll(<span class="string">'img'</span>)); <span class="comment">// Hides all &lt;img&gt; elements on the page</span></span><br></pre></td></tr></table></figure><h2 id="httpsRedirect"><a href="#httpsRedirect" class="headerlink" title="httpsRedirect"></a>httpsRedirect</h2><p>如果页面当前是http协议，则将其重定向到https协议。另外，按下后退按钮并不会将它回到http协议页面，因为历史记录中网页已经被替换。</p><p>使用<code>location.protocol</code>获取当前正在使用的协议。如果不是HTTPS，使用<code>location.replace()</code>用页面的HTTPS版本替换现有页面。使用<code>location.href</code>获取完整地址，用<code>String.prototype.split()</code>将其拆分，并删除网址的协议部分。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> httpsRedirect = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (location.protocol !== <span class="string">'https:'</span>) location.replace(<span class="string">'https://'</span> + location.href.split(<span class="string">'//'</span>)[<span class="number">1</span>]);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">httpsRedirect(); <span class="comment">// If you are on http://mydomain.com, you are redirected to https://mydomain.com</span></span><br></pre></td></tr></table></figure><h2 id="insertAfter"><a href="#insertAfter" class="headerlink" title="insertAfter"></a>insertAfter</h2><p>在指定元素的末尾插入一个HTML字符串。</p><p>使用参数为<code>afterend</code>的<code>el.insertAdjacentHTML()</code>解析<code>htmlString</code>，并将其插入<code>el</code>的末尾。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> insertAfter = <span class="function">(<span class="params">el, htmlString</span>) =&gt;</span> el.insertAdjacentHTML(<span class="string">'afterend'</span>, htmlString);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">insertAfter(<span class="built_in">document</span>.getElementById(<span class="string">'myId'</span>), <span class="string">'&lt;p&gt;after&lt;/p&gt;'</span>); <span class="comment">// &lt;div id="myId"&gt;...&lt;/div&gt; &lt;p&gt;after&lt;/p&gt;</span></span><br></pre></td></tr></table></figure><h2 id="insertBefore"><a href="#insertBefore" class="headerlink" title="insertBefore"></a>insertBefore</h2><p>在指定元素的开头插入一个HTML字符串。</p><p>使用参数为<code>beforebegin</code>的<code>el.insertAdjacentHTML()</code>解析<code>htmlString</code>，并将其插入<code>el</code>的末尾。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> insertBefore = <span class="function">(<span class="params">el, htmlString</span>) =&gt;</span> el.insertAdjacentHTML(<span class="string">'beforebegin'</span>, htmlString);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">insertBefore(<span class="built_in">document</span>.getElementById(<span class="string">'myId'</span>), <span class="string">'&lt;p&gt;before&lt;/p&gt;'</span>); <span class="comment">// &lt;p&gt;before&lt;/p&gt; &lt;div id="myId"&gt;...&lt;/div&gt;</span></span><br></pre></td></tr></table></figure><h2 id="isBrowserTabFocused"><a href="#isBrowserTabFocused" class="headerlink" title="isBrowserTabFocused"></a>isBrowserTabFocused</h2><p>如果当前页面在浏览器页面选项卡为聚焦状态，则返回<code>true</code>，否则返回<code>false</code>。</p><p>使用<code>Document.hidden</code>属性来检查页面在浏览器选项卡中是可见的还是隐藏的。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isBrowserTabFocused = <span class="function"><span class="params">()</span> =&gt;</span> !<span class="built_in">document</span>.hidden;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">isBrowserTabFocused(); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="nodeListToArray"><a href="#nodeListToArray" class="headerlink" title="nodeListToArray"></a>nodeListToArray</h2><p>将<code>NodeList</code>转换为数组。</p><p>在新数组中使用扩展运算符将<code>NodeList</code>转换为数组。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nodeListToArray = <span class="function"><span class="params">nodeList</span> =&gt;</span> [...nodeList];</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">nodeListToArray(<span class="built_in">document</span>.childNodes); <span class="comment">// [ &lt;!DOCTYPE html&gt;, html ]</span></span><br></pre></td></tr></table></figure><h2 id="observeMutations"><a href="#observeMutations" class="headerlink" title="observeMutations"></a>observeMutations</h2><p>返回一个新的<code>MutationObserver</code>，并为指定元素上的每次变化提供回调。</p><p>使用<code>MutationObserver</code>观察给定元素的变化。使用<code>Array.prototype.forEach()</code>对观察到的每次变化执行回调。省略第三个参数选项，使用<a href="https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver#MutationObserverInit" rel="external nofollow noopener noreferrer" target="_blank">默认选项</a>(全部为<code>true</code>)。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> observeMutations = <span class="function">(<span class="params">element, callback, options</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> observer = <span class="keyword">new</span> MutationObserver(<span class="function"><span class="params">mutations</span> =&gt;</span> mutations.forEach(<span class="function"><span class="params">m</span> =&gt;</span> callback(m)));</span><br><span class="line">  observer.observe(</span><br><span class="line">    element,</span><br><span class="line">    <span class="built_in">Object</span>.assign(</span><br><span class="line">      &#123;</span><br><span class="line">        childList: <span class="literal">true</span>,</span><br><span class="line">        attributes: <span class="literal">true</span>,</span><br><span class="line">        attributeOldValue: <span class="literal">true</span>,</span><br><span class="line">        characterData: <span class="literal">true</span>,</span><br><span class="line">        characterDataOldValue: <span class="literal">true</span>,</span><br><span class="line">        subtree: <span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      options</span><br><span class="line">    )</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> observer;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> obs = observeMutations(<span class="built_in">document</span>, <span class="built_in">console</span>.log); <span class="comment">// Logs all mutations that happen on the page</span></span><br><span class="line">obs.disconnect(); <span class="comment">// Disconnects the observer and stops logging mutations on the page</span></span><br></pre></td></tr></table></figure><h2 id="off"><a href="#off" class="headerlink" title="off"></a>off</h2><p>从元素中移除事件侦听器。</p><p>使用<code>EventTarget.removeEventListener()</code>从元素中移除事件侦听器。省略第四个参数<code>opts</code>默认false，或者根据添加事件侦听器时使用的选项决定。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> off = <span class="function">(<span class="params">el, evt, fn, opts = <span class="literal">false</span></span>) =&gt;</span> el.removeEventListener(evt, fn, opts);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> fn = <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'!'</span>);</span><br><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">'click'</span>, fn);</span><br><span class="line">off(<span class="built_in">document</span>.body, <span class="string">'click'</span>, fn); <span class="comment">// no longer logs '!' upon clicking on the page</span></span><br></pre></td></tr></table></figure><h2 id="on"><a href="#on" class="headerlink" title="on"></a>on</h2><p>将事件侦听器添加到能够使用事件委托的元素中。</p><p>使用<code>EventTarget.addEventListener()</code>将事件侦听器添加到元素中。如果options对象提供了<code>target</code>属性，请确保事件目标与指定的目标匹配，然后通过提供正确的<code>this</code>回调。返回对自定义委托器函数的引用，以便可以与<a href="#off">off</a>一起使用。省略<code>opts</code>默认为非委托行为和事件冒泡。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">onst on = <span class="function">(<span class="params">el, evt, fn, opts = &#123;&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> delegatorFn = <span class="function"><span class="params">e</span> =&gt;</span> e.target.matches(opts.target) &amp;&amp; fn.call(e.target, e);</span><br><span class="line">  el.addEventListener(evt, opts.target ? delegatorFn : fn, opts.options || <span class="literal">false</span>);</span><br><span class="line">  <span class="keyword">if</span> (opts.target) <span class="keyword">return</span> delegatorFn;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> fn = <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'!'</span>);</span><br><span class="line">on(<span class="built_in">document</span>.body, <span class="string">'click'</span>, fn); <span class="comment">// logs '!' upon clicking the body</span></span><br><span class="line">on(<span class="built_in">document</span>.body, <span class="string">'click'</span>, fn, &#123; <span class="attr">target</span>: <span class="string">'p'</span> &#125;); <span class="comment">// logs '!' upon clicking a `p` element child of the body</span></span><br><span class="line">on(<span class="built_in">document</span>.body, <span class="string">'click'</span>, fn, &#123; <span class="attr">options</span>: <span class="literal">true</span> &#125;); <span class="comment">// use capturing instead of bubbling</span></span><br></pre></td></tr></table></figure><h2 id="onUserInputChange"><a href="#onUserInputChange" class="headerlink" title="onUserInputChange"></a>onUserInputChange</h2><p>每当用户输入类型改变(<code>mouse</code>或<code>touch</code>)时运行回调。根据输入设备启用/禁用代码非常有用。该过程是动态的，适用于混合设备(例如触摸屏笔记本电脑)。</p><p>使用两个事件监听器。最初认为<code>mouse</code>输入，并将<code>touchstart</code>事件侦听器绑定到文档。在<code>touchstart</code>上，添加一个<code>mousemove</code>事件侦听器，使用<code>performance.now()</code>监听20毫秒内连续触发的两个<code>mousemove</code>事件。在任何情况下，以输入类型作为参数运行回调。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">onst onUserInputChange = <span class="function"><span class="params">callback</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> type = <span class="string">'mouse'</span>,</span><br><span class="line">    lastTime = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">const</span> mousemoveHandler = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> now = performance.now();</span><br><span class="line">    <span class="keyword">if</span> (now - lastTime &lt; <span class="number">20</span>)</span><br><span class="line">      (type = <span class="string">'mouse'</span>), callback(type), <span class="built_in">document</span>.removeEventListener(<span class="string">'mousemove'</span>, mousemoveHandler);</span><br><span class="line">    lastTime = now;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="built_in">document</span>.addEventListener(<span class="string">'touchstart'</span>, () =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (type === <span class="string">'touch'</span>) <span class="keyword">return</span>;</span><br><span class="line">    (type = <span class="string">'touch'</span>), callback(type), <span class="built_in">document</span>.addEventListener(<span class="string">'mousemove'</span>, mousemoveHandler);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">onUserInputChange(<span class="function"><span class="params">type</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'The user is now using'</span>, type, <span class="string">'as an input method.'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="prefix"><a href="#prefix" class="headerlink" title="prefix"></a>prefix</h2><p>返回浏览器支持的CSS属性的前缀版本(如果需要)。</p><p>在前缀字符串数组上使用<code>Array.prototype.findIndex()</code>来测试<code>document.body</code>是否在其<code>CSSStyleDeclaration</code>对象中定义了其中一个字符串，否则返回<code>null</code>。使用<code>String.prototype.charAt()</code>和<code>String.prototype.toUpperCase()</code>将属性第一个字母大写，该属性将附加到前缀字符串数组上。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> prefix = <span class="function"><span class="params">prop</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> capitalizedProp = prop.charAt(<span class="number">0</span>).toUpperCase() + prop.slice(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">const</span> prefixes = [<span class="string">''</span>, <span class="string">'webkit'</span>, <span class="string">'moz'</span>, <span class="string">'ms'</span>, <span class="string">'o'</span>];</span><br><span class="line">  <span class="keyword">const</span> i = prefixes.findIndex(</span><br><span class="line">    prefix =&gt; <span class="keyword">typeof</span> <span class="built_in">document</span>.body.style[prefix ? prefix + capitalizedProp : prop] !== <span class="string">'undefined'</span></span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> i !== <span class="number">-1</span> ? (i === <span class="number">0</span> ? prop : prefixes[i] + capitalizedProp) : <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">prefix(<span class="string">'appearance'</span>); <span class="comment">// 'appearance' on a supported browser, otherwise 'webkitAppearance', 'mozAppearance', 'msAppearance' or 'oAppearance'</span></span><br></pre></td></tr></table></figure><h2 id="recordAnimationFrames"><a href="#recordAnimationFrames" class="headerlink" title="recordAnimationFrames"></a>recordAnimationFrames</h2><p>在每个动画帧上调用提供的回调。</p><p>使用递归。定义变量<code>running</code>为<code>true</code>，持续执行<code>window.requestAnimationFrame()</code>，它调用所提供的回调。返回一个对象有<code>start</code>和<code>stop</code>方法，以便手动控制。省略第二个参数<code>autoStart</code>，以便在调用函数时隐式调用<code>start</code>方法。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> recordAnimationFrames = <span class="function">(<span class="params">callback, autoStart = <span class="literal">true</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> running = <span class="literal">true</span>,</span><br><span class="line">    raf;</span><br><span class="line">  <span class="keyword">const</span> stop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    running = <span class="literal">false</span>;</span><br><span class="line">    cancelAnimationFrame(raf);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> start = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    running = <span class="literal">true</span>;</span><br><span class="line">    run();</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> run = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    raf = requestAnimationFrame(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      callback();</span><br><span class="line">      <span class="keyword">if</span> (running) run();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">if</span> (autoStart) start();</span><br><span class="line">  <span class="keyword">return</span> &#123; start, stop &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> cb = <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'Animation frame fired'</span>);</span><br><span class="line"><span class="keyword">const</span> recorder = recordAnimationFrames(cb); <span class="comment">// logs 'Animation frame fired' on each animation frame</span></span><br><span class="line">recorder.stop(); <span class="comment">// stops logging</span></span><br><span class="line">recorder.start(); <span class="comment">// starts again</span></span><br><span class="line"><span class="keyword">const</span> recorder2 = recordAnimationFrames(cb, <span class="literal">false</span>); <span class="comment">// `start` needs to be explicitly called to begin recording frames</span></span><br></pre></td></tr></table></figure><h2 id="redirect"><a href="#redirect" class="headerlink" title="redirect"></a>redirect</h2><p>重定向到指定的网址。</p><p>使用<code>window.location.href</code>或<code>window.location.replace()</code>重定向到<code>url</code>。传递第二个参数来模拟链接点击(<code>true</code>-默认)或HTTP重定向(<code>false</code>)。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onst redirect = <span class="function">(<span class="params">url, asLink = <span class="literal">true</span></span>) =&gt;</span></span><br><span class="line">  asLink ? (<span class="built_in">window</span>.location.href = url) : <span class="built_in">window</span>.location.replace(url);</span><br><span class="line">EXAMPLES</span><br><span class="line"><span class="comment">// redirect('https://google.com');</span></span><br></pre></td></tr></table></figure><h2 id="runAsync"><a href="#runAsync" class="headerlink" title="runAsync"></a>runAsync</h2><p>通过使用<a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers" rel="external nofollow noopener noreferrer" target="_blank">Web Worker</a>在单独的线程中运行函数，允许长时间运行的函数而不阻塞用户界面。</p><p>使用<code>Blob</code>对象URL创建一个新的<code>Worker</code>，其内容是所提供函数执行后的返回值。返回一个<code>promise</code>，监听<code>onmessage</code>和<code>onerror</code>事件，解析从<code>worker</code>返回的数据，或者抛出一个错误。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> runAsync = <span class="function"><span class="params">fn</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> worker = <span class="keyword">new</span> Worker(</span><br><span class="line">    URL.createObjectURL(<span class="keyword">new</span> Blob([<span class="string">`postMessage((<span class="subst">$&#123;fn&#125;</span>)());`</span>]), &#123;</span><br><span class="line">      type: <span class="string">'application/javascript; charset=utf-8'</span></span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span> &#123;</span><br><span class="line">    worker.onmessage = <span class="function">(<span class="params">&#123; data &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">      res(data), worker.terminate();</span><br><span class="line">    &#125;;</span><br><span class="line">    worker.onerror = <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">      rej(err), worker.terminate();</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> longRunningFunction = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++)</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">700</span>; j++) <span class="keyword">for</span> (<span class="keyword">let</span> k = <span class="number">0</span>; k &lt; <span class="number">300</span>; k++) result = result + i + j + k;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  <span class="doctag">NOTE:</span> Since the function is running in a different context, closures are not supported.</span></span><br><span class="line"><span class="comment">  The function supplied to `runAsync` gets stringified, so everything becomes literal.</span></span><br><span class="line"><span class="comment">  All variables and functions must be defined inside.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">runAsync(longRunningFunction).then(<span class="built_in">console</span>.log); <span class="comment">// 209685000000</span></span><br><span class="line">runAsync(<span class="function"><span class="params">()</span> =&gt;</span> <span class="number">10</span> ** <span class="number">3</span>).then(<span class="built_in">console</span>.log); <span class="comment">// 1000</span></span><br><span class="line"><span class="keyword">let</span> outsideVariable = <span class="number">50</span>;</span><br><span class="line">runAsync(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">typeof</span> outsideVariable).then(<span class="built_in">console</span>.log); <span class="comment">// 'undefined'</span></span><br></pre></td></tr></table></figure><h2 id="scrollToTop"><a href="#scrollToTop" class="headerlink" title="scrollToTop"></a>scrollToTop</h2><p>平滑滚动到页面顶部。</p><p>使用<code>document.documentElement.ScrollTop</code>或<code>document.body.scrollTop</code>获取到顶部的距离。使用<code>window.requestAnimationFrame()</code>执行动画滚动。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> scrollToTop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> c = <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop;</span><br><span class="line">  <span class="keyword">if</span> (c &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">window</span>.requestAnimationFrame(scrollToTop);</span><br><span class="line">    <span class="built_in">window</span>.scrollTo(<span class="number">0</span>, c - c / <span class="number">8</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">scrollToTop();</span><br></pre></td></tr></table></figure><h2 id="setStyle"><a href="#setStyle" class="headerlink" title="setStyle"></a>setStyle</h2><p>为指定元素设置CSS规则的值。</p><p>使用<code>element.style</code>将指定元素的CSS规则值设置为<code>val</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> setStyle = <span class="function">(<span class="params">el, ruleName, val</span>) =&gt;</span> (el.style[ruleName] = val);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">setStyle(<span class="built_in">document</span>.querySelector(<span class="string">'p'</span>), <span class="string">'font-size'</span>, <span class="string">'20px'</span>); <span class="comment">// The first &lt;p&gt; element on the page will have a font-size of 20px</span></span><br></pre></td></tr></table></figure><h2 id="show"><a href="#show" class="headerlink" title="show"></a>show</h2><p>显示所有指定的元素。</p><p>使用扩展运算符(<code>...</code>)和<code>Array.prototype.forEach()</code>来清除指定的每个元素的<code>display</code>属性。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> show = <span class="function">(<span class="params">...el</span>) =&gt;</span> [...el].forEach(<span class="function"><span class="params">e</span> =&gt;</span> (e.style.display = <span class="string">''</span>));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">show(...document.querySelectorAll(<span class="string">'img'</span>)); <span class="comment">// Shows all &lt;img&gt; elements on the page</span></span><br></pre></td></tr></table></figure><h2 id="smoothScroll"><a href="#smoothScroll" class="headerlink" title="smoothScroll"></a>smoothScroll</h2><p>将调用它的元素平滑滚动到浏览器窗口的可见区域。</p><p>使用<code>.scrollIntoView</code>方法滚动元素。将<code>{ behavior: &#39;smooth&#39; }</code>传递给<code>.scrollIntoView</code>，以便平滑滚动。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> smoothScroll = <span class="function"><span class="params">element</span> =&gt;</span></span><br><span class="line">  <span class="built_in">document</span>.querySelector(element).scrollIntoView(&#123;</span><br><span class="line">    behavior: <span class="string">'smooth'</span></span><br><span class="line">  &#125;);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">smoothScroll(<span class="string">'#fooBar'</span>); <span class="comment">// scrolls smoothly to the element with the id fooBar</span></span><br><span class="line">smoothScroll(<span class="string">'.fooBar'</span>); <span class="comment">// scrolls smoothly to the first element with a class of fooBar</span></span><br></pre></td></tr></table></figure><h2 id="toggleClass"><a href="#toggleClass" class="headerlink" title="toggleClass"></a>toggleClass</h2><p>切换元素的类。</p><p>使用<code>element.classList.toggle()</code>为元素切换指定的类。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> toggleClass = <span class="function">(<span class="params">el, className</span>) =&gt;</span> el.classList.toggle(className);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">toggleClass(<span class="built_in">document</span>.querySelector(<span class="string">'p.special'</span>), <span class="string">'special'</span>); <span class="comment">// The paragraph will not have the 'special' class anymore</span></span><br></pre></td></tr></table></figure><h2 id="triggerEvent"><a href="#triggerEvent" class="headerlink" title="triggerEvent"></a>triggerEvent</h2><p>触发给定元素上的特定事件，可选传递自定义数据。</p><p>使用<code>new CustomEvent()</code>按照指定的<code>eventType</code>和详细信息创建事件。使用<code>el.dispatchEvent()</code>在给定元素上触发新创建的事件。如果不想将自定义数据传递给触发事件，请省略第三个参数<code>detail</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> triggerEvent = <span class="function">(<span class="params">el, eventType, detail</span>) =&gt;</span></span><br><span class="line">  el.dispatchEvent(<span class="keyword">new</span> CustomEvent(eventType, &#123; detail &#125;));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">triggerEvent(<span class="built_in">document</span>.getElementById(<span class="string">'myId'</span>), <span class="string">'click'</span>);</span><br><span class="line">triggerEvent(<span class="built_in">document</span>.getElementById(<span class="string">'myId'</span>), <span class="string">'click'</span>, &#123; <span class="attr">username</span>: <span class="string">'bob'</span> &#125;);</span><br></pre></td></tr></table></figure><h2 id="UUIDGeneratorBrowser"><a href="#UUIDGeneratorBrowser" class="headerlink" title="UUIDGeneratorBrowser"></a>UUIDGeneratorBrowser</h2><p>在浏览器中生成UUID。</p><p>使用<code>crypto API</code>生成UUID，并且符合<a href="https://www.ietf.org/rfc/rfc4122.txt" rel="external nofollow noopener noreferrer" target="_blank">RFC4122</a>版本4。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">onst UUIDGeneratorBrowser = <span class="function"><span class="params">()</span> =&gt;</span></span><br><span class="line">  ([<span class="number">1e7</span>] + <span class="number">-1e3</span> + <span class="number">-4e3</span> + <span class="number">-8e3</span> + <span class="number">-1e11</span>).replace(<span class="regexp">/[018]/g</span>, c =&gt;</span><br><span class="line">    (c ^ (crypto.getRandomValues(<span class="keyword">new</span> <span class="built_in">Uint8Array</span>(<span class="number">1</span>))[<span class="number">0</span>] &amp; (<span class="number">15</span> &gt;&gt; (c / <span class="number">4</span>)))).toString(<span class="number">16</span>)</span><br><span class="line">  );</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">UUIDGeneratorBrowser(); <span class="comment">// '7982fcfe-5721-4632-bede-6000885be57d'</span></span><br></pre></td></tr></table></figure><h1 id="Date"><a href="#Date" class="headerlink" title="Date"></a>Date</h1><h2 id="dayOfYear"><a href="#dayOfYear" class="headerlink" title="dayOfYear"></a>dayOfYear</h2><p>从<code>Date</code>对象获取一年中的某一天的天数。</p><p>使用<code>new Date()</code>和<code>Date.prototype.getFullYear()</code>获取一年中的第一天作为<code>Date</code>对象，将提供的<code>date</code>中减去该日期，然后除以每天的毫秒得出结果。使用<code>Math.floor()</code>将得到的天数向下取整为整数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dayOfYear = <span class="function"><span class="params">date</span> =&gt;</span></span><br><span class="line">  <span class="built_in">Math</span>.floor((date - <span class="keyword">new</span> <span class="built_in">Date</span>(date.getFullYear(), <span class="number">0</span>, <span class="number">0</span>)) / <span class="number">1000</span> / <span class="number">60</span> / <span class="number">60</span> / <span class="number">24</span>);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">dayOfYear(<span class="keyword">new</span> <span class="built_in">Date</span>()); <span class="comment">// 272</span></span><br></pre></td></tr></table></figure><h2 id="formatDuration"><a href="#formatDuration" class="headerlink" title="formatDuration"></a>formatDuration</h2><p>返回给定毫秒数的正常可读格式。</p><p>将<code>ms</code>除以对应的值，获得<code>day</code>、<code>hour</code>、<code>minute</code>、<code>second</code>和<code>millisecond</code>。将<code>Object.entries()</code>与<code>Array.prototype.filter()</code>一起使用，只保留非零值。使用<code>Array.prototype.map()</code>为每个值创建字符串。使用<code>String.prototype.join(&#39;, &#39;)</code>将这些值组合成一个字符串。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> formatDuration = <span class="function"><span class="params">ms</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (ms &lt; <span class="number">0</span>) ms = -ms;</span><br><span class="line">  <span class="keyword">const</span> time = &#123;</span><br><span class="line">    day: <span class="built_in">Math</span>.floor(ms / <span class="number">86400000</span>),</span><br><span class="line">    hour: <span class="built_in">Math</span>.floor(ms / <span class="number">3600000</span>) % <span class="number">24</span>,</span><br><span class="line">    minute: <span class="built_in">Math</span>.floor(ms / <span class="number">60000</span>) % <span class="number">60</span>,</span><br><span class="line">    second: <span class="built_in">Math</span>.floor(ms / <span class="number">1000</span>) % <span class="number">60</span>,</span><br><span class="line">    millisecond: <span class="built_in">Math</span>.floor(ms) % <span class="number">1000</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.entries(time)</span><br><span class="line">    .filter(<span class="function"><span class="params">val</span> =&gt;</span> val[<span class="number">1</span>] !== <span class="number">0</span>)</span><br><span class="line">    .map(<span class="function">(<span class="params">[key, val]</span>) =&gt;</span> <span class="string">`<span class="subst">$&#123;val&#125;</span> <span class="subst">$&#123;key&#125;</span><span class="subst">$&#123;val !== <span class="number">1</span> ? <span class="string">'s'</span> : <span class="string">''</span>&#125;</span>`</span>)</span><br><span class="line">    .join(<span class="string">', '</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">formatDuration(<span class="number">1001</span>); <span class="comment">// '1 second, 1 millisecond'</span></span><br><span class="line">formatDuration(<span class="number">34325055574</span>); <span class="comment">// '397 days, 6 hours, 44 minutes, 15 seconds, 574 milliseconds'</span></span><br></pre></td></tr></table></figure><h2 id="getColonTimeFromDate"><a href="#getColonTimeFromDate" class="headerlink" title="getColonTimeFromDate"></a>getColonTimeFromDate</h2><p>从<code>Date</code>对象返回<code>HH:MM:SS</code>形式的字符串。</p><p>使用<code>Date.prototype.ToomString()</code>和<code>String.prototype.slice()</code>获取给定日期对象的<code>HH:MM:SS</code>部分。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getColonTimeFromDate = <span class="function"><span class="params">date</span> =&gt;</span> date.toTimeString().slice(<span class="number">0</span>, <span class="number">8</span>);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">getColonTimeFromDate(<span class="keyword">new</span> <span class="built_in">Date</span>()); <span class="comment">// "08:38:00"</span></span><br></pre></td></tr></table></figure><h2 id="getDaysDiffBetweenDates"><a href="#getDaysDiffBetweenDates" class="headerlink" title="getDaysDiffBetweenDates"></a>getDaysDiffBetweenDates</h2><p>返回两个日期之间的差值(以天为单位)。</p><p>计算两个日期对象之间的差值(以天为单位)。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getDaysDiffBetweenDates = <span class="function">(<span class="params">dateInitial, dateFinal</span>) =&gt;</span></span><br><span class="line">  (dateFinal - dateInitial) / (<span class="number">1000</span> * <span class="number">3600</span> * <span class="number">24</span>);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">getDaysDiffBetweenDates(<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">'2017-12-13'</span>), <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">'2017-12-22'</span>)); <span class="comment">// 9</span></span><br></pre></td></tr></table></figure><h2 id="getMeridiemSuffixOfInteger"><a href="#getMeridiemSuffixOfInteger" class="headerlink" title="getMeridiemSuffixOfInteger"></a>getMeridiemSuffixOfInteger</h2><p>将整数转换为字符串，根据其值添加<code>am</code>或<code>pm</code>。</p><p>使用取余运算符(<code>%</code>)和条件检查将整数转换为带子午线后缀的字符串12小时格式。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getMeridiemSuffixOfInteger = <span class="function"><span class="params">num</span> =&gt;</span></span><br><span class="line">  num === <span class="number">0</span> || num === <span class="number">24</span></span><br><span class="line">    ? <span class="number">12</span> + <span class="string">'am'</span></span><br><span class="line">    : num === <span class="number">12</span></span><br><span class="line">      ? <span class="number">12</span> + <span class="string">'pm'</span></span><br><span class="line">      : num &lt; <span class="number">12</span></span><br><span class="line">        ? (num % <span class="number">12</span>) + <span class="string">'am'</span></span><br><span class="line">        : (num % <span class="number">12</span>) + <span class="string">'pm'</span>;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">getMeridiemSuffixOfInteger(<span class="number">0</span>); <span class="comment">// "12am"</span></span><br><span class="line">getMeridiemSuffixOfInteger(<span class="number">11</span>); <span class="comment">// "11am"</span></span><br><span class="line">getMeridiemSuffixOfInteger(<span class="number">13</span>); <span class="comment">// "1pm"</span></span><br><span class="line">getMeridiemSuffixOfInteger(<span class="number">25</span>); <span class="comment">// "1pm"</span></span><br></pre></td></tr></table></figure><h2 id="isAfterDate"><a href="#isAfterDate" class="headerlink" title="isAfterDate"></a>isAfterDate</h2><p>检查一个日期是否在另一个日期之后。</p><p>使用大于运算符(<code>&gt;</code>)检查第一个日期是否在第二个日期之后。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isAfterDate = <span class="function">(<span class="params">dateA, dateB</span>) =&gt;</span> dateA &gt; dateB;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">isAfterDate(<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2010</span>, <span class="number">10</span>, <span class="number">21</span>), <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2010</span>, <span class="number">10</span>, <span class="number">20</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="isBeforeDate"><a href="#isBeforeDate" class="headerlink" title="isBeforeDate"></a>isBeforeDate</h2><p>检查一个日期是否在另一个日期之前。</p><p>使用小于运算符(<code>&lt;</code>)检查第一个日期是否在第二个日期之前。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isBeforeDate = <span class="function">(<span class="params">dateA, dateB</span>) =&gt;</span> dateA &lt; dateB;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">isBeforeDate(<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2010</span>, <span class="number">10</span>, <span class="number">20</span>), <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2010</span>, <span class="number">10</span>, <span class="number">21</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="isSameDate"><a href="#isSameDate" class="headerlink" title="isSameDate"></a>isSameDate</h2><p>检查一个日期是否与另一个日期相同。</p><p>使用<code>Date.prototype.toISOString()</code>和严格的相等性检查(<code>===</code>)来检查第一个日期是否与第二个日期相同。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isSameDate = <span class="function">(<span class="params">dateA, dateB</span>) =&gt;</span> dateA.toISOString() === dateB.toISOString();</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">isSameDate(<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2010</span>, <span class="number">10</span>, <span class="number">20</span>), <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2010</span>, <span class="number">10</span>, <span class="number">20</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="maxDate"><a href="#maxDate" class="headerlink" title="maxDate"></a>maxDate</h2><p>返回给定日期的最大值。</p><p>使用<code>Math.max.apply()</code>查找最大的日期，使用<code>new Date()</code>将其转换为<code>Date</code>对象。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> maxDate = <span class="function">(<span class="params">...dates</span>) =&gt;</span> <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Math</span>.max.apply(<span class="literal">null</span>, ...dates));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> array = [</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2017</span>, <span class="number">4</span>, <span class="number">13</span>),</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2018</span>, <span class="number">2</span>, <span class="number">12</span>),</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2016</span>, <span class="number">0</span>, <span class="number">10</span>),</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2016</span>, <span class="number">0</span>, <span class="number">9</span>)</span><br><span class="line">];</span><br><span class="line">maxDate(array); <span class="comment">// 2018-03-11T22:00:00.000Z</span></span><br></pre></td></tr></table></figure><h2 id="minDate"><a href="#minDate" class="headerlink" title="minDate"></a>minDate</h2><p>返回给定日期的最小值。</p><p>使用<code>Math.min.apply()</code>查找最小的日期，使用<code>new Date()</code>将其转换为<code>Date</code>对象。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> minDate = <span class="function">(<span class="params">...dates</span>) =&gt;</span> <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Math</span>.min.apply(<span class="literal">null</span>, ...dates));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> array = [</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2017</span>, <span class="number">4</span>, <span class="number">13</span>),</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2018</span>, <span class="number">2</span>, <span class="number">12</span>),</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2016</span>, <span class="number">0</span>, <span class="number">10</span>),</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2016</span>, <span class="number">0</span>, <span class="number">9</span>)</span><br><span class="line">];</span><br><span class="line">minDate(array); <span class="comment">// 2016-01-08T22:00:00.000Z</span></span><br></pre></td></tr></table></figure><h2 id="tomorrow"><a href="#tomorrow" class="headerlink" title="tomorrow"></a>tomorrow</h2><p>返回明天日期的字符串表示。</p><p>使用<code>new Date()</code>获取当前日期，将<code>Date.getDate()</code>增加1，并使用<code>Date.setDate()</code>将该值设置为结果。使用<code>Date.prototype.toISOString()</code>返回<code>yyyy-mm-dd</code>格式的字符串。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> tomorrow = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> t = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  t.setDate(t.getDate() + <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> t.toISOString().split(<span class="string">'T'</span>)[<span class="number">0</span>];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">tomorrow(); <span class="comment">// 2018-10-19 (if current date is 2018-10-18)</span></span><br></pre></td></tr></table></figure><h1 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h1><h2 id="attempt"><a href="#attempt" class="headerlink" title="attempt"></a>attempt</h2><p>尝试使用提供的参数调用函数，返回结果或捕获的错误对象。</p><p>使用<code>try...catch</code>块返回函数的结果或的错误。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> attempt = <span class="function">(<span class="params">fn, ...args</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> fn(...args);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="keyword">return</span> e <span class="keyword">instanceof</span> <span class="built_in">Error</span> ? e : <span class="keyword">new</span> <span class="built_in">Error</span>(e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">var</span> elements = attempt(<span class="function"><span class="keyword">function</span>(<span class="params">selector</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">document</span>.querySelectorAll(selector);</span><br><span class="line">&#125;, <span class="string">'&gt;_&gt;'</span>);</span><br><span class="line"><span class="keyword">if</span> (elements <span class="keyword">instanceof</span> <span class="built_in">Error</span>) elements = []; <span class="comment">// elements = []</span></span><br></pre></td></tr></table></figure><h2 id="bind"><a href="#bind" class="headerlink" title="bind"></a>bind</h2><p>创建一个在给定上下文中调用fn的函数，可以选择在参数的开头添加任何附加的参数。</p><p>返回一个使用<code>Function.prototype.apply()</code>将给定上下文应用于<code>fn</code>的函数。使用<code>Array.prototype.concat()</code>(译者注：实际是展开运算符)将附加的参数添加到提供的参数前。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bind = <span class="function">(<span class="params">fn, context, ...boundArgs</span>) =&gt;</span> (...args) =&gt; fn.apply(context, [...boundArgs, ...args]);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">greet</span>(<span class="params">greeting, punctuation</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> greeting + <span class="string">' '</span> + <span class="keyword">this</span>.user + punctuation;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> freddy = &#123; <span class="attr">user</span>: <span class="string">'fred'</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> freddyBound = bind(greet, freddy);</span><br><span class="line"><span class="built_in">console</span>.log(freddyBound(<span class="string">'hi'</span>, <span class="string">'!'</span>)); <span class="comment">// 'hi fred!'</span></span><br></pre></td></tr></table></figure><h2 id="bindKey"><a href="#bindKey" class="headerlink" title="bindKey"></a>bindKey</h2><p>创建一个函数，该函数在对象的给定<code>key</code>处调用方法，可以选择在参数的开头添加任何额外提供的参数。</p><p>返回一个使用<code>Function.prototype.apply()</code>将<code>context[fn]</code>绑定到<code>context</code>的函数。使用扩展运算符(<code>...</code>)将附加的参数添加到提供的参数前。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bindKey = <span class="function">(<span class="params">context, fn, ...boundArgs</span>) =&gt;</span> (...args) =&gt;</span><br><span class="line">  context[fn].apply(context, [...boundArgs, ...args]);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> freddy = &#123;</span><br><span class="line">  user: <span class="string">'fred'</span>,</span><br><span class="line">  greet: <span class="function"><span class="keyword">function</span>(<span class="params">greeting, punctuation</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> greeting + <span class="string">' '</span> + <span class="keyword">this</span>.user + punctuation;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> freddyBound = bindKey(freddy, <span class="string">'greet'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(freddyBound(<span class="string">'hi'</span>, <span class="string">'!'</span>)); <span class="comment">// 'hi fred!'</span></span><br></pre></td></tr></table></figure><h2 id="chainAsync"><a href="#chainAsync" class="headerlink" title="chainAsync"></a>chainAsync</h2><p>异步函数链式调用。</p><p>遍历包含异步事件的函数数组，当每个异步事件完成时调用next。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> chainAsync = <span class="function"><span class="params">fns</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> curr = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">const</span> last = fns[fns.length - <span class="number">1</span>];</span><br><span class="line">  <span class="keyword">const</span> next = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> fn = fns[curr++];</span><br><span class="line">    fn === last ? fn() : fn(next);</span><br><span class="line">  &#125;;</span><br><span class="line">  next();</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">chainAsync([</span><br><span class="line">  next =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'0 seconds'</span>);</span><br><span class="line">    setTimeout(next, <span class="number">1000</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  next =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'1 second'</span>);</span><br><span class="line">    setTimeout(next, <span class="number">1000</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'2 second'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">]);</span><br></pre></td></tr></table></figure><h2 id="checkProp"><a href="#checkProp" class="headerlink" title="checkProp"></a>checkProp</h2><p>给定一个<code>predicate</code>函数和一个<code>prop</code>字符串，柯里化函数将传入<code>object</code>的属性给<code>predicate</code>调用。</p><p>调用<code>obj</code>上的<code>prop</code>，将其传递给提供的<code>predicate</code>函数，并返回函数执行后的布尔值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> checkProp = <span class="function">(<span class="params">predicate, prop</span>) =&gt;</span> obj =&gt; !!predicate(obj[prop]);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> lengthIs4 = checkProp(<span class="function"><span class="params">l</span> =&gt;</span> l === <span class="number">4</span>, <span class="string">'length'</span>);</span><br><span class="line">lengthIs4([]); <span class="comment">// false</span></span><br><span class="line">lengthIs4([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]); <span class="comment">// true</span></span><br><span class="line">lengthIs4(<span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])); <span class="comment">// false (Set uses Size, not length)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> session = &#123; <span class="attr">user</span>: &#123;&#125; &#125;;</span><br><span class="line"><span class="keyword">const</span> validUserSession = checkProps(<span class="function"><span class="params">u</span> =&gt;</span> u.active &amp;&amp; !u.disabled, <span class="string">'user'</span>);</span><br><span class="line"></span><br><span class="line">validUserSession(session); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">session.user.active = <span class="literal">true</span>;</span><br><span class="line">validUserSession(session); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> noLength(<span class="function"><span class="params">l</span> =&gt;</span> l === <span class="literal">undefined</span>, <span class="string">'length'</span>);</span><br><span class="line">noLength([]); <span class="comment">// false</span></span><br><span class="line">noLength(&#123;&#125;); <span class="comment">// true</span></span><br><span class="line">noLength(<span class="keyword">new</span> <span class="built_in">Set</span>()); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="compose"><a href="#compose" class="headerlink" title="compose"></a>compose</h2><p>从右向左的执行函数。</p><p>使用<code>Array.prototype.reduce()</code>执行从右向左的函数组合。最后一个(最右边的)函数可以接受一个或多个参数；剩余的函数必须是一元的。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> compose = <span class="function">(<span class="params">...fns</span>) =&gt;</span> fns.reduce(<span class="function">(<span class="params">f, g</span>) =&gt;</span> (...args) =&gt; f(g(...args)));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> add5 = <span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">const</span> multiply = <span class="function">(<span class="params">x, y</span>) =&gt;</span> x * y;</span><br><span class="line"><span class="keyword">const</span> multiplyAndAdd5 = compose(</span><br><span class="line">  add5,</span><br><span class="line">  multiply</span><br><span class="line">);</span><br><span class="line">multiplyAndAdd5(<span class="number">5</span>, <span class="number">2</span>); <span class="comment">// 15</span></span><br></pre></td></tr></table></figure><h2 id="composeRight"><a href="#composeRight" class="headerlink" title="composeRight"></a>composeRight</h2><p>从左向右的执行函数。</p><p>使用<code>Array.prototype.reduce()</code>执行从左向右的函数组合。第一个(最右边的)函数可以接受一个或多个参数；剩余的函数必须是一元的。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> composeRight = <span class="function">(<span class="params">...fns</span>) =&gt;</span> fns.reduce(<span class="function">(<span class="params">f, g</span>) =&gt;</span> (...args) =&gt; g(f(...args)));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> add = <span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y;</span><br><span class="line"><span class="keyword">const</span> square = <span class="function"><span class="params">x</span> =&gt;</span> x * x;</span><br><span class="line"><span class="keyword">const</span> addAndSquare = composeRight(add, square);</span><br><span class="line">addAndSquare(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// 9</span></span><br></pre></td></tr></table></figure><h2 id="converge"><a href="#converge" class="headerlink" title="converge"></a>converge</h2><p>接受收敛函数和分支函数列表，并返回每个分支函数执行传入参数的结果，分支函数的结果作为参数传递给收敛函数。</p><p>使用Array.prototype.map()和Function.prototype.apply()将每个函数应用于给定的参数。使用扩展运算符(…)用所有其他函数的结果调用coverger。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> converge = <span class="function">(<span class="params">converger, fns</span>) =&gt;</span> (...args) =&gt; converger(...fns.map(<span class="function"><span class="params">fn</span> =&gt;</span> fn.apply(<span class="literal">null</span>, args)));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> average = converge(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a / b, [</span><br><span class="line">  arr =&gt; arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> a + v, <span class="number">0</span>),</span><br><span class="line">  arr =&gt; arr.length</span><br><span class="line">]);</span><br><span class="line">average([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]); <span class="comment">// 4</span></span><br></pre></td></tr></table></figure><h2 id="curry"><a href="#curry" class="headerlink" title="curry"></a>curry</h2><p>柯里化一个函数。</p><p>使用递归。如果提供的参数(args)数量足够，则调用传递的函数fn。否则，返回期望其余参数的curried函数fn。如果您想要获取一个接受可变参数数的函数(一个可变函数，例如Math.min())，您可以选择将参数数传递给第二个参数arity。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> curry = <span class="function">(<span class="params">fn, arity = fn.length, ...args</span>) =&gt;</span></span><br><span class="line">  arity &lt;= args.length ? fn(...args) : curry.bind(<span class="literal">null</span>, fn, arity, ...args);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">curry(<span class="built_in">Math</span>.pow)(<span class="number">2</span>)(<span class="number">10</span>); <span class="comment">// 1024</span></span><br><span class="line">curry(<span class="built_in">Math</span>.min, <span class="number">3</span>)(<span class="number">10</span>)(<span class="number">50</span>)(<span class="number">2</span>); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><h2 id="debounce"><a href="#debounce" class="headerlink" title="debounce"></a>debounce</h2><p>创建一个去抖函数，将给定的函数经过至少<code>ms</code>毫秒延迟后才会被调用。</p><p>每次调用去抖函数时，先使用<code>clearTimeout()</code>清除当前挂起的定时器id，并使用<code>setTimeout()</code>方法创建一个新的定时器，该定时器将调用函数<code>ms</code>毫秒后执行。使用<code>Function.prototype.apply()</code>将上下文应用于函数，并提供必要的参数。省略第二个参数<code>ms</code>，将超时设置为默认值0 ms。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> debounce = <span class="function">(<span class="params">fn, ms = <span class="number">0</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> timeoutId;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    clearTimeout(timeoutId);</span><br><span class="line">    timeoutId = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> fn.apply(<span class="keyword">this</span>, args), ms);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(</span><br><span class="line">  <span class="string">'resize'</span>,</span><br><span class="line">  debounce(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">window</span>.innerWidth);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">window</span>.innerHeight);</span><br><span class="line">  &#125;, <span class="number">250</span>)</span><br><span class="line">); <span class="comment">// Will log the window dimensions at most every 250ms</span></span><br></pre></td></tr></table></figure><h2 id="defer"><a href="#defer" class="headerlink" title="defer"></a>defer</h2><p>推迟调用函数，直到当前调用堆栈被清除。</p><p>使用超时为1毫秒的<code>setTimeout()</code>方法向浏览器事件队列添加新事件，并允许渲染引擎完成其工作。使用跨页(…)运算符为函数提供任意数量的参数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> defer = <span class="function">(<span class="params">fn, ...args</span>) =&gt;</span> setTimeout(fn, <span class="number">1</span>, ...args);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="comment">// Example A:</span></span><br><span class="line">defer(<span class="built_in">console</span>.log, <span class="string">'a'</span>), <span class="built_in">console</span>.log(<span class="string">'b'</span>); <span class="comment">// logs 'b' then 'a'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Example B:</span></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'#someElement'</span>).innerHTML = <span class="string">'Hello'</span>;</span><br><span class="line">longRunningFunction(); <span class="comment">// Browser will not update the HTML until this has finished</span></span><br><span class="line">defer(longRunningFunction); <span class="comment">// Browser will update the HTML then run the function</span></span><br></pre></td></tr></table></figure><h2 id="functionName"><a href="#functionName" class="headerlink" title="functionName"></a>functionName</h2><p>记录函数的名称。</p><p>使用<code>console.debug()</code>和传入函数的name属性，将函数的名称输出到控制台的调试消息中。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> functionName = <span class="function"><span class="params">fn</span> =&gt;</span> (<span class="built_in">console</span>.debug(fn.name), fn);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">functionName(<span class="built_in">Math</span>.max); <span class="comment">// max (logged in debug channel of console)</span></span><br></pre></td></tr></table></figure><h2 id="hz"><a href="#hz" class="headerlink" title="hz"></a>hz</h2><p>返回一个函数每秒执行的次数。<code>hz</code>是频率的单位，频率单位定义为每秒一个周期。</p><p>使用<code>performance.now()</code>获取函数执行前后的毫秒差，以计算执行函数迭代次数所用的时间。通过将毫秒转换为秒并将它除以经过的时间，返回每秒的周期数。省略第二个参数<code>iterations</code>，使用默认值100次迭代。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> hz = <span class="function">(<span class="params">fn, iterations = <span class="number">100</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> before = performance.now();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; iterations; i++) fn();</span><br><span class="line">  <span class="keyword">return</span> (<span class="number">1000</span> * iterations) / (performance.now() - before);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="comment">// 10,000 element array</span></span><br><span class="line"><span class="keyword">const</span> numbers = <span class="built_in">Array</span>(<span class="number">10000</span>)</span><br><span class="line">  .fill()</span><br><span class="line">  .map(<span class="function">(<span class="params">_, i</span>) =&gt;</span> i);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Test functions with the same goal: sum up the elements in the array</span></span><br><span class="line"><span class="keyword">const</span> sumReduce = <span class="function"><span class="params">()</span> =&gt;</span> numbers.reduce(<span class="function">(<span class="params">acc, n</span>) =&gt;</span> acc + n, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">const</span> sumForLoop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; numbers.length; i++) sum += numbers[i];</span><br><span class="line">  <span class="keyword">return</span> sum;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// `sumForLoop` is nearly 10 times faster</span></span><br><span class="line"><span class="built_in">Math</span>.round(hz(sumReduce)); <span class="comment">// 572</span></span><br><span class="line"><span class="built_in">Math</span>.round(hz(sumForLoop)); <span class="comment">// 4784</span></span><br></pre></td></tr></table></figure><h2 id="memoize"><a href="#memoize" class="headerlink" title="memoize"></a>memoize</h2><p>返回缓存函数。</p><p>通过实例化新的<code>Map</code>对象来创建空缓存。返回一个函数，该函数通过首先检查函数对于该特定输入值的输出是否已经缓存，或者如果没有缓存，则存储并返回它，从而将单个参数提供给memoized函数。必须使用function关键字，以便在必要时允许memoized函数更改其上下文。通过将缓存设置为返回函数的属性，允许访问缓存。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> memoize = <span class="function"><span class="params">fn</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> cache = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">  <span class="keyword">const</span> cached = <span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> cache.has(val) ? cache.get(val) : cache.set(val, fn.call(<span class="keyword">this</span>, val)) &amp;&amp; cache.get(val);</span><br><span class="line">  &#125;;</span><br><span class="line">  cached.cache = cache;</span><br><span class="line">  <span class="keyword">return</span> cached;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="comment">// See the `anagrams` snippet.</span></span><br><span class="line"><span class="keyword">const</span> anagramsCached = memoize(anagrams);</span><br><span class="line">anagramsCached(<span class="string">'javascript'</span>); <span class="comment">// takes a long time</span></span><br><span class="line">anagramsCached(<span class="string">'javascript'</span>); <span class="comment">// returns virtually instantly since it's now cached</span></span><br><span class="line"><span class="built_in">console</span>.log(anagramsCached.cache); <span class="comment">// The cached anagrams map</span></span><br></pre></td></tr></table></figure><h2 id="negate"><a href="#negate" class="headerlink" title="negate"></a>negate</h2><p>否定函数。</p><p>执行传入函数并应用not运算符(<code>!</code>)。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> negate = <span class="function"><span class="params">func</span> =&gt;</span> (...args) =&gt; !func(...args);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>].filter(negate(<span class="function"><span class="params">n</span> =&gt;</span> n % <span class="number">2</span> === <span class="number">0</span>)); <span class="comment">// [ 1, 3, 5 ]</span></span><br></pre></td></tr></table></figure><h2 id="once"><a href="#once" class="headerlink" title="once"></a>once</h2><p>确保函数只被调用一次。</p><p>使用闭包，定义一个标志<code>called</code>，并在第一次调用函数时将其设置为<code>true</code>，防止再次调用它。为了允许函数改变其上下文(例如在事件监听器中)，必须使用function关键字，并且所提供的函数必须应用上下文。允许使用展开运算符为函数提供任意数量的参数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> once = <span class="function"><span class="params">fn</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> called = <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (called) <span class="keyword">return</span>;</span><br><span class="line">    called = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> fn.apply(<span class="keyword">this</span>, args);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> startApp = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>, event); <span class="comment">// document.body, MouseEvent</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">'click'</span>, once(startApp)); <span class="comment">// only runs `startApp` once upon click</span></span><br></pre></td></tr></table></figure><h2 id="partial"><a href="#partial" class="headerlink" title="partial"></a>partial</h2><p>创建一个调用<code>fn</code>的函数，该函数在其接收的参数前添加了<code>partials</code>参数。</p><p>使用扩展运算符(<code>...</code>)在fn的参数列表前添加新参数<code>partials</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> partial = <span class="function">(<span class="params">fn, ...partials</span>) =&gt;</span> (...args) =&gt; fn(...partials, ...args);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> greet = <span class="function">(<span class="params">greeting, name</span>) =&gt;</span> greeting + <span class="string">' '</span> + name + <span class="string">'!'</span>;</span><br><span class="line"><span class="keyword">const</span> greetHello = partial(greet, <span class="string">'Hello'</span>);</span><br><span class="line">greetHello(<span class="string">'John'</span>); <span class="comment">// 'Hello John!'</span></span><br></pre></td></tr></table></figure><h2 id="partialRight"><a href="#partialRight" class="headerlink" title="partialRight"></a>partialRight</h2><p>创建一个调用<code>fn</code>的函数，该函数在其接收的参数后添加了<code>partials</code>参数。</p><p>使用扩展运算符(<code>...</code>)在<code>fn</code>的参数列表后添加新参数<code>partials</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> partialRight = <span class="function">(<span class="params">fn, ...partials</span>) =&gt;</span> (...args) =&gt; fn(...args, ...partials);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> greet = <span class="function">(<span class="params">greeting, name</span>) =&gt;</span> greeting + <span class="string">' '</span> + name + <span class="string">'!'</span>;</span><br><span class="line"><span class="keyword">const</span> greetJohn = partialRight(greet, <span class="string">'John'</span>);</span><br><span class="line">greetJohn(<span class="string">'Hello'</span>); <span class="comment">// 'Hello John!'</span></span><br></pre></td></tr></table></figure><h2 id="runPromisesInSeries"><a href="#runPromisesInSeries" class="headerlink" title="runPromisesInSeries"></a>runPromisesInSeries</h2><p>执行一串promise。</p><p>使用Array.prototype.reduce()创建一个promise链，其中每个promise在解析后返回给下一个promise。</p><h2 id="sleep"><a href="#sleep" class="headerlink" title="sleep"></a>sleep</h2><p>延迟异步函数的执行。</p><p>通过将<code>async</code>函数置于睡眠状态，延迟执行异步函数，返回一个<code>Promise</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sleep = <span class="function"><span class="params">ms</span> =&gt;</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> setTimeout(resolve, ms));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">sleepyWork</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"I'm going to sleep for 1 second."</span>);</span><br><span class="line">  <span class="keyword">await</span> sleep(<span class="number">1000</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'I woke up after 1 second.'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="throttle"><a href="#throttle" class="headerlink" title="throttle"></a>throttle</h2><p>创建一个节流函数，该函数每隔<code>wait</code>毫秒调用一次所提供的函数。</p><p>使用<code>setTimeout()</code>方法和<code>clearTimeout()</code>来节流给定的方法<code>fn</code>。使用<code>Function.prototype.apply()</code>将上下文应用于函数，并提供必要的参数。使用<code>Date.now()</code>来跟踪上次调用节流函数的时间。省略第二个参数<code>wait</code>，将定时器设置为默认值0毫秒。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> throttle = <span class="function">(<span class="params">fn, wait</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> inThrottle, lastFn, lastTime;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> context = <span class="keyword">this</span>,</span><br><span class="line">      args = <span class="built_in">arguments</span>;</span><br><span class="line">    <span class="keyword">if</span> (!inThrottle) &#123;</span><br><span class="line">      fn.apply(context, args);</span><br><span class="line">      lastTime = <span class="built_in">Date</span>.now();</span><br><span class="line">      inThrottle = <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      clearTimeout(lastFn);</span><br><span class="line">      lastFn = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">Date</span>.now() - lastTime &gt;= wait) &#123;</span><br><span class="line">          fn.apply(context, args);</span><br><span class="line">          lastTime = <span class="built_in">Date</span>.now();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, <span class="built_in">Math</span>.max(wait - (<span class="built_in">Date</span>.now() - lastTime), <span class="number">0</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(</span><br><span class="line">  <span class="string">'resize'</span>,</span><br><span class="line">  throttle(<span class="function"><span class="keyword">function</span>(<span class="params">evt</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">window</span>.innerWidth);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">window</span>.innerHeight);</span><br><span class="line">  &#125;, <span class="number">250</span>)</span><br><span class="line">); <span class="comment">// Will log the window dimensions at most every 250ms</span></span><br></pre></td></tr></table></figure><h2 id="times"><a href="#times" class="headerlink" title="times"></a>times</h2><p>迭代回调n次。</p><p>使用<code>Function.call()</code>调用<code>fn</code> <code>n</code>次或者直到它返回<code>false</code>。省略最后一个参数<code>context</code>，将使用<code>undefined</code>对象(或者非严格模式下的全局对象)。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> times = <span class="function">(<span class="params">n, fn, context = <span class="literal">undefined</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (fn.call(context, i) !== <span class="literal">false</span> &amp;&amp; ++i &lt; n) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">var</span> output = <span class="string">''</span>;</span><br><span class="line">times(<span class="number">5</span>, i =&gt; (output += i));</span><br><span class="line"><span class="built_in">console</span>.log(output); <span class="comment">// 01234</span></span><br></pre></td></tr></table></figure><h2 id="uncurry"><a href="#uncurry" class="headerlink" title="uncurry"></a>uncurry</h2><p>反柯里化至深度n。</p><p>返回一个可变参函数。对提供的参数使用<code>Array.prototype.reduce()</code>调用函数的每个后续柯里化级别。如果提供的参数的长度小于<code>n</code>，则抛出一个错误。否则，使用<code>Array.prototype.slice(0，n)</code>用给定数量的参数调用fn。省略第二个参数<code>n</code>，默认深度1。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> uncurry = <span class="function">(<span class="params">fn, n = <span class="number">1</span></span>) =&gt;</span> (...args) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> next = <span class="function"><span class="params">acc</span> =&gt;</span> args =&gt; args.reduce(<span class="function">(<span class="params">x, y</span>) =&gt;</span> x(y), acc);</span><br><span class="line">  <span class="keyword">if</span> (n &gt; args.length) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">RangeError</span>(<span class="string">'Arguments too few!'</span>);</span><br><span class="line">  <span class="keyword">return</span> next(fn)(args.slice(<span class="number">0</span>, n));</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> add = <span class="function"><span class="params">x</span> =&gt;</span> y =&gt; <span class="function"><span class="params">z</span> =&gt;</span> x + y + z;</span><br><span class="line"><span class="keyword">const</span> uncurriedAdd = uncurry(add, <span class="number">3</span>);</span><br><span class="line">uncurriedAdd(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// 6</span></span><br></pre></td></tr></table></figure><h2 id="unfold"><a href="#unfold" class="headerlink" title="unfold"></a>unfold</h2><p>使用迭代函数和初始值构建数组。</p><p>使用<code>while</code>循环和<code>Array.prototype.push()</code>重复调用该函数，直到它返回<code>false</code>。迭代器函数接受一个参数(<code>seed</code>)，并且必须始终返回一个包含两个元素([<code>value</code>，<code>nextSeed</code>)的数组或<code>false</code>才能终止。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> unfold = <span class="function">(<span class="params">fn, seed</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> result = [],</span><br><span class="line">    val = [<span class="literal">null</span>, seed];</span><br><span class="line">  <span class="keyword">while</span> ((val = fn(val[<span class="number">1</span>]))) result.push(val[<span class="number">0</span>]);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="params">n</span> =&gt;</span> (n &gt; <span class="number">50</span> ? <span class="literal">false</span> : [-n, n + <span class="number">10</span>]);</span><br><span class="line">unfold(f, <span class="number">10</span>); <span class="comment">// [-10, -20, -30, -40, -50]</span></span><br></pre></td></tr></table></figure><h2 id="when"><a href="#when" class="headerlink" title="when"></a>when</h2><p>根据传入的函数测试值<code>x</code>。如果为<code>true</code>，返回<code>fn(x)</code>。否则，返回<code>x</code>。</p><p>返回一个期望单个值<code>x</code>的函数，该值根据<code>pred</code>返回适当的值。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> when = <span class="function">(<span class="params">pred, whenTrue</span>) =&gt;</span> x =&gt; (pred(x) ? whenTrue(x) : x);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="keyword">const</span> doubleEvenNumbers = when(<span class="function"><span class="params">x</span> =&gt;</span> x % <span class="number">2</span> === <span class="number">0</span>, x =&gt; x * <span class="number">2</span>);</span><br><span class="line">doubleEvenNumbers(<span class="number">2</span>); <span class="comment">// 4</span></span><br><span class="line">doubleEvenNumbers(<span class="number">1</span>); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><h1 id="Math"><a href="#Math" class="headerlink" title="Math"></a>Math</h1><h2 id="approximatelyEqual"><a href="#approximatelyEqual" class="headerlink" title="approximatelyEqual"></a>approximatelyEqual</h2><p>检查两个数字在误差范围是否大致相等。</p><p>使用<code>Math.abs()</code>将两个数差值的绝对值与<code>epsilon</code>(译者注：高数中的ε)进行比较。省略第三个参数<code>epsilon</code>，使用默认值<code>0.001</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> approximatelyEqual = <span class="function">(<span class="params">v1, v2, epsilon = <span class="number">0.001</span></span>) =&gt;</span> <span class="built_in">Math</span>.abs(v1 - v2) &lt; epsilon;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">approximatelyEqual(<span class="built_in">Math</span>.PI / <span class="number">2.0</span>, <span class="number">1.5708</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="average"><a href="#average" class="headerlink" title="average"></a>average</h2><p>返回两个或多个数字的平均值。</p><p>使用<code>Array.prototype.reduce()</code>将所有值添加到累加器中，用值<code>0</code>初始化，除以数组长度。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> average = <span class="function">(<span class="params">...nums</span>) =&gt;</span> nums.reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + val, <span class="number">0</span>) / nums.length;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">average(...[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]); <span class="comment">// 2</span></span><br><span class="line">average(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><h2 id="averageBy"><a href="#averageBy" class="headerlink" title="averageBy"></a>averageBy</h2><p>使用提供的函数将每个元素映射到一个值后，返回数组的平均值。</p><p>使用<code>Array.prototype.map()</code>将每个元素映射到由<code>fn</code>返回的值，用<code>Array.prototype.reduce()</code>将每个值添加到累加器中，并用<code>0</code>初始化，之后除以数组的长度。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> averageBy = <span class="function">(<span class="params">arr, fn</span>) =&gt;</span></span><br><span class="line">  arr.map(<span class="keyword">typeof</span> fn === <span class="string">'function'</span> ? fn : <span class="function"><span class="params">val</span> =&gt;</span> val[fn]).reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + val, <span class="number">0</span>) /</span><br><span class="line">  arr.length;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">averageBy([&#123; <span class="attr">n</span>: <span class="number">4</span> &#125;, &#123; <span class="attr">n</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">n</span>: <span class="number">8</span> &#125;, &#123; <span class="attr">n</span>: <span class="number">6</span> &#125;], o =&gt; o.n); <span class="comment">// 5</span></span><br><span class="line">averageBy([&#123; <span class="attr">n</span>: <span class="number">4</span> &#125;, &#123; <span class="attr">n</span>: <span class="number">2</span> &#125;, &#123; <span class="attr">n</span>: <span class="number">8</span> &#125;, &#123; <span class="attr">n</span>: <span class="number">6</span> &#125;], <span class="string">'n'</span>); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><h2 id="binomialCoefficient"><a href="#binomialCoefficient" class="headerlink" title="binomialCoefficient"></a>binomialCoefficient</h2><p>计算两个整数<code>n</code>和<code>k</code>的二项式系数。</p><p>使用<code>Number.isNaN()</code>检查两个值中是否有一个是<code>NaN</code>。检查<code>k</code>的值，如果小于<code>0</code>或大于<code>n</code>返回0，如果等于<code>0</code>或等于<code>n</code>返回1，如果等于<code>1</code>或等于<code>n - 1</code>返回<code>n</code>。检查<code>n - k</code>是否小于<code>k</code>，并相应地交换它们的值。从<code>2</code>到<code>k</code>循环并计算二项式系数。使用<code>Math.round()</code>计算舍入误差。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> binomialCoefficient = <span class="function">(<span class="params">n, k</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">Number</span>.isNaN(n) || <span class="built_in">Number</span>.isNaN(k)) <span class="keyword">return</span> <span class="literal">NaN</span>;</span><br><span class="line">  <span class="keyword">if</span> (k &lt; <span class="number">0</span> || k &gt; n) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span> (k === <span class="number">0</span> || k === n) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">if</span> (k === <span class="number">1</span> || k === n - <span class="number">1</span>) <span class="keyword">return</span> n;</span><br><span class="line">  <span class="keyword">if</span> (n - k &lt; k) k = n - k;</span><br><span class="line">  <span class="keyword">let</span> res = n;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">2</span>; j &lt;= k; j++) res *= (n - j + <span class="number">1</span>) / j;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.round(res);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">binomialCoefficient(<span class="number">8</span>, <span class="number">2</span>); <span class="comment">// 28</span></span><br></pre></td></tr></table></figure><h2 id="clampNumber"><a href="#clampNumber" class="headerlink" title="clampNumber"></a>clampNumber</h2><p>在边界值<code>a</code>和<code>b</code>指定的包含范围内的更接近的<code>num</code>。</p><p>如果<code>num</code>落在该范围内，则返回<code>num</code>。否则，返回范围内最近的数字。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> clampNumber = <span class="function">(<span class="params">num, a, b</span>) =&gt;</span> <span class="built_in">Math</span>.max(<span class="built_in">Math</span>.min(num, <span class="built_in">Math</span>.max(a, b)), <span class="built_in">Math</span>.min(a, b));</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">clampNumber(<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>); <span class="comment">// 3</span></span><br><span class="line">clampNumber(<span class="number">1</span>, <span class="number">-1</span>, <span class="number">-5</span>); <span class="comment">// -1</span></span><br></pre></td></tr></table></figure><h2 id="degreesToRads"><a href="#degreesToRads" class="headerlink" title="degreesToRads"></a>degreesToRads</h2><p>将角度从角度转换为弧度。</p><p>使用<code>Math.PI</code>和弧度公式将角度从度数转换为弧度。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> degreesToRads = <span class="function"><span class="params">deg</span> =&gt;</span> (deg * <span class="built_in">Math</span>.PI) / <span class="number">180.0</span>;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">degreesToRads(<span class="number">90.0</span>); <span class="comment">// ~1.5708</span></span><br></pre></td></tr></table></figure><h2 id="digitize"><a href="#digitize" class="headerlink" title="digitize"></a>digitize</h2><p>将数字转换为数字数组。</p><p>使用扩展运算符(<code>...</code>)来构建数组。使用<code>Array.prototype.map()</code>和<code>parseInt()</code>将每个值转换为整数。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> digitize = <span class="function"><span class="params">n</span> =&gt;</span> [...<span class="string">`<span class="subst">$&#123;n&#125;</span>`</span>].map(<span class="function"><span class="params">i</span> =&gt;</span> <span class="built_in">parseInt</span>(i)); <span class="comment">// 还能这么展开</span></span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">digitize(<span class="number">123</span>); <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure><h2 id="distance"><a href="#distance" class="headerlink" title="distance"></a>distance</h2><p>返回两点之间的距离。</p><p>使用<code>Math.hypot()</code>计算两点之间的欧几里德距离。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> distance = <span class="function">(<span class="params">x0, y0, x1, y1</span>) =&gt;</span> <span class="built_in">Math</span>.hypot(x1 - x0, y1 - y0);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">distance(<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">// 2.23606797749979</span></span><br></pre></td></tr></table></figure><h2 id="elo"><a href="#elo" class="headerlink" title="elo"></a>elo</h2><p>使用<a href="https://en.wikipedia.org/wiki/Elo_rating_system" rel="external nofollow noopener noreferrer" target="_blank">Elo评分系统</a>计算两个或更多对手之间的评分。它接受一个预评分数组，并返回一个后评分的数组。数组从最优表现者到最差表现者排序(赢家-&gt;输家)。</p><p>使用指数<code>**</code>运算符和数学运算符计算预期分数(获胜机会)。计算每个对手的评分。循环评分，使用成对的方式计算每个玩家的Elo后评级。省略第二个参数，使用默认的<code>KFactor</code>32。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> elo = <span class="function">(<span class="params">[...ratings], kFactor = <span class="number">32</span>, selfRating</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [a, b] = ratings;</span><br><span class="line">  <span class="keyword">const</span> expectedScore = <span class="function">(<span class="params">self, opponent</span>) =&gt;</span> <span class="number">1</span> / (<span class="number">1</span> + <span class="number">10</span> ** ((opponent - self) / <span class="number">400</span>));</span><br><span class="line">  <span class="keyword">const</span> newRating = <span class="function">(<span class="params">rating, i</span>) =&gt;</span></span><br><span class="line">    (selfRating || rating) + kFactor * (i - expectedScore(i ? a : b, i ? b : a));</span><br><span class="line">  <span class="keyword">if</span> (ratings.length === <span class="number">2</span>) <span class="keyword">return</span> [newRating(a, <span class="number">1</span>), newRating(b, <span class="number">0</span>)];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = ratings.length; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> j = i;</span><br><span class="line">    <span class="keyword">while</span> (j &lt; len - <span class="number">1</span>) &#123;</span><br><span class="line">      j++;</span><br><span class="line">      [ratings[i], ratings[j]] = elo([ratings[i], ratings[j]], kFactor);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ratings;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line"><span class="comment">// Standard 1v1s</span></span><br><span class="line">elo([<span class="number">1200</span>, <span class="number">1200</span>]); <span class="comment">// [1216, 1184]</span></span><br><span class="line">elo([<span class="number">1200</span>, <span class="number">1200</span>], <span class="number">64</span>); <span class="comment">// [1232, 1168]</span></span><br><span class="line"><span class="comment">// 4 player FFA, all same rank</span></span><br><span class="line">elo([<span class="number">1200</span>, <span class="number">1200</span>, <span class="number">1200</span>, <span class="number">1200</span>]).map(<span class="built_in">Math</span>.round); <span class="comment">// [1246, 1215, 1185, 1154]</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">For teams, each rating can adjusted based on own team's average rating vs.</span></span><br><span class="line"><span class="comment">average rating of opposing team, with the score being added to their</span></span><br><span class="line"><span class="comment">own individual rating by supplying it as the third argument.</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="factorial"><a href="#factorial" class="headerlink" title="factorial"></a>factorial</h2><p>计算一个数的阶乘。</p><p>使用递归。如果n小于或等于1，返回1。否则，返回n的乘积和n - 1的阶乘。如果n是负数，则引发异常。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> factorial = <span class="function"><span class="params">n</span> =&gt;</span></span><br><span class="line">  n &lt; <span class="number">0</span></span><br><span class="line">    ? <span class="function">(<span class="params">(</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">'Negative numbers are not allowed!'</span>);</span><br><span class="line">    &#125;)()</span><br><span class="line">    : n &lt;= <span class="number">1</span></span><br><span class="line">      ? <span class="number">1</span></span><br><span class="line">      : n * factorial(n - <span class="number">1</span>);</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">factorial(<span class="number">6</span>); <span class="comment">// 720</span></span><br></pre></td></tr></table></figure><h2 id="fibonacci"><a href="#fibonacci" class="headerlink" title="fibonacci"></a>fibonacci</h2><p>生成一个数组，包含n个项的斐波那契序列。</p><p>先创建指定长度的空数组，初始化前两个值(<code>0</code>和<code>1</code>)。使用<code>Array.prototype.reduce()</code>将值添加到数组中，使用除前两个值之外的最后两个值的总和。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fibonacci = <span class="function"><span class="params">n</span> =&gt;</span></span><br><span class="line">  <span class="built_in">Array</span>.from(&#123; <span class="attr">length</span>: n &#125;).reduce(</span><br><span class="line">    (acc, val, i) =&gt; acc.concat(i &gt; <span class="number">1</span> ? acc[i - <span class="number">1</span>] + acc[i - <span class="number">2</span>] : i),</span><br><span class="line">    []</span><br><span class="line">  );</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">fibonacci(<span class="number">6</span>); <span class="comment">// [0, 1, 1, 2, 3, 5]</span></span><br></pre></td></tr></table></figure><h2 id="gcd"><a href="#gcd" class="headerlink" title="gcd"></a>gcd</h2><p>计算两个或多个数字/数组之间的最大公约数。</p><p>内部<code>_gcd</code>函数使用了递归。当<code>y</code>等于<code>0</code>时返回<code>x</code>。否则，返回<code>y</code>和<code>x%y</code>执行gcd结果。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> gcd = <span class="function">(<span class="params">...arr</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> _gcd = <span class="function">(<span class="params">x, y</span>) =&gt;</span> (!y ? x : gcd(y, x % y));</span><br><span class="line">  <span class="keyword">return</span> [...arr].reduce(<span class="function">(<span class="params">a, b</span>) =&gt;</span> _gcd(a, b));</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// EXAMPLES</span></span><br><span class="line">gcd(<span class="number">8</span>, <span class="number">36</span>); <span class="comment">// 4</span></span><br><span class="line">gcd(...[<span class="number">12</span>, <span class="number">8</span>, <span class="number">32</span>]); <span class="comment">// 4</span></span><br></pre></td></tr></table></figure><h2 id="geometricProgression"><a href="#geometricProgression" class="headerlink" title="geometricProgression"></a>geometricProgression</h2></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><div></div><button id="rewardButton" disable="enable" onclick='var e=document.getElementById("QR");"none"===e.style.display?e.style.display="block":e.style.display="none"'><span>打赏</span></button><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"><img id="wechat_qr" src="/images/wechatpay.jpg" alt="abcdGJJ 微信支付"><p>微信支付</p></div><div id="alipay" style="display:inline-block"><img id="alipay_qr" src="/images/alipay.jpg" alt="abcdGJJ 支付宝"><p>支付宝</p></div></div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/JavaScript/" rel="tag"># JavaScript</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2018/09/front-end-performance-checklist/" rel="next" title="前端性能优化检查清单"><i class="fa fa-chevron-left"></i> 前端性能优化检查清单</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2019/01/flex-layout-computed/" rel="prev" title="flex布局占据空间计算方法">flex布局占据空间计算方法 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article></div></div><div class="comments" id="comments"></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="abcdGJJ"><p class="site-author-name" itemprop="name">abcdGJJ</p><p class="site-description motion-element" itemprop="description">这里是高嘉君的个人博客</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">67</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">3</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">55</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="//pengtikui.cn" title="PP_K’s Blog" target="_blank">PP_K’s Blog</a></li><li class="links-of-blogroll-item"><a href="//hufangyun.com" title="胡方运的博客" target="_blank">胡方运的博客</a></li><li class="links-of-blogroll-item"><a href="//youthliuxi.cn" title="刘熹的博客" target="_blank">刘熹的博客</a></li><li class="links-of-blogroll-item"><a href="//lolcode.cn" title="万事静心" target="_blank">万事静心</a></li><li class="links-of-blogroll-item"><a href="//yixin.hufangyun.com" title="雁南之北" target="_blank">雁南之北</a></li><li class="links-of-blogroll-item"><a href="//vincentli.cn" title="vi my.cnf" target="_blank">vi my.cnf</a></li><li class="links-of-blogroll-item"><a href="//youthol.top" title="绿岛之美" target="_blank">绿岛之美</a></li><li class="links-of-blogroll-item"><a href="//mahui.youthliuxi.cn" title="小马姑娘" target="_blank">小马姑娘</a></li><li class="links-of-blogroll-item"><a href="//www.unique-liu.com" title="技术源码分享" target="_blank">技术源码分享</a></li><li class="links-of-blogroll-item"><a href="//blog.summerpro.cn" title="summerpro" target="_blank">summerpro</a></li><li class="links-of-blogroll-item"><a href="//www.dligo.cc" title="帝果" target="_blank">帝果</a></li><li class="links-of-blogroll-item"><a href="//blog.hs5233.com" title="猎豹园地" target="_blank">猎豹园地</a></li><li class="links-of-blogroll-item"><a href="//blog.hizmz.com" title="助梦者的博客" target="_blank">助梦者的博客</a></li><li class="links-of-blogroll-item"><a href="//www.fmwhahaha.com" title="FMW哈哈哈" target="_blank">FMW哈哈哈</a></li><li class="links-of-blogroll-item"><a href="//passer-by.com" title="路人甲" target="_blank">路人甲</a></li></ul></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Adapter"><span class="nav-number">1.</span> <span class="nav-text">Adapter</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ary"><span class="nav-number">1.1.</span> <span class="nav-text">ary</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#call"><span class="nav-number">1.2.</span> <span class="nav-text">call</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#collectInto"><span class="nav-number">1.3.</span> <span class="nav-text">collectInto</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#flip"><span class="nav-number">1.4.</span> <span class="nav-text">flip</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#over"><span class="nav-number">1.5.</span> <span class="nav-text">over</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#overArgs"><span class="nav-number">1.6.</span> <span class="nav-text">overArgs</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pipeAsyncFunctions"><span class="nav-number">1.7.</span> <span class="nav-text">pipeAsyncFunctions</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pipeFunctions"><span class="nav-number">1.8.</span> <span class="nav-text">pipeFunctions</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#promisify"><span class="nav-number">1.9.</span> <span class="nav-text">promisify</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#rearg"><span class="nav-number">1.10.</span> <span class="nav-text">rearg</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#spreadOver"><span class="nav-number">1.11.</span> <span class="nav-text">spreadOver</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#unary"><span class="nav-number">1.12.</span> <span class="nav-text">unary</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Array"><span class="nav-number">2.</span> <span class="nav-text">Array</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#all"><span class="nav-number">2.1.</span> <span class="nav-text">all</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#allEqual"><span class="nav-number">2.2.</span> <span class="nav-text">allEqual</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#any"><span class="nav-number">2.3.</span> <span class="nav-text">any</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#arrayToCSV"><span class="nav-number">2.4.</span> <span class="nav-text">arrayToCSV</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#bifurcate"><span class="nav-number">2.5.</span> <span class="nav-text">bifurcate</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#bifurcateBy"><span class="nav-number">2.6.</span> <span class="nav-text">bifurcateBy</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chunk"><span class="nav-number">2.7.</span> <span class="nav-text">chunk</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#compact"><span class="nav-number">2.8.</span> <span class="nav-text">compact</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#countBy"><span class="nav-number">2.9.</span> <span class="nav-text">countBy</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#countOccurrences"><span class="nav-number">2.10.</span> <span class="nav-text">countOccurrences</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#deepFlatten"><span class="nav-number">2.11.</span> <span class="nav-text">deepFlatten</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#difference"><span class="nav-number">2.12.</span> <span class="nav-text">difference</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#differenceBy"><span class="nav-number">2.13.</span> <span class="nav-text">differenceBy</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#differenceWith"><span class="nav-number">2.14.</span> <span class="nav-text">differenceWith</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#drop"><span class="nav-number">2.15.</span> <span class="nav-text">drop</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dropRight"><span class="nav-number">2.16.</span> <span class="nav-text">dropRight</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dropRightWhile"><span class="nav-number">2.17.</span> <span class="nav-text">dropRightWhile</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dropWhile"><span class="nav-number">2.18.</span> <span class="nav-text">dropWhile</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#everyNth"><span class="nav-number">2.19.</span> <span class="nav-text">everyNth</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#filterNonUnique"><span class="nav-number">2.20.</span> <span class="nav-text">filterNonUnique</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#filterNonUniqueBy"><span class="nav-number">2.21.</span> <span class="nav-text">filterNonUniqueBy</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#findLast"><span class="nav-number">2.22.</span> <span class="nav-text">findLast</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#findLastIndex"><span class="nav-number">2.23.</span> <span class="nav-text">findLastIndex</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#flatten"><span class="nav-number">2.24.</span> <span class="nav-text">flatten</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#forEachRight"><span class="nav-number">2.25.</span> <span class="nav-text">forEachRight</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#groupBy"><span class="nav-number">2.26.</span> <span class="nav-text">groupBy</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#head"><span class="nav-number">2.27.</span> <span class="nav-text">head</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#indexOfAll"><span class="nav-number">2.28.</span> <span class="nav-text">indexOfAll</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#initial"><span class="nav-number">2.29.</span> <span class="nav-text">initial</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#initialize2DArray"><span class="nav-number">2.30.</span> <span class="nav-text">initialize2DArray</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#initializeArrayWithRange"><span class="nav-number">2.31.</span> <span class="nav-text">initializeArrayWithRange</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#initializeArrayWithRangeRight"><span class="nav-number">2.32.</span> <span class="nav-text">initializeArrayWithRangeRight</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#initializeArrayWithValues"><span class="nav-number">2.33.</span> <span class="nav-text">initializeArrayWithValues</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#initializeNDArray"><span class="nav-number">2.34.</span> <span class="nav-text">initializeNDArray</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#intersection"><span class="nav-number">2.35.</span> <span class="nav-text">intersection</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#intersectionBy"><span class="nav-number">2.36.</span> <span class="nav-text">intersectionBy</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#intersectionWith"><span class="nav-number">2.37.</span> <span class="nav-text">intersectionWith</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#isSorted"><span class="nav-number">2.38.</span> <span class="nav-text">isSorted</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#join"><span class="nav-number">2.39.</span> <span class="nav-text">join</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSONtoCSV"><span class="nav-number">2.40.</span> <span class="nav-text">JSONtoCSV</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#last"><span class="nav-number">2.41.</span> <span class="nav-text">last</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#longestItem"><span class="nav-number">2.42.</span> <span class="nav-text">longestItem</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mapObject"><span class="nav-number">2.43.</span> <span class="nav-text">mapObject</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#maxN"><span class="nav-number">2.44.</span> <span class="nav-text">maxN</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#minN"><span class="nav-number">2.45.</span> <span class="nav-text">minN</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#none"><span class="nav-number">2.46.</span> <span class="nav-text">none</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#nthElement"><span class="nav-number">2.47.</span> <span class="nav-text">nthElement</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#offset"><span class="nav-number">2.48.</span> <span class="nav-text">offset</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#partition"><span class="nav-number">2.49.</span> <span class="nav-text">partition</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#permutations"><span class="nav-number">2.50.</span> <span class="nav-text">permutations</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pull"><span class="nav-number">2.51.</span> <span class="nav-text">pull</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pullAtIndex"><span class="nav-number">2.52.</span> <span class="nav-text">pullAtIndex</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pullAtValue"><span class="nav-number">2.53.</span> <span class="nav-text">pullAtValue</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pullBy"><span class="nav-number">2.54.</span> <span class="nav-text">pullBy</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#reducedFilter"><span class="nav-number">2.55.</span> <span class="nav-text">reducedFilter</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#reduceSuccessive"><span class="nav-number">2.56.</span> <span class="nav-text">reduceSuccessive</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#reduceWhich"><span class="nav-number">2.57.</span> <span class="nav-text">reduceWhich</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#reject"><span class="nav-number">2.58.</span> <span class="nav-text">reject</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#remove"><span class="nav-number">2.59.</span> <span class="nav-text">remove</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sample"><span class="nav-number">2.60.</span> <span class="nav-text">sample</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sampleSize"><span class="nav-number">2.61.</span> <span class="nav-text">sampleSize</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#shank"><span class="nav-number">2.62.</span> <span class="nav-text">shank</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#shuffle"><span class="nav-number">2.63.</span> <span class="nav-text">shuffle</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#similarity"><span class="nav-number">2.64.</span> <span class="nav-text">similarity</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sortedIndex"><span class="nav-number">2.65.</span> <span class="nav-text">sortedIndex</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sortedIndexBy"><span class="nav-number">2.66.</span> <span class="nav-text">sortedIndexBy</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sortedLastIndex"><span class="nav-number">2.67.</span> <span class="nav-text">sortedLastIndex</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sortedLastIndexBy"><span class="nav-number">2.68.</span> <span class="nav-text">sortedLastIndexBy</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#stableSort"><span class="nav-number">2.69.</span> <span class="nav-text">stableSort</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#symmetricDifference"><span class="nav-number">2.70.</span> <span class="nav-text">symmetricDifference</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#symmetricDifferenceBy"><span class="nav-number">2.71.</span> <span class="nav-text">symmetricDifferenceBy</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#symmetricDifferenceWith"><span class="nav-number">2.72.</span> <span class="nav-text">symmetricDifferenceWith</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tail"><span class="nav-number">2.73.</span> <span class="nav-text">tail</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#take"><span class="nav-number">2.74.</span> <span class="nav-text">take</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#takeRight"><span class="nav-number">2.75.</span> <span class="nav-text">takeRight</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#takeRightWhile"><span class="nav-number">2.76.</span> <span class="nav-text">takeRightWhile</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#takeWhile"><span class="nav-number">2.77.</span> <span class="nav-text">takeWhile</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#toHash"><span class="nav-number">2.78.</span> <span class="nav-text">toHash</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#union"><span class="nav-number">2.79.</span> <span class="nav-text">union</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#unionBy"><span class="nav-number">2.80.</span> <span class="nav-text">unionBy</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#unionWith"><span class="nav-number">2.81.</span> <span class="nav-text">unionWith</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#uniqueElements"><span class="nav-number">2.82.</span> <span class="nav-text">uniqueElements</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#uniqueElementsBy"><span class="nav-number">2.83.</span> <span class="nav-text">uniqueElementsBy</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#uniqueElementsByRight"><span class="nav-number">2.84.</span> <span class="nav-text">uniqueElementsByRight</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#uniqueSymmetricDifference"><span class="nav-number">2.85.</span> <span class="nav-text">uniqueSymmetricDifference</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#unzip"><span class="nav-number">2.86.</span> <span class="nav-text">unzip</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#unzipWith"><span class="nav-number">2.87.</span> <span class="nav-text">unzipWith</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#without"><span class="nav-number">2.88.</span> <span class="nav-text">without</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#xProd"><span class="nav-number">2.89.</span> <span class="nav-text">xProd</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#zip"><span class="nav-number">2.90.</span> <span class="nav-text">zip</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#zipObject"><span class="nav-number">2.91.</span> <span class="nav-text">zipObject</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#zipWith"><span class="nav-number">2.92.</span> <span class="nav-text">zipWith</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Browser"><span class="nav-number">3.</span> <span class="nav-text">Browser</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#arrayToHtmlList"><span class="nav-number">3.1.</span> <span class="nav-text">arrayToHtmlList</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#bottomVisible"><span class="nav-number">3.2.</span> <span class="nav-text">bottomVisible</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#copyToClipboard"><span class="nav-number">3.3.</span> <span class="nav-text">copyToClipboard</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#counter"><span class="nav-number">3.4.</span> <span class="nav-text">counter</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#createElement"><span class="nav-number">3.5.</span> <span class="nav-text">createElement</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#createEventHub"><span class="nav-number">3.6.</span> <span class="nav-text">createEventHub</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#currentURL"><span class="nav-number">3.7.</span> <span class="nav-text">currentURL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#detectDeviceType"><span class="nav-number">3.8.</span> <span class="nav-text">detectDeviceType</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#elementContains"><span class="nav-number">3.9.</span> <span class="nav-text">elementContains</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#elementIsVisibleInViewport"><span class="nav-number">3.10.</span> <span class="nav-text">elementIsVisibleInViewport</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#getImages"><span class="nav-number">3.11.</span> <span class="nav-text">getImages</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#getScrollPosition"><span class="nav-number">3.12.</span> <span class="nav-text">getScrollPosition</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#getStyle"><span class="nav-number">3.13.</span> <span class="nav-text">getStyle</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hasClass"><span class="nav-number">3.14.</span> <span class="nav-text">hasClass</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hashBrowser"><span class="nav-number">3.15.</span> <span class="nav-text">hashBrowser</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hide"><span class="nav-number">3.16.</span> <span class="nav-text">hide</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#httpsRedirect"><span class="nav-number">3.17.</span> <span class="nav-text">httpsRedirect</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#insertAfter"><span class="nav-number">3.18.</span> <span class="nav-text">insertAfter</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#insertBefore"><span class="nav-number">3.19.</span> <span class="nav-text">insertBefore</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#isBrowserTabFocused"><span class="nav-number">3.20.</span> <span class="nav-text">isBrowserTabFocused</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#nodeListToArray"><span class="nav-number">3.21.</span> <span class="nav-text">nodeListToArray</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#observeMutations"><span class="nav-number">3.22.</span> <span class="nav-text">observeMutations</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#off"><span class="nav-number">3.23.</span> <span class="nav-text">off</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#on"><span class="nav-number">3.24.</span> <span class="nav-text">on</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#onUserInputChange"><span class="nav-number">3.25.</span> <span class="nav-text">onUserInputChange</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#prefix"><span class="nav-number">3.26.</span> <span class="nav-text">prefix</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#recordAnimationFrames"><span class="nav-number">3.27.</span> <span class="nav-text">recordAnimationFrames</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#redirect"><span class="nav-number">3.28.</span> <span class="nav-text">redirect</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#runAsync"><span class="nav-number">3.29.</span> <span class="nav-text">runAsync</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#scrollToTop"><span class="nav-number">3.30.</span> <span class="nav-text">scrollToTop</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#setStyle"><span class="nav-number">3.31.</span> <span class="nav-text">setStyle</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#show"><span class="nav-number">3.32.</span> <span class="nav-text">show</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#smoothScroll"><span class="nav-number">3.33.</span> <span class="nav-text">smoothScroll</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#toggleClass"><span class="nav-number">3.34.</span> <span class="nav-text">toggleClass</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#triggerEvent"><span class="nav-number">3.35.</span> <span class="nav-text">triggerEvent</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UUIDGeneratorBrowser"><span class="nav-number">3.36.</span> <span class="nav-text">UUIDGeneratorBrowser</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Date"><span class="nav-number">4.</span> <span class="nav-text">Date</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#dayOfYear"><span class="nav-number">4.1.</span> <span class="nav-text">dayOfYear</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#formatDuration"><span class="nav-number">4.2.</span> <span class="nav-text">formatDuration</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#getColonTimeFromDate"><span class="nav-number">4.3.</span> <span class="nav-text">getColonTimeFromDate</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#getDaysDiffBetweenDates"><span class="nav-number">4.4.</span> <span class="nav-text">getDaysDiffBetweenDates</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#getMeridiemSuffixOfInteger"><span class="nav-number">4.5.</span> <span class="nav-text">getMeridiemSuffixOfInteger</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#isAfterDate"><span class="nav-number">4.6.</span> <span class="nav-text">isAfterDate</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#isBeforeDate"><span class="nav-number">4.7.</span> <span class="nav-text">isBeforeDate</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#isSameDate"><span class="nav-number">4.8.</span> <span class="nav-text">isSameDate</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#maxDate"><span class="nav-number">4.9.</span> <span class="nav-text">maxDate</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#minDate"><span class="nav-number">4.10.</span> <span class="nav-text">minDate</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tomorrow"><span class="nav-number">4.11.</span> <span class="nav-text">tomorrow</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Function"><span class="nav-number">5.</span> <span class="nav-text">Function</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#attempt"><span class="nav-number">5.1.</span> <span class="nav-text">attempt</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#bind"><span class="nav-number">5.2.</span> <span class="nav-text">bind</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#bindKey"><span class="nav-number">5.3.</span> <span class="nav-text">bindKey</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chainAsync"><span class="nav-number">5.4.</span> <span class="nav-text">chainAsync</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#checkProp"><span class="nav-number">5.5.</span> <span class="nav-text">checkProp</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#compose"><span class="nav-number">5.6.</span> <span class="nav-text">compose</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#composeRight"><span class="nav-number">5.7.</span> <span class="nav-text">composeRight</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#converge"><span class="nav-number">5.8.</span> <span class="nav-text">converge</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#curry"><span class="nav-number">5.9.</span> <span class="nav-text">curry</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#debounce"><span class="nav-number">5.10.</span> <span class="nav-text">debounce</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#defer"><span class="nav-number">5.11.</span> <span class="nav-text">defer</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#functionName"><span class="nav-number">5.12.</span> <span class="nav-text">functionName</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hz"><span class="nav-number">5.13.</span> <span class="nav-text">hz</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#memoize"><span class="nav-number">5.14.</span> <span class="nav-text">memoize</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#negate"><span class="nav-number">5.15.</span> <span class="nav-text">negate</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#once"><span class="nav-number">5.16.</span> <span class="nav-text">once</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#partial"><span class="nav-number">5.17.</span> <span class="nav-text">partial</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#partialRight"><span class="nav-number">5.18.</span> <span class="nav-text">partialRight</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#runPromisesInSeries"><span class="nav-number">5.19.</span> <span class="nav-text">runPromisesInSeries</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sleep"><span class="nav-number">5.20.</span> <span class="nav-text">sleep</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#throttle"><span class="nav-number">5.21.</span> <span class="nav-text">throttle</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#times"><span class="nav-number">5.22.</span> <span class="nav-text">times</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#uncurry"><span class="nav-number">5.23.</span> <span class="nav-text">uncurry</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#unfold"><span class="nav-number">5.24.</span> <span class="nav-text">unfold</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#when"><span class="nav-number">5.25.</span> <span class="nav-text">when</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Math"><span class="nav-number">6.</span> <span class="nav-text">Math</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#approximatelyEqual"><span class="nav-number">6.1.</span> <span class="nav-text">approximatelyEqual</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#average"><span class="nav-number">6.2.</span> <span class="nav-text">average</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#averageBy"><span class="nav-number">6.3.</span> <span class="nav-text">averageBy</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#binomialCoefficient"><span class="nav-number">6.4.</span> <span class="nav-text">binomialCoefficient</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#clampNumber"><span class="nav-number">6.5.</span> <span class="nav-text">clampNumber</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#degreesToRads"><span class="nav-number">6.6.</span> <span class="nav-text">degreesToRads</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#digitize"><span class="nav-number">6.7.</span> <span class="nav-text">digitize</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#distance"><span class="nav-number">6.8.</span> <span class="nav-text">distance</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#elo"><span class="nav-number">6.9.</span> <span class="nav-text">elo</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#factorial"><span class="nav-number">6.10.</span> <span class="nav-text">factorial</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#fibonacci"><span class="nav-number">6.11.</span> <span class="nav-text">fibonacci</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#gcd"><span class="nav-number">6.12.</span> <span class="nav-text">gcd</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#geometricProgression"><span class="nav-number">6.13.</span> <span class="nav-text">geometricProgression</span></a></li></ol></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2020</span> <span class="with-love" id="animate"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">abcdGJJ</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-area-chart"></i> </span><span class="post-meta-item-text">站点总字数：</span> <span title="站点总字数">188k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span class="post-meta-item-text">站点阅读时长 &asymp;</span> <span title="站点阅读时长">2:51</span></div><div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io" rel="external nofollow noopener noreferrer">Hexo</a> 强力驱动<span class="post-meta-divider">|</span><a href="//www.miitbeian.gov.cn" target="_blank">鲁ICP备15017412号-1</a></div><span class="post-meta-divider">|</span><div class="theme-info">主题 – <a class="theme-link" target="_blank" href="https://theme-next.org" rel="external nofollow noopener noreferrer">NexT.Pisces</a></div><div class="upyunLogo">cdn提供商：<a href="//www.upyun.com/" target="_blank">又拍云</a> <img src="/images/upyunLogo.png" alt="又拍云logo" width="100" style="display:inline-block;vertical-align:middle"></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/js/src/utils.js?v=1.0.2"></script><script type="text/javascript" src="/js/src/motion.js?v=1.0.2"></script><script type="text/javascript" src="/js/src/affix.js?v=1.0.2"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=1.0.2"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=1.0.2"></script><script type="text/javascript" src="/js/src/post-details.js?v=1.0.2"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=1.0.2"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script type="text/javascript">var GUEST=["nick","mail","link"],guest="nick,mail";guest=guest.split(",").filter(function(e){return GUEST.indexOf(e)>-1}),new Valine({el:"#comments",verify:!0,notify:!0,appId:"hbO4vumCubsIBPr2RQmapWE5-MdYXbMMI",appKey:"PQMkY3TURliQ4Lc2VBA5mJGx",placeholder:"说点什么",avatar:"mm",meta:guest,pageSize:"10",visitor:!1})</script><script>function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url }) })
        .done(function ({ results }) {
          if (results.length > 0) {
            var counter = results[0];
            
              var $element = $(document.getElementById(url));
              $element.find('.leancloud-visitors-count').text(counter.time + 1);
            
            Counter('put', `/classes/Counter/${counter.objectId}`, JSON.stringify({ time: { "__op":"Increment", "amount":1 } }))
            
            .fail(function ({ responseJSON }) {
                console.log('Failed to save Visitor num, with error message: ' + responseJSON.error);
            })
          } else {
            
              var $element = $(document.getElementById(url));
              $element.find('.leancloud-visitors-count').text('Counter not initialized! See more at console err msg.');
              console.error('ATTENTION! LeanCloud counter has security bug, see here how to solve it: https://github.com/theme-next/hexo-leancloud-counter-security. \n But you also can use LeanCloud without security, by set \'security\' option to \'false\'.');
            
          }
        })
      .fail(function ({ responseJSON }) {
        console.log('LeanCloud Counter Error:' + responseJSON.code + " " + responseJSON.error);
      });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + "2bbhORHl0lFj56CjcjlM9RkS-gzGzoHsz")
        .done(function ({ api_server }) {
          var Counter = function (method, url, data) {
            return $.ajax({
              method: method,
              url: `https://${api_server}/1.1${url}`,
              headers: {
                'X-LC-Id': "2bbhORHl0lFj56CjcjlM9RkS-gzGzoHsz",
                'X-LC-Key': "KHwlv9OpkyfWVdg95gdNHDnv",
                'Content-Type': 'application/json',
              },
              data: data,
            });
          };
          
          addCount(Counter);
          
        })
    });</script></body></html><!-- rebuild by neat -->